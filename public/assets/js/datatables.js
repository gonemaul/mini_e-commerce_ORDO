
/*! DataTables 2.1.3
 * © SpryMedia Ltd - datatables.net/license
 */
(function(factory){"use strict";if(typeof define==='function'&&define.amd){define(['jquery'],function($){return factory($,window,document)})}else if(typeof exports==='object'){var jq=require('jquery');if(typeof window==='undefined'){module.exports=function(root,$){if(!root){root=window}
if(!$){$=jq(root)}
return factory($,root,root.document)}}else{module.exports=factory(jq,window,window.document)}}else{window.DataTable=factory(jQuery,window,document)}}(function($,window,document){"use strict";var DataTable=function(selector,options){if(DataTable.factory(selector,options)){return DataTable}
if(this instanceof DataTable){return $(selector).DataTable(options)}else{options=selector}
var _that=this;var emptyInit=options===undefined;var len=this.length;if(emptyInit){options={}}
this.api=function(){return new _Api(this)};this.each(function(){var o={};var oInit=len>1?_fnExtend(o,options,!0):options;var i=0,iLen;var sId=this.getAttribute('id');var defaults=DataTable.defaults;var $this=$(this);if(this.nodeName.toLowerCase()!='table'){_fnLog(null,0,'Non-table node initialisation ('+this.nodeName+')',2);return}
$(this).trigger('options.dt',oInit);_fnCompatOpts(defaults);_fnCompatCols(defaults.column);_fnCamelToHungarian(defaults,defaults,!0);_fnCamelToHungarian(defaults.column,defaults.column,!0);_fnCamelToHungarian(defaults,$.extend(oInit,$this.data()),!0);var allSettings=DataTable.settings;for(i=0,iLen=allSettings.length;i<iLen;i++){var s=allSettings[i];if(s.nTable==this||(s.nTHead&&s.nTHead.parentNode==this)||(s.nTFoot&&s.nTFoot.parentNode==this)){var bRetrieve=oInit.bRetrieve!==undefined?oInit.bRetrieve:defaults.bRetrieve;var bDestroy=oInit.bDestroy!==undefined?oInit.bDestroy:defaults.bDestroy;if(emptyInit||bRetrieve){return s.oInstance}else if(bDestroy){new DataTable.Api(s).destroy();break}else{_fnLog(s,0,'Cannot reinitialise DataTable',3);return}}
if(s.sTableId==this.id){allSettings.splice(i,1);break}}
if(sId===null||sId===""){sId="DataTables_Table_"+(DataTable.ext._unique++);this.id=sId}
var oSettings=$.extend(!0,{},DataTable.models.oSettings,{"sDestroyWidth":$this[0].style.width,"sInstance":sId,"sTableId":sId,colgroup:$('<colgroup>').prependTo(this),fastData:function(row,column,type){return _fnGetCellData(oSettings,row,column,type)}});oSettings.nTable=this;oSettings.oInit=oInit;allSettings.push(oSettings);oSettings.api=new _Api(oSettings);oSettings.oInstance=(_that.length===1)?_that:$this.dataTable();_fnCompatOpts(oInit);if(oInit.aLengthMenu&&!oInit.iDisplayLength){oInit.iDisplayLength=Array.isArray(oInit.aLengthMenu[0])?oInit.aLengthMenu[0][0]:$.isPlainObject(oInit.aLengthMenu[0])?oInit.aLengthMenu[0].value:oInit.aLengthMenu[0]}
oInit=_fnExtend($.extend(!0,{},defaults),oInit);_fnMap(oSettings.oFeatures,oInit,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]);_fnMap(oSettings,oInit,["ajax","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","iStateDuration","bSortCellsTop","iTabIndex","sDom","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId","caption","layout","orderDescReverse",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]);_fnMap(oSettings.oScroll,oInit,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback");_fnCallbackReg(oSettings,'aoDrawCallback',oInit.fnDrawCallback);_fnCallbackReg(oSettings,'aoStateSaveParams',oInit.fnStateSaveParams);_fnCallbackReg(oSettings,'aoStateLoadParams',oInit.fnStateLoadParams);_fnCallbackReg(oSettings,'aoStateLoaded',oInit.fnStateLoaded);_fnCallbackReg(oSettings,'aoRowCallback',oInit.fnRowCallback);_fnCallbackReg(oSettings,'aoRowCreatedCallback',oInit.fnCreatedRow);_fnCallbackReg(oSettings,'aoHeaderCallback',oInit.fnHeaderCallback);_fnCallbackReg(oSettings,'aoFooterCallback',oInit.fnFooterCallback);_fnCallbackReg(oSettings,'aoInitComplete',oInit.fnInitComplete);_fnCallbackReg(oSettings,'aoPreDrawCallback',oInit.fnPreDrawCallback);oSettings.rowIdFn=_fnGetObjectDataFn(oInit.rowId);_fnBrowserDetect(oSettings);var oClasses=oSettings.oClasses;$.extend(oClasses,DataTable.ext.classes,oInit.oClasses);$this.addClass(oClasses.table);if(!oSettings.oFeatures.bPaginate){oInit.iDisplayStart=0}
if(oSettings.iInitDisplayStart===undefined){oSettings.iInitDisplayStart=oInit.iDisplayStart;oSettings._iDisplayStart=oInit.iDisplayStart}
var defer=oInit.iDeferLoading;if(defer!==null){oSettings.deferLoading=!0;var tmp=Array.isArray(defer);oSettings._iRecordsDisplay=tmp?defer[0]:defer;oSettings._iRecordsTotal=tmp?defer[1]:defer}
var columnsInit=[];var thead=this.getElementsByTagName('thead');var initHeaderLayout=_fnDetectHeader(oSettings,thead[0]);if(oInit.aoColumns){columnsInit=oInit.aoColumns}else if(initHeaderLayout.length){for(i=0,iLen=initHeaderLayout[0].length;i<iLen;i++){columnsInit.push(null)}}
for(i=0,iLen=columnsInit.length;i<iLen;i++){_fnAddColumn(oSettings)}
_fnApplyColumnDefs(oSettings,oInit.aoColumnDefs,columnsInit,initHeaderLayout,function(iCol,oDef){_fnColumnOptions(oSettings,iCol,oDef)});var rowOne=$this.children('tbody').find('tr').eq(0);if(rowOne.length){var a=function(cell,name){return cell.getAttribute('data-'+name)!==null?name:null};$(rowOne[0]).children('th, td').each(function(i,cell){var col=oSettings.aoColumns[i];if(!col){_fnLog(oSettings,0,'Incorrect column count',18)}
if(col.mData===i){var sort=a(cell,'sort')||a(cell,'order');var filter=a(cell,'filter')||a(cell,'search');if(sort!==null||filter!==null){col.mData={_:i+'.display',sort:sort!==null?i+'.@data-'+sort:undefined,type:sort!==null?i+'.@data-'+sort:undefined,filter:filter!==null?i+'.@data-'+filter:undefined};col._isArrayHost=!0;_fnColumnOptions(oSettings,i)}}})}
_fnCallbackReg(oSettings,'aoDrawCallback',_fnSaveState);var features=oSettings.oFeatures;if(oInit.bStateSave){features.bStateSave=!0}
if(oInit.aaSorting===undefined){var sorting=oSettings.aaSorting;for(i=0,iLen=sorting.length;i<iLen;i++){sorting[i][1]=oSettings.aoColumns[i].asSorting[0]}}
_fnSortingClasses(oSettings);_fnCallbackReg(oSettings,'aoDrawCallback',function(){if(oSettings.bSorted||_fnDataSource(oSettings)==='ssp'||features.bDeferRender){_fnSortingClasses(oSettings)}});var caption=$this.children('caption');if(oSettings.caption){if(caption.length===0){caption=$('<caption/>').appendTo($this)}
caption.html(oSettings.caption)}
if(caption.length){caption[0]._captionSide=caption.css('caption-side');oSettings.captionNode=caption[0]}
if(thead.length===0){thead=$('<thead/>').appendTo($this)}
oSettings.nTHead=thead[0];$('tr',thead).addClass(oClasses.thead.row);var tbody=$this.children('tbody');if(tbody.length===0){tbody=$('<tbody/>').insertAfter(thead)}
oSettings.nTBody=tbody[0];var tfoot=$this.children('tfoot');if(tfoot.length===0){tfoot=$('<tfoot/>').appendTo($this)}
oSettings.nTFoot=tfoot[0];$('tr',tfoot).addClass(oClasses.tfoot.row);oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bInitialised=!0;var oLanguage=oSettings.oLanguage;$.extend(!0,oLanguage,oInit.oLanguage);if(oLanguage.sUrl){$.ajax({dataType:'json',url:oLanguage.sUrl,success:function(json){_fnCamelToHungarian(defaults.oLanguage,json);$.extend(!0,oLanguage,json,oSettings.oInit.oLanguage);_fnCallbackFire(oSettings,null,'i18n',[oSettings],!0);_fnInitialise(oSettings)},error:function(){_fnLog(oSettings,0,'i18n file loading error',21);_fnInitialise(oSettings)}})}else{_fnCallbackFire(oSettings,null,'i18n',[oSettings]);_fnInitialise(oSettings)}});_that=null;return this};DataTable.ext=_ext={buttons:{},classes:{},builder:"dt/dt-2.1.3/r-3.0.2/sb-1.7.1/sp-2.3.1",errMode:"alert",feature:[],features:{},search:[],selector:{cell:[],column:[],row:[]},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{className:{},detect:[],render:{},search:{},order:{}},_unique:0,fnVersionCheck:DataTable.fnVersionCheck,iApiIndex:0,sVersion:DataTable.version};$.extend(_ext,{afnFiltering:_ext.search,aTypes:_ext.type.detect,ofnSearch:_ext.type.search,oSort:_ext.type.order,afnSortData:_ext.order,aoFeatures:_ext.feature,oStdClasses:_ext.classes,oPagination:_ext.pager});$.extend(DataTable.ext.classes,{container:'dt-container',empty:{row:'dt-empty'},info:{container:'dt-info'},layout:{row:'dt-layout-row',cell:'dt-layout-cell',tableRow:'dt-layout-table',tableCell:'',start:'dt-layout-start',end:'dt-layout-end',full:'dt-layout-full'},length:{container:'dt-length',select:'dt-input'},order:{canAsc:'dt-orderable-asc',canDesc:'dt-orderable-desc',isAsc:'dt-ordering-asc',isDesc:'dt-ordering-desc',none:'dt-orderable-none',position:'sorting_'},processing:{container:'dt-processing'},scrolling:{body:'dt-scroll-body',container:'dt-scroll',footer:{self:'dt-scroll-foot',inner:'dt-scroll-footInner'},header:{self:'dt-scroll-head',inner:'dt-scroll-headInner'}},search:{container:'dt-search',input:'dt-input'},table:'dataTable',tbody:{cell:'',row:''},thead:{cell:'',row:''},tfoot:{cell:'',row:''},paging:{active:'current',button:'dt-paging-button',container:'dt-paging',disabled:'disabled'}});var _ext;var _Api;var _api_register;var _api_registerPlural;var _re_dic={};var _re_new_lines=/[\r\n\u2028]/g;var _re_html=/<([^>]*>)/g;var _max_str_len=Math.pow(2,28);var _re_date=/^\d{2,4}[./-]\d{1,2}[./-]\d{1,2}([T ]{1}\d{1,2}[:.]\d{2}([.:]\d{2})?)?$/;var _re_escape_regex=new RegExp('(\\'+['/','.','*','+','?','|','(',')','[',']','{','}','\\','$','^','-'].join('|\\')+')','g');var _re_formatted_numeric=/['\u00A0,$£€¥%\u2009\u202F\u20BD\u20a9\u20BArfkɃΞ]/gi;var _empty=function(d){return!d||d===!0||d==='-'?!0:!1};var _intVal=function(s){var integer=parseInt(s,10);return!isNaN(integer)&&isFinite(s)?integer:null};var _numToDecimal=function(num,decimalPoint){if(!_re_dic[decimalPoint]){_re_dic[decimalPoint]=new RegExp(_fnEscapeRegex(decimalPoint),'g')}
return typeof num==='string'&&decimalPoint!=='.'?num.replace(/\./g,'').replace(_re_dic[decimalPoint],'.'):num};var _isNumber=function(d,decimalPoint,formatted,allowEmpty){var type=typeof d;var strType=type==='string';if(type==='number'||type==='bigint'){return!0}
if(allowEmpty&&_empty(d)){return!0}
if(decimalPoint&&strType){d=_numToDecimal(d,decimalPoint)}
if(formatted&&strType){d=d.replace(_re_formatted_numeric,'')}
return!isNaN(parseFloat(d))&&isFinite(d)};var _isHtml=function(d){return _empty(d)||typeof d==='string'};var _htmlNumeric=function(d,decimalPoint,formatted,allowEmpty){if(allowEmpty&&_empty(d)){return!0}
if(typeof d==='string'&&d.match(/<(input|select)/i)){return null}
var html=_isHtml(d);return!html?null:_isNumber(_stripHtml(d),decimalPoint,formatted,allowEmpty)?!0:null};var _pluck=function(a,prop,prop2){var out=[];var i=0,ien=a.length;if(prop2!==undefined){for(;i<ien;i++){if(a[i]&&a[i][prop]){out.push(a[i][prop][prop2])}}}else{for(;i<ien;i++){if(a[i]){out.push(a[i][prop])}}}
return out};var _pluck_order=function(a,order,prop,prop2){var out=[];var i=0,ien=order.length;if(prop2!==undefined){for(;i<ien;i++){if(a[order[i]][prop]){out.push(a[order[i]][prop][prop2])}}}else{for(;i<ien;i++){if(a[order[i]]){out.push(a[order[i]][prop])}}}
return out};var _range=function(len,start){var out=[];var end;if(start===undefined){start=0;end=len}else{end=start;start=len}
for(var i=start;i<end;i++){out.push(i)}
return out};var _removeEmpty=function(a){var out=[];for(var i=0,ien=a.length;i<ien;i++){if(a[i]){out.push(a[i])}}
return out};var _stripHtml=function(input){if(!input||typeof input!=='string'){return input}
if(input.length>_max_str_len){throw new Error('Exceeded max str len')}
var previous;input=input.replace(_re_html,'');do{previous=input;input=input.replace(/<script/i,'')}while(input!==previous);return previous};var _escapeHtml=function(d){if(Array.isArray(d)){d=d.join(',')}
return typeof d==='string'?d.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'):d};var _normalize=function(str,both){if(typeof str!=='string'){return str}
var res=str.normalize("NFD");return res.length!==str.length?(both===!0?str+' ':'')+res.replace(/[\u0300-\u036f]/g,""):res}
var _areAllUnique=function(src){if(src.length<2){return!0}
var sorted=src.slice().sort();var last=sorted[0];for(var i=1,ien=sorted.length;i<ien;i++){if(sorted[i]===last){return!1}
last=sorted[i]}
return!0};var _unique=function(src){if(Array.from&&Set){return Array.from(new Set(src))}
if(_areAllUnique(src)){return src.slice()}
var out=[],val,i,ien=src.length,j,k=0;again:for(i=0;i<ien;i++){val=src[i];for(j=0;j<k;j++){if(out[j]===val){continue again}}
out.push(val);k++}
return out};var _flatten=function(out,val){if(Array.isArray(val)){for(var i=0;i<val.length;i++){_flatten(out,val[i])}}else{out.push(val)}
return out}
function _addClass(el,name){if(name){name.split(' ').forEach(function(n){if(n){el.classList.add(n)}})}}
DataTable.util={diacritics:function(mixed,both){var type=typeof mixed;if(type!=='function'){return _normalize(mixed,both)}
_normalize=mixed},debounce:function(fn,timeout){var timer;return function(){var that=this;var args=arguments;clearTimeout(timer);timer=setTimeout(function(){fn.apply(that,args)},timeout||250)}},throttle:function(fn,freq){var
frequency=freq!==undefined?freq:200,last,timer;return function(){var
that=this,now=+new Date(),args=arguments;if(last&&now<last+frequency){clearTimeout(timer);timer=setTimeout(function(){last=undefined;fn.apply(that,args)},frequency)}else{last=now;fn.apply(that,args)}}},escapeRegex:function(val){return val.replace(_re_escape_regex,'\\$1')},set:function(source){if($.isPlainObject(source)){return DataTable.util.set(source._)}else if(source===null){return function(){}}else if(typeof source==='function'){return function(data,val,meta){source(data,'set',val,meta)}}else if(typeof source==='string'&&(source.indexOf('.')!==-1||source.indexOf('[')!==-1||source.indexOf('(')!==-1)){var setData=function(data,val,src){var a=_fnSplitObjNotation(src),b;var aLast=a[a.length-1];var arrayNotation,funcNotation,o,innerSrc;for(var i=0,iLen=a.length-1;i<iLen;i++){if(a[i]==='__proto__'||a[i]==='constructor'){throw new Error('Cannot set prototype values')}
arrayNotation=a[i].match(__reArray);funcNotation=a[i].match(__reFn);if(arrayNotation){a[i]=a[i].replace(__reArray,'');data[a[i]]=[];b=a.slice();b.splice(0,i+1);innerSrc=b.join('.');if(Array.isArray(val)){for(var j=0,jLen=val.length;j<jLen;j++){o={};setData(o,val[j],innerSrc);data[a[i]].push(o)}}else{data[a[i]]=val}
return}else if(funcNotation){a[i]=a[i].replace(__reFn,'');data=data[a[i]](val)}
if(data[a[i]]===null||data[a[i]]===undefined){data[a[i]]={}}
data=data[a[i]]}
if(aLast.match(__reFn)){data=data[aLast.replace(__reFn,'')](val)}else{data[aLast.replace(__reArray,'')]=val}};return function(data,val){return setData(data,val,source)}}else{return function(data,val){data[source]=val}}},get:function(source){if($.isPlainObject(source)){var o={};$.each(source,function(key,val){if(val){o[key]=DataTable.util.get(val)}});return function(data,type,row,meta){var t=o[type]||o._;return t!==undefined?t(data,type,row,meta):data}}else if(source===null){return function(data){return data}}else if(typeof source==='function'){return function(data,type,row,meta){return source(data,type,row,meta)}}else if(typeof source==='string'&&(source.indexOf('.')!==-1||source.indexOf('[')!==-1||source.indexOf('(')!==-1)){var fetchData=function(data,type,src){var arrayNotation,funcNotation,out,innerSrc;if(src!==""){var a=_fnSplitObjNotation(src);for(var i=0,iLen=a.length;i<iLen;i++){arrayNotation=a[i].match(__reArray);funcNotation=a[i].match(__reFn);if(arrayNotation){a[i]=a[i].replace(__reArray,'');if(a[i]!==""){data=data[a[i]]}
out=[];a.splice(0,i+1);innerSrc=a.join('.');if(Array.isArray(data)){for(var j=0,jLen=data.length;j<jLen;j++){out.push(fetchData(data[j],type,innerSrc))}}
var join=arrayNotation[0].substring(1,arrayNotation[0].length-1);data=(join==="")?out:out.join(join);break}else if(funcNotation){a[i]=a[i].replace(__reFn,'');data=data[a[i]]();continue}
if(data===null||data[a[i]]===null){return null}else if(data===undefined||data[a[i]]===undefined){return undefined}
data=data[a[i]]}}
return data};return function(data,type){return fetchData(data,type,source)}}else{return function(data){return data[source]}}},stripHtml:function(mixed){var type=typeof mixed;if(type==='function'){_stripHtml=mixed;return}else if(type==='string'){return _stripHtml(mixed)}
return mixed},escapeHtml:function(mixed){var type=typeof mixed;if(type==='function'){_escapeHtml=mixed;return}else if(type==='string'||Array.isArray(mixed)){return _escapeHtml(mixed)}
return mixed},unique:_unique};function _fnHungarianMap(o){var
hungarian='a aa ai ao as b fn i m o s ',match,newKey,map={};$.each(o,function(key){match=key.match(/^([^A-Z]+?)([A-Z])/);if(match&&hungarian.indexOf(match[1]+' ')!==-1){newKey=key.replace(match[0],match[2].toLowerCase());map[newKey]=key;if(match[1]==='o'){_fnHungarianMap(o[key])}}});o._hungarianMap=map}
function _fnCamelToHungarian(src,user,force){if(!src._hungarianMap){_fnHungarianMap(src)}
var hungarianKey;$.each(user,function(key){hungarianKey=src._hungarianMap[key];if(hungarianKey!==undefined&&(force||user[hungarianKey]===undefined)){if(hungarianKey.charAt(0)==='o'){if(!user[hungarianKey]){user[hungarianKey]={}}
$.extend(!0,user[hungarianKey],user[key]);_fnCamelToHungarian(src[hungarianKey],user[hungarianKey],force)}else{user[hungarianKey]=user[key]}}})}
var _fnCompatMap=function(o,knew,old){if(o[knew]!==undefined){o[old]=o[knew]}};function _fnCompatOpts(init){_fnCompatMap(init,'ordering','bSort');_fnCompatMap(init,'orderMulti','bSortMulti');_fnCompatMap(init,'orderClasses','bSortClasses');_fnCompatMap(init,'orderCellsTop','bSortCellsTop');_fnCompatMap(init,'order','aaSorting');_fnCompatMap(init,'orderFixed','aaSortingFixed');_fnCompatMap(init,'paging','bPaginate');_fnCompatMap(init,'pagingType','sPaginationType');_fnCompatMap(init,'pageLength','iDisplayLength');_fnCompatMap(init,'searching','bFilter');if(typeof init.sScrollX==='boolean'){init.sScrollX=init.sScrollX?'100%':''}
if(typeof init.scrollX==='boolean'){init.scrollX=init.scrollX?'100%':''}
var searchCols=init.aoSearchCols;if(searchCols){for(var i=0,ien=searchCols.length;i<ien;i++){if(searchCols[i]){_fnCamelToHungarian(DataTable.models.oSearch,searchCols[i])}}}
if(init.serverSide&&!init.searchDelay){init.searchDelay=400}}
function _fnCompatCols(init){_fnCompatMap(init,'orderable','bSortable');_fnCompatMap(init,'orderData','aDataSort');_fnCompatMap(init,'orderSequence','asSorting');_fnCompatMap(init,'orderDataType','sortDataType');var dataSort=init.aDataSort;if(typeof dataSort==='number'&&!Array.isArray(dataSort)){init.aDataSort=[dataSort]}}
function _fnBrowserDetect(settings){if(!DataTable.__browser){var browser={};DataTable.__browser=browser;var n=$('<div/>').css({position:'fixed',top:0,left:-1*window.pageXOffset,height:1,width:1,overflow:'hidden'}).append($('<div/>').css({position:'absolute',top:1,left:1,width:100,overflow:'scroll'}).append($('<div/>').css({width:'100%',height:10}))).appendTo('body');var outer=n.children();var inner=outer.children();browser.barWidth=outer[0].offsetWidth-outer[0].clientWidth;browser.bScrollbarLeft=Math.round(inner.offset().left)!==1;n.remove()}
$.extend(settings.oBrowser,DataTable.__browser);settings.oScroll.iBarWidth=DataTable.__browser.barWidth}
function _fnAddColumn(oSettings){var oDefaults=DataTable.defaults.column;var iCol=oSettings.aoColumns.length;var oCol=$.extend({},DataTable.models.oColumn,oDefaults,{"aDataSort":oDefaults.aDataSort?oDefaults.aDataSort:[iCol],"mData":oDefaults.mData?oDefaults.mData:iCol,idx:iCol,searchFixed:{},colEl:$('<col>').attr('data-dt-column',iCol)});oSettings.aoColumns.push(oCol);var searchCols=oSettings.aoPreSearchCols;searchCols[iCol]=$.extend({},DataTable.models.oSearch,searchCols[iCol])}
function _fnColumnOptions(oSettings,iCol,oOptions){var oCol=oSettings.aoColumns[iCol];if(oOptions!==undefined&&oOptions!==null){_fnCompatCols(oOptions);_fnCamelToHungarian(DataTable.defaults.column,oOptions,!0);if(oOptions.mDataProp!==undefined&&!oOptions.mData){oOptions.mData=oOptions.mDataProp}
if(oOptions.sType){oCol._sManualType=oOptions.sType}
if(oOptions.className&&!oOptions.sClass){oOptions.sClass=oOptions.className}
var origClass=oCol.sClass;$.extend(oCol,oOptions);_fnMap(oCol,oOptions,"sWidth","sWidthOrig");if(origClass!==oCol.sClass){oCol.sClass=origClass+' '+oCol.sClass}
if(oOptions.iDataSort!==undefined){oCol.aDataSort=[oOptions.iDataSort]}
_fnMap(oCol,oOptions,"aDataSort")}
var mDataSrc=oCol.mData;var mData=_fnGetObjectDataFn(mDataSrc);if(oCol.mRender&&Array.isArray(oCol.mRender)){var copy=oCol.mRender.slice();var name=copy.shift();oCol.mRender=DataTable.render[name].apply(window,copy)}
oCol._render=oCol.mRender?_fnGetObjectDataFn(oCol.mRender):null;var attrTest=function(src){return typeof src==='string'&&src.indexOf('@')!==-1};oCol._bAttrSrc=$.isPlainObject(mDataSrc)&&(attrTest(mDataSrc.sort)||attrTest(mDataSrc.type)||attrTest(mDataSrc.filter));oCol._setter=null;oCol.fnGetData=function(rowData,type,meta){var innerData=mData(rowData,type,undefined,meta);return oCol._render&&type?oCol._render(innerData,type,rowData,meta):innerData};oCol.fnSetData=function(rowData,val,meta){return _fnSetObjectDataFn(mDataSrc)(rowData,val,meta)};if(typeof mDataSrc!=='number'&&!oCol._isArrayHost){oSettings._rowReadObject=!0}
if(!oSettings.oFeatures.bSort){oCol.bSortable=!1}}
function _fnAdjustColumnSizing(settings){_fnCalculateColumnWidths(settings);_fnColumnSizes(settings);var scroll=settings.oScroll;if(scroll.sY!==''||scroll.sX!==''){_fnScrollDraw(settings)}
_fnCallbackFire(settings,null,'column-sizing',[settings])}
function _fnColumnSizes(settings){var cols=settings.aoColumns;for(var i=0;i<cols.length;i++){var width=_fnColumnsSumWidth(settings,[i],!1,!1);cols[i].colEl.css('width',width)}}
function _fnVisibleToColumnIndex(oSettings,iMatch){var aiVis=_fnGetColumns(oSettings,'bVisible');return typeof aiVis[iMatch]==='number'?aiVis[iMatch]:null}
function _fnColumnIndexToVisible(oSettings,iMatch){var aiVis=_fnGetColumns(oSettings,'bVisible');var iPos=aiVis.indexOf(iMatch);return iPos!==-1?iPos:null}
function _fnVisbleColumns(settings){var layout=settings.aoHeader;var columns=settings.aoColumns;var vis=0;if(layout.length){for(var i=0,ien=layout[0].length;i<ien;i++){if(columns[i].bVisible&&$(layout[0][i].cell).css('display')!=='none'){vis++}}}
return vis}
function _fnGetColumns(oSettings,sParam){var a=[];oSettings.aoColumns.map(function(val,i){if(val[sParam]){a.push(i)}});return a}
function _typeResult(typeDetect,res){return res===!0?typeDetect.name:res}
function _fnColumnTypes(settings){var columns=settings.aoColumns;var data=settings.aoData;var types=DataTable.ext.type.detect;var i,ien,j,jen,k,ken;var col,detectedType,cache;if(_fnDataSource(settings)==='ssp'){return}
for(i=0,ien=columns.length;i<ien;i++){col=columns[i];cache=[];if(!col.sType&&col._sManualType){col.sType=col._sManualType}else if(!col.sType){for(j=0,jen=types.length;j<jen;j++){var typeDetect=types[j];var oneOf=typeDetect.oneOf;var allOf=typeDetect.allOf||typeDetect;var init=typeDetect.init;var one=!1;detectedType=null;if(init){detectedType=_typeResult(typeDetect,init(settings,col,i));if(detectedType){col.sType=detectedType;break}}
for(k=0,ken=data.length;k<ken;k++){if(!data[k]){continue}
if(cache[k]===undefined){cache[k]=_fnGetCellData(settings,k,i,'type')}
if(oneOf&&!one){one=_typeResult(typeDetect,oneOf(cache[k],settings))}
detectedType=_typeResult(typeDetect,allOf(cache[k],settings));if(!detectedType&&j!==types.length-3){break}
if(detectedType==='html'&&!_empty(cache[k])){break}}
if((oneOf&&one&&detectedType)||(!oneOf&&detectedType)){col.sType=detectedType;break}}
if(!col.sType){col.sType='string'}}
var autoClass=_ext.type.className[col.sType];if(autoClass){_columnAutoClass(settings.aoHeader,i,autoClass);_columnAutoClass(settings.aoFooter,i,autoClass)}
var renderer=_ext.type.render[col.sType];if(renderer&&!col._render){col._render=DataTable.util.get(renderer);_columnAutoRender(settings,i)}}}
function _columnAutoRender(settings,colIdx){var data=settings.aoData;for(var i=0;i<data.length;i++){if(data[i].nTr){var display=_fnGetCellData(settings,i,colIdx,'display');data[i].displayData[colIdx]=display;_fnWriteCell(data[i].anCells[colIdx],display)}}}
function _columnAutoClass(container,colIdx,className){container.forEach(function(row){if(row[colIdx]&&row[colIdx].unique){_addClass(row[colIdx].cell,className)}})}
function _fnApplyColumnDefs(oSettings,aoColDefs,aoCols,headerLayout,fn){var i,iLen,j,jLen,k,kLen,def;var columns=oSettings.aoColumns;if(aoCols){for(i=0,iLen=aoCols.length;i<iLen;i++){if(aoCols[i]&&aoCols[i].name){columns[i].sName=aoCols[i].name}}}
if(aoColDefs){for(i=aoColDefs.length-1;i>=0;i--){def=aoColDefs[i];var aTargets=def.target!==undefined?def.target:def.targets!==undefined?def.targets:def.aTargets;if(!Array.isArray(aTargets)){aTargets=[aTargets]}
for(j=0,jLen=aTargets.length;j<jLen;j++){var target=aTargets[j];if(typeof target==='number'&&target>=0){while(columns.length<=target){_fnAddColumn(oSettings)}
fn(target,def)}else if(typeof target==='number'&&target<0){fn(columns.length+target,def)}else if(typeof target==='string'){for(k=0,kLen=columns.length;k<kLen;k++){if(target==='_all'){fn(k,def)}else if(target.indexOf(':name')!==-1){if(columns[k].sName===target.replace(':name','')){fn(k,def)}}else{headerLayout.forEach(function(row){if(row[k]){var cell=$(row[k].cell);if(target.match(/^[a-z][\w-]*$/i)){target='.'+target}
if(cell.is(target)){fn(k,def)}}})}}}}}}
if(aoCols){for(i=0,iLen=aoCols.length;i<iLen;i++){fn(i,aoCols[i])}}}
function _fnColumnsSumWidth(settings,targets,original,incVisible){if(!Array.isArray(targets)){targets=_fnColumnsFromHeader(targets)}
var sum=0;var unit;var columns=settings.aoColumns;for(var i=0,ien=targets.length;i<ien;i++){var column=columns[targets[i]];var definedWidth=original?column.sWidthOrig:column.sWidth;if(!incVisible&&column.bVisible===!1){continue}
if(definedWidth===null||definedWidth===undefined){return null}else if(typeof definedWidth==='number'){unit='px';sum+=definedWidth}else{var matched=definedWidth.match(/([\d\.]+)([^\d]*)/);if(matched){sum+=matched[1]*1;unit=matched.length===3?matched[2]:'px'}}}
return sum+unit}
function _fnColumnsFromHeader(cell){var attr=$(cell).closest('[data-dt-column]').attr('data-dt-column');if(!attr){return[]}
return attr.split(',').map(function(val){return val*1})}
function _fnAddData(settings,dataIn,tr,tds){var rowIdx=settings.aoData.length;var rowModel=$.extend(!0,{},DataTable.models.oRow,{src:tr?'dom':'data',idx:rowIdx});rowModel._aData=dataIn;settings.aoData.push(rowModel);var columns=settings.aoColumns;for(var i=0,iLen=columns.length;i<iLen;i++){columns[i].sType=null}
settings.aiDisplayMaster.push(rowIdx);var id=settings.rowIdFn(dataIn);if(id!==undefined){settings.aIds[id]=rowModel}
if(tr||!settings.oFeatures.bDeferRender){_fnCreateTr(settings,rowIdx,tr,tds)}
return rowIdx}
function _fnAddTr(settings,trs){var row;if(!(trs instanceof $)){trs=$(trs)}
return trs.map(function(i,el){row=_fnGetRowElements(settings,el);return _fnAddData(settings,row.data,el,row.cells)})}
function _fnGetCellData(settings,rowIdx,colIdx,type){if(type==='search'){type='filter'}else if(type==='order'){type='sort'}
var row=settings.aoData[rowIdx];if(!row){return undefined}
var draw=settings.iDraw;var col=settings.aoColumns[colIdx];var rowData=row._aData;var defaultContent=col.sDefaultContent;var cellData=col.fnGetData(rowData,type,{settings:settings,row:rowIdx,col:colIdx});if(type!=='display'&&cellData&&typeof cellData==='object'&&cellData.nodeName){cellData=cellData.innerHTML}
if(cellData===undefined){if(settings.iDrawError!=draw&&defaultContent===null){_fnLog(settings,0,"Requested unknown parameter "+(typeof col.mData=='function'?'{function}':"'"+col.mData+"'")+" for row "+rowIdx+", column "+colIdx,4);settings.iDrawError=draw}
return defaultContent}
if((cellData===rowData||cellData===null)&&defaultContent!==null&&type!==undefined){cellData=defaultContent}else if(typeof cellData==='function'){return cellData.call(rowData)}
if(cellData===null&&type==='display'){return''}
if(type==='filter'){var fomatters=DataTable.ext.type.search;if(fomatters[col.sType]){cellData=fomatters[col.sType](cellData)}}
return cellData}
function _fnSetCellData(settings,rowIdx,colIdx,val){var col=settings.aoColumns[colIdx];var rowData=settings.aoData[rowIdx]._aData;col.fnSetData(rowData,val,{settings:settings,row:rowIdx,col:colIdx})}
function _fnWriteCell(td,val){if(val&&typeof val==='object'&&val.nodeName){$(td).empty().append(val)}else{td.innerHTML=val}}
var __reArray=/\[.*?\]$/;var __reFn=/\(\)$/;function _fnSplitObjNotation(str){var parts=str.match(/(\\.|[^.])+/g)||[''];return parts.map(function(s){return s.replace(/\\\./g,'.')})}
var _fnGetObjectDataFn=DataTable.util.get;var _fnSetObjectDataFn=DataTable.util.set;function _fnGetDataMaster(settings){return _pluck(settings.aoData,'_aData')}
function _fnClearTable(settings){settings.aoData.length=0;settings.aiDisplayMaster.length=0;settings.aiDisplay.length=0;settings.aIds={}}
function _fnInvalidate(settings,rowIdx,src,colIdx){var row=settings.aoData[rowIdx];var i,ien;row._aSortData=null;row._aFilterData=null;row.displayData=null;if(src==='dom'||((!src||src==='auto')&&row.src==='dom')){row._aData=_fnGetRowElements(settings,row,colIdx,colIdx===undefined?undefined:row._aData).data}else{var cells=row.anCells;var display=_fnGetRowDisplay(settings,rowIdx);if(cells){if(colIdx!==undefined){_fnWriteCell(cells[colIdx],display[colIdx])}else{for(i=0,ien=cells.length;i<ien;i++){_fnWriteCell(cells[i],display[i])}}}}
var cols=settings.aoColumns;if(colIdx!==undefined){cols[colIdx].sType=null;cols[colIdx].maxLenString=null}else{for(i=0,ien=cols.length;i<ien;i++){cols[i].sType=null;cols[i].maxLenString=null}
_fnRowAttributes(settings,row)}}
function _fnGetRowElements(settings,row,colIdx,d){var
tds=[],td=row.firstChild,name,col,i=0,contents,columns=settings.aoColumns,objectRead=settings._rowReadObject;d=d!==undefined?d:objectRead?{}:[];var attr=function(str,td){if(typeof str==='string'){var idx=str.indexOf('@');if(idx!==-1){var attr=str.substring(idx+1);var setter=_fnSetObjectDataFn(str);setter(d,td.getAttribute(attr))}}};var cellProcess=function(cell){if(colIdx===undefined||colIdx===i){col=columns[i];contents=(cell.innerHTML).trim();if(col&&col._bAttrSrc){var setter=_fnSetObjectDataFn(col.mData._);setter(d,contents);attr(col.mData.sort,cell);attr(col.mData.type,cell);attr(col.mData.filter,cell)}else{if(objectRead){if(!col._setter){col._setter=_fnSetObjectDataFn(col.mData)}
col._setter(d,contents)}else{d[i]=contents}}}
i++};if(td){while(td){name=td.nodeName.toUpperCase();if(name=="TD"||name=="TH"){cellProcess(td);tds.push(td)}
td=td.nextSibling}}else{tds=row.anCells;for(var j=0,jen=tds.length;j<jen;j++){cellProcess(tds[j])}}
var rowNode=row.firstChild?row:row.nTr;if(rowNode){var id=rowNode.getAttribute('id');if(id){_fnSetObjectDataFn(settings.rowId)(d,id)}}
return{data:d,cells:tds}}
function _fnGetRowDisplay(settings,rowIdx){let rowModal=settings.aoData[rowIdx];let columns=settings.aoColumns;if(!rowModal.displayData){rowModal.displayData=[];for(var colIdx=0,len=columns.length;colIdx<len;colIdx++){rowModal.displayData.push(_fnGetCellData(settings,rowIdx,colIdx,'display'))}}
return rowModal.displayData}
function _fnCreateTr(oSettings,iRow,nTrIn,anTds){var
row=oSettings.aoData[iRow],rowData=row._aData,cells=[],nTr,nTd,oCol,i,iLen,create,trClass=oSettings.oClasses.tbody.row;if(row.nTr===null){nTr=nTrIn||document.createElement('tr');row.nTr=nTr;row.anCells=cells;_addClass(nTr,trClass);nTr._DT_RowIndex=iRow;_fnRowAttributes(oSettings,row);for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oCol=oSettings.aoColumns[i];create=nTrIn&&anTds[i]?!1:!0;nTd=create?document.createElement(oCol.sCellType):anTds[i];if(!nTd){_fnLog(oSettings,0,'Incorrect column count',18)}
nTd._DT_CellIndex={row:iRow,column:i};cells.push(nTd);var display=_fnGetRowDisplay(oSettings,iRow);if(create||((oCol.mRender||oCol.mData!==i)&&(!$.isPlainObject(oCol.mData)||oCol.mData._!==i+'.display'))){_fnWriteCell(nTd,display[i])}
if(oCol.bVisible&&create){nTr.appendChild(nTd)}else if(!oCol.bVisible&&!create){nTd.parentNode.removeChild(nTd)}
if(oCol.fnCreatedCell){oCol.fnCreatedCell.call(oSettings.oInstance,nTd,_fnGetCellData(oSettings,iRow,i),rowData,iRow,i)}}
_fnCallbackFire(oSettings,'aoRowCreatedCallback','row-created',[nTr,rowData,iRow,cells])}else{_addClass(row.nTr,trClass)}}
function _fnRowAttributes(settings,row){var tr=row.nTr;var data=row._aData;if(tr){var id=settings.rowIdFn(data);if(id){tr.id=id}
if(data.DT_RowClass){var a=data.DT_RowClass.split(' ');row.__rowc=row.__rowc?_unique(row.__rowc.concat(a)):a;$(tr).removeClass(row.__rowc.join(' ')).addClass(data.DT_RowClass)}
if(data.DT_RowAttr){$(tr).attr(data.DT_RowAttr)}
if(data.DT_RowData){$(tr).data(data.DT_RowData)}}}
function _fnBuildHead(settings,side){var classes=settings.oClasses;var columns=settings.aoColumns;var i,ien,row;var target=side==='header'?settings.nTHead:settings.nTFoot;var titleProp=side==='header'?'sTitle':side;if(!target){return}
if(side==='header'||_pluck(settings.aoColumns,titleProp).join('')){row=$('tr',target);if(!row.length){row=$('<tr/>').appendTo(target)}
if(row.length===1){var cells=$('td, th',row);for(i=cells.length,ien=columns.length;i<ien;i++){$('<th/>').html(columns[i][titleProp]||'').appendTo(row)}}}
var detected=_fnDetectHeader(settings,target,!0);if(side==='header'){settings.aoHeader=detected}else{settings.aoFooter=detected}
$(target).children('tr').attr('role','row');$(target).children('tr').children('th, td').each(function(){_fnRenderer(settings,side)(settings,$(this),classes)})}
function _fnHeaderLayout(settings,source,incColumns){var row,column,cell;var local=[];var structure=[];var columns=settings.aoColumns;var columnCount=columns.length;var rowspan,colspan;if(!source){return}
if(!incColumns){incColumns=_range(columnCount).filter(function(idx){return columns[idx].bVisible})}
for(row=0;row<source.length;row++){local[row]=source[row].slice().filter(function(cell,i){return incColumns.includes(i)});structure.push([])}
for(row=0;row<local.length;row++){for(column=0;column<local[row].length;column++){rowspan=1;colspan=1;if(structure[row][column]===undefined){cell=local[row][column].cell;while(local[row+rowspan]!==undefined&&local[row][column].cell==local[row+rowspan][column].cell){structure[row+rowspan][column]=null;rowspan++}
while(local[row][column+colspan]!==undefined&&local[row][column].cell==local[row][column+colspan].cell){for(var k=0;k<rowspan;k++){structure[row+k][column+colspan]=null}
colspan++}
var titleSpan=$('span.dt-column-title',cell);structure[row][column]={cell:cell,colspan:colspan,rowspan:rowspan,title:titleSpan.length?titleSpan.html():$(cell).html()}}}}
return structure}
function _fnDrawHead(settings,source){var layout=_fnHeaderLayout(settings,source);var tr,n;for(var row=0;row<source.length;row++){tr=source[row].row;if(tr){while((n=tr.firstChild)){tr.removeChild(n)}}
for(var column=0;column<layout[row].length;column++){var point=layout[row][column];if(point){$(point.cell).appendTo(tr).attr('rowspan',point.rowspan).attr('colspan',point.colspan)}}}}
function _fnDraw(oSettings,ajaxComplete){_fnStart(oSettings);var aPreDraw=_fnCallbackFire(oSettings,'aoPreDrawCallback','preDraw',[oSettings]);if(aPreDraw.indexOf(!1)!==-1){_fnProcessingDisplay(oSettings,!1);return}
var anRows=[];var iRowCount=0;var bServerSide=_fnDataSource(oSettings)=='ssp';var aiDisplay=oSettings.aiDisplay;var iDisplayStart=oSettings._iDisplayStart;var iDisplayEnd=oSettings.fnDisplayEnd();var columns=oSettings.aoColumns;var body=$(oSettings.nTBody);oSettings.bDrawing=!0;if(oSettings.deferLoading){oSettings.deferLoading=!1;oSettings.iDraw++;_fnProcessingDisplay(oSettings,!1)}else if(!bServerSide){oSettings.iDraw++}else if(!oSettings.bDestroying&&!ajaxComplete){if(oSettings.iDraw===0){body.empty().append(_emptyRow(oSettings))}
_fnAjaxUpdate(oSettings);return}
if(aiDisplay.length!==0){var iStart=bServerSide?0:iDisplayStart;var iEnd=bServerSide?oSettings.aoData.length:iDisplayEnd;for(var j=iStart;j<iEnd;j++){var iDataIndex=aiDisplay[j];var aoData=oSettings.aoData[iDataIndex];if(aoData.nTr===null){_fnCreateTr(oSettings,iDataIndex)}
var nRow=aoData.nTr;for(var i=0;i<columns.length;i++){var col=columns[i];var td=aoData.anCells[i];_addClass(td,_ext.type.className[col.sType]);_addClass(td,col.sClass);_addClass(td,oSettings.oClasses.tbody.cell)}
_fnCallbackFire(oSettings,'aoRowCallback',null,[nRow,aoData._aData,iRowCount,j,iDataIndex]);anRows.push(nRow);iRowCount++}}else{anRows[0]=_emptyRow(oSettings)}
_fnCallbackFire(oSettings,'aoHeaderCallback','header',[$(oSettings.nTHead).children('tr')[0],_fnGetDataMaster(oSettings),iDisplayStart,iDisplayEnd,aiDisplay]);_fnCallbackFire(oSettings,'aoFooterCallback','footer',[$(oSettings.nTFoot).children('tr')[0],_fnGetDataMaster(oSettings),iDisplayStart,iDisplayEnd,aiDisplay]);if(body[0].replaceChildren){body[0].replaceChildren.apply(body[0],anRows)}else{body.children().detach();body.append($(anRows))}
$(oSettings.nTableWrapper).toggleClass('dt-empty-footer',$('tr',oSettings.nTFoot).length===0);_fnCallbackFire(oSettings,'aoDrawCallback','draw',[oSettings],!0);oSettings.bSorted=!1;oSettings.bFiltered=!1;oSettings.bDrawing=!1}
function _fnReDraw(settings,holdPosition,recompute){var
features=settings.oFeatures,sort=features.bSort,filter=features.bFilter;if(recompute===undefined||recompute===!0){_fnColumnTypes(settings);if(sort){_fnSort(settings)}
if(filter){_fnFilterComplete(settings,settings.oPreviousSearch)}else{settings.aiDisplay=settings.aiDisplayMaster.slice()}}
if(holdPosition!==!0){settings._iDisplayStart=0}
settings._drawHold=holdPosition;_fnDraw(settings);settings._drawHold=!1}
function _emptyRow(settings){var oLang=settings.oLanguage;var zero=oLang.sZeroRecords;var dataSrc=_fnDataSource(settings);if((settings.iDraw<1&&dataSrc==='ssp')||(settings.iDraw<=1&&dataSrc==='ajax')){zero=oLang.sLoadingRecords}else if(oLang.sEmptyTable&&settings.fnRecordsTotal()===0){zero=oLang.sEmptyTable}
return $('<tr/>').append($('<td />',{'colSpan':_fnVisbleColumns(settings),'class':settings.oClasses.empty.row}).html(zero))[0]}
function _layoutItems(row,align,items){if(Array.isArray(items)){for(var i=0;i<items.length;i++){_layoutItems(row,align,items[i])}
return}
var rowCell=row[align];if($.isPlainObject(items)){if(items.features){if(items.rowId){row.id=items.rowId}
if(items.rowClass){row.className=items.rowClass}
rowCell.id=items.id;rowCell.className=items.className;_layoutItems(row,align,items.features)}else{Object.keys(items).map(function(key){rowCell.contents.push({feature:key,opts:items[key]})})}}else{rowCell.contents.push(items)}}
function _layoutGetRow(rows,rowNum,align){var row;for(var i=0;i<rows.length;i++){row=rows[i];if(row.rowNum===rowNum){if((align==='full'&&row.full)||((align==='start'||align==='end')&&(row.start||row.end))){if(!row[align]){row[align]={contents:[]}}
return row}}}
row={rowNum:rowNum};row[align]={contents:[]};rows.push(row);return row}
function _layoutArray(settings,layout,side){var rows=[];$.each(layout,function(pos,items){if(items===null){return}
var parts=pos.match(/^([a-z]+)([0-9]*)([A-Za-z]*)$/);var rowNum=parts[2]?parts[2]*1:0;var align=parts[3]?parts[3].toLowerCase():'full';if(parts[1]!==side){return}
var row=_layoutGetRow(rows,rowNum,align);_layoutItems(row,align,items)});rows.sort(function(a,b){var order1=a.rowNum;var order2=b.rowNum;if(order1===order2){var ret=a.full&&!b.full?-1:1;return side==='bottom'?ret*-1:ret}
return order2-order1});if(side==='bottom'){rows.reverse()}
for(var row=0;row<rows.length;row++){delete rows[row].rowNum;_layoutResolve(settings,rows[row])}
return rows}
function _layoutResolve(settings,row){var getFeature=function(feature,opts){if(!_ext.features[feature]){_fnLog(settings,0,'Unknown feature: '+feature)}
return _ext.features[feature].apply(this,[settings,opts])};var resolve=function(item){if(!row[item]){return}
var line=row[item].contents;for(var i=0,ien=line.length;i<ien;i++){if(!line[i]){continue}else if(typeof line[i]==='string'){line[i]=getFeature(line[i],null)}else if($.isPlainObject(line[i])){line[i]=getFeature(line[i].feature,line[i].opts)}else if(typeof line[i].node==='function'){line[i]=line[i].node(settings)}else if(typeof line[i]==='function'){var inst=line[i](settings);line[i]=typeof inst.node==='function'?inst.node():inst}}};resolve('start');resolve('end');resolve('full')}
function _fnAddOptionsHtml(settings){var classes=settings.oClasses;var table=$(settings.nTable);var insert=$('<div/>').attr({id:settings.sTableId+'_wrapper','class':classes.container}).insertBefore(table);settings.nTableWrapper=insert[0];if(settings.sDom){_fnLayoutDom(settings,settings.sDom,insert)}else{var top=_layoutArray(settings,settings.layout,'top');var bottom=_layoutArray(settings,settings.layout,'bottom');var renderer=_fnRenderer(settings,'layout');top.forEach(function(item){renderer(settings,insert,item)});renderer(settings,insert,{full:{table:!0,contents:[_fnFeatureHtmlTable(settings)]}});bottom.forEach(function(item){renderer(settings,insert,item)})}
_processingHtml(settings)}
function _fnLayoutDom(settings,dom,insert){var parts=dom.match(/(".*?")|('.*?')|./g);var featureNode,option,newNode,next,attr;for(var i=0;i<parts.length;i++){featureNode=null;option=parts[i];if(option=='<'){newNode=$('<div/>');next=parts[i+1];if(next[0]=="'"||next[0]=='"'){attr=next.replace(/['"]/g,'');var id='',className;if(attr.indexOf('.')!=-1){var split=attr.split('.');id=split[0];className=split[1]}else if(attr[0]=="#"){id=attr}else{className=attr}
newNode.attr('id',id.substring(1)).addClass(className);i++}
insert.append(newNode);insert=newNode}else if(option=='>'){insert=insert.parent()}else if(option=='t'){featureNode=_fnFeatureHtmlTable(settings)}else{DataTable.ext.feature.forEach(function(feature){if(option==feature.cFeature){featureNode=feature.fnInit(settings)}})}
if(featureNode){insert.append(featureNode)}}}
function _fnDetectHeader(settings,thead,write){var columns=settings.aoColumns;var rows=$(thead).children('tr');var row,cell;var i,k,l,iLen,shifted,column,colspan,rowspan;var isHeader=thead&&thead.nodeName.toLowerCase()==='thead';var layout=[];var unique;var shift=function(a,i,j){var k=a[i];while(k[j]){j++}
return j};for(i=0,iLen=rows.length;i<iLen;i++){layout.push([])}
for(i=0,iLen=rows.length;i<iLen;i++){row=rows[i];column=0;cell=row.firstChild;while(cell){if(cell.nodeName.toUpperCase()=='TD'||cell.nodeName.toUpperCase()=='TH'){var cols=[];colspan=cell.getAttribute('colspan')*1;rowspan=cell.getAttribute('rowspan')*1;colspan=(!colspan||colspan===0||colspan===1)?1:colspan;rowspan=(!rowspan||rowspan===0||rowspan===1)?1:rowspan;shifted=shift(layout,i,column);unique=colspan===1?!0:!1;if(write){if(unique){_fnColumnOptions(settings,shifted,$(cell).data());var columnDef=columns[shifted];var width=cell.getAttribute('width')||null;var t=cell.style.width.match(/width:\s*(\d+[pxem%]+)/);if(t){width=t[1]}
columnDef.sWidthOrig=columnDef.sWidth||width;if(isHeader){if(columnDef.sTitle!==null&&!columnDef.autoTitle){cell.innerHTML=columnDef.sTitle}
if(!columnDef.sTitle&&unique){columnDef.sTitle=_stripHtml(cell.innerHTML);columnDef.autoTitle=!0}}else{if(columnDef.footer){cell.innerHTML=columnDef.footer}}
if(!columnDef.ariaTitle){columnDef.ariaTitle=$(cell).attr("aria-label")||columnDef.sTitle}
if(columnDef.className){$(cell).addClass(columnDef.className)}}
if($('span.dt-column-title',cell).length===0){$('<span>').addClass('dt-column-title').append(cell.childNodes).appendTo(cell)}
if(isHeader&&$('span.dt-column-order',cell).length===0){$('<span>').addClass('dt-column-order').appendTo(cell)}}
for(l=0;l<colspan;l++){for(k=0;k<rowspan;k++){layout[i+k][shifted+l]={cell:cell,unique:unique};layout[i+k].row=row}
cols.push(shifted+l)}
cell.setAttribute('data-dt-column',_unique(cols).join(','))}
cell=cell.nextSibling}}
return layout}
function _fnStart(oSettings){var bServerSide=_fnDataSource(oSettings)=='ssp';var iInitDisplayStart=oSettings.iInitDisplayStart;if(iInitDisplayStart!==undefined&&iInitDisplayStart!==-1){oSettings._iDisplayStart=bServerSide?iInitDisplayStart:iInitDisplayStart>=oSettings.fnRecordsDisplay()?0:iInitDisplayStart;oSettings.iInitDisplayStart=-1}}
function _fnBuildAjax(oSettings,data,fn){var ajaxData;var ajax=oSettings.ajax;var instance=oSettings.oInstance;var callback=function(json){var status=oSettings.jqXHR?oSettings.jqXHR.status:null;if(json===null||(typeof status==='number'&&status==204)){json={};_fnAjaxDataSrc(oSettings,json,[])}
var error=json.error||json.sError;if(error){_fnLog(oSettings,0,error)}
if(json.d&&typeof json.d==='string'){try{json=JSON.parse(json.d)}catch(e){}}
oSettings.json=json;_fnCallbackFire(oSettings,null,'xhr',[oSettings,json,oSettings.jqXHR],!0);fn(json)};if($.isPlainObject(ajax)&&ajax.data){ajaxData=ajax.data;var newData=typeof ajaxData==='function'?ajaxData(data,oSettings):ajaxData;data=typeof ajaxData==='function'&&newData?newData:$.extend(!0,data,newData);delete ajax.data}
var baseAjax={"url":typeof ajax==='string'?ajax:'',"data":data,"success":callback,"dataType":"json","cache":!1,"type":oSettings.sServerMethod,"error":function(xhr,error){var ret=_fnCallbackFire(oSettings,null,'xhr',[oSettings,null,oSettings.jqXHR],!0);if(ret.indexOf(!0)===-1){if(error=="parsererror"){_fnLog(oSettings,0,'Invalid JSON response',1)}else if(xhr.readyState===4){_fnLog(oSettings,0,'Ajax error',7)}}
_fnProcessingDisplay(oSettings,!1)}};if($.isPlainObject(ajax)){$.extend(baseAjax,ajax)}
oSettings.oAjaxData=data;_fnCallbackFire(oSettings,null,'preXhr',[oSettings,data,baseAjax],!0);if(typeof ajax==='function'){oSettings.jqXHR=ajax.call(instance,data,callback,oSettings)}else if(ajax.url===''){var empty={};DataTable.util.set(ajax.dataSrc)(empty,[]);callback(empty)}else{oSettings.jqXHR=$.ajax(baseAjax)}
if(ajaxData){ajax.data=ajaxData}}
function _fnAjaxUpdate(settings){settings.iDraw++;_fnProcessingDisplay(settings,!0);_fnBuildAjax(settings,_fnAjaxParameters(settings),function(json){_fnAjaxUpdateDraw(settings,json)})}
function _fnAjaxParameters(settings){var
columns=settings.aoColumns,features=settings.oFeatures,preSearch=settings.oPreviousSearch,preColSearch=settings.aoPreSearchCols,colData=function(idx,prop){return typeof columns[idx][prop]==='function'?'function':columns[idx][prop]};return{draw:settings.iDraw,columns:columns.map(function(column,i){return{data:colData(i,'mData'),name:column.sName,searchable:column.bSearchable,orderable:column.bSortable,search:{value:preColSearch[i].search,regex:preColSearch[i].regex,fixed:Object.keys(column.searchFixed).map(function(name){return{name:name,term:column.searchFixed[name].toString()}})}}}),order:_fnSortFlatten(settings).map(function(val){return{column:val.col,dir:val.dir,name:colData(val.col,'sName')}}),start:settings._iDisplayStart,length:features.bPaginate?settings._iDisplayLength:-1,search:{value:preSearch.search,regex:preSearch.regex,fixed:Object.keys(settings.searchFixed).map(function(name){return{name:name,term:settings.searchFixed[name].toString()}})}}}
function _fnAjaxUpdateDraw(settings,json){var data=_fnAjaxDataSrc(settings,json);var draw=_fnAjaxDataSrcParam(settings,'draw',json);var recordsTotal=_fnAjaxDataSrcParam(settings,'recordsTotal',json);var recordsFiltered=_fnAjaxDataSrcParam(settings,'recordsFiltered',json);if(draw!==undefined){if(draw*1<settings.iDraw){return}
settings.iDraw=draw*1}
if(!data){data=[]}
_fnClearTable(settings);settings._iRecordsTotal=parseInt(recordsTotal,10);settings._iRecordsDisplay=parseInt(recordsFiltered,10);for(var i=0,ien=data.length;i<ien;i++){_fnAddData(settings,data[i])}
settings.aiDisplay=settings.aiDisplayMaster.slice();_fnDraw(settings,!0);_fnInitComplete(settings);_fnProcessingDisplay(settings,!1)}
function _fnAjaxDataSrc(settings,json,write){var dataProp='data';if($.isPlainObject(settings.ajax)&&settings.ajax.dataSrc!==undefined){var dataSrc=settings.ajax.dataSrc;if(typeof dataSrc==='string'||typeof dataSrc==='function'){dataProp=dataSrc}else if(dataSrc.data!==undefined){dataProp=dataSrc.data}}
if(!write){if(dataProp==='data'){return json.aaData||json[dataProp]}
return dataProp!==""?_fnGetObjectDataFn(dataProp)(json):json}
_fnSetObjectDataFn(dataProp)(json,write)}
function _fnAjaxDataSrcParam(settings,param,json){var dataSrc=$.isPlainObject(settings.ajax)?settings.ajax.dataSrc:null;if(dataSrc&&dataSrc[param]){return _fnGetObjectDataFn(dataSrc[param])(json)}
var old='';if(param==='draw'){old='sEcho'}else if(param==='recordsTotal'){old='iTotalRecords'}else if(param==='recordsFiltered'){old='iTotalDisplayRecords'}
return json[old]!==undefined?json[old]:json[param]}
function _fnFilterComplete(settings,input){var columnsSearch=settings.aoPreSearchCols;if(_fnDataSource(settings)!='ssp'){_fnFilterData(settings);settings.aiDisplay=settings.aiDisplayMaster.slice();_fnFilter(settings.aiDisplay,settings,input.search,input);$.each(settings.searchFixed,function(name,term){_fnFilter(settings.aiDisplay,settings,term,{})});for(var i=0;i<columnsSearch.length;i++){var col=columnsSearch[i];_fnFilter(settings.aiDisplay,settings,col.search,col,i);$.each(settings.aoColumns[i].searchFixed,function(name,term){_fnFilter(settings.aiDisplay,settings,term,{},i)})}
_fnFilterCustom(settings)}
settings.bFiltered=!0;_fnCallbackFire(settings,null,'search',[settings])}
function _fnFilterCustom(settings){var filters=DataTable.ext.search;var displayRows=settings.aiDisplay;var row,rowIdx;for(var i=0,ien=filters.length;i<ien;i++){var rows=[];for(var j=0,jen=displayRows.length;j<jen;j++){rowIdx=displayRows[j];row=settings.aoData[rowIdx];if(filters[i](settings,row._aFilterData,rowIdx,row._aData,j)){rows.push(rowIdx)}}
displayRows.length=0;displayRows.push.apply(displayRows,rows)}}
function _fnFilter(searchRows,settings,input,options,column){if(input===''){return}
var i=0;var matched=[];var searchFunc=typeof input==='function'?input:null;var rpSearch=input instanceof RegExp?input:searchFunc?null:_fnFilterCreateSearch(input,options);for(i=0;i<searchRows.length;i++){var row=settings.aoData[searchRows[i]];var data=column===undefined?row._sFilterRow:row._aFilterData[column];if((searchFunc&&searchFunc(data,row._aData,searchRows[i],column))||(rpSearch&&rpSearch.test(data))){matched.push(searchRows[i])}}
searchRows.length=matched.length;for(i=0;i<matched.length;i++){searchRows[i]=matched[i]}}
function _fnFilterCreateSearch(search,inOpts){var not=[];var options=$.extend({},{boundary:!1,caseInsensitive:!0,exact:!1,regex:!1,smart:!0},inOpts);if(typeof search!=='string'){search=search.toString()}
search=_normalize(search);if(options.exact){return new RegExp('^'+_fnEscapeRegex(search)+'$',options.caseInsensitive?'i':'')}
search=options.regex?search:_fnEscapeRegex(search);if(options.smart){var parts=search.match(/!?["\u201C][^"\u201D]+["\u201D]|[^ ]+/g)||[''];var a=parts.map(function(word){var negative=!1;var m;if(word.charAt(0)==='!'){negative=!0;word=word.substring(1)}
if(word.charAt(0)==='"'){m=word.match(/^"(.*)"$/);word=m?m[1]:word}else if(word.charAt(0)==='\u201C'){m=word.match(/^\u201C(.*)\u201D$/);word=m?m[1]:word}
if(negative){if(word.length>1){not.push('(?!'+word+')')}
word=''}
return word.replace(/"/g,'')});var match=not.length?not.join(''):'';var boundary=options.boundary?'\\b':'';search='^(?=.*?'+boundary+a.join(')(?=.*?'+boundary)+')('+match+'.)*$'}
return new RegExp(search,options.caseInsensitive?'i':'')}
var _fnEscapeRegex=DataTable.util.escapeRegex;var __filter_div=$('<div>')[0];var __filter_div_textContent=__filter_div.textContent!==undefined;function _fnFilterData(settings){var columns=settings.aoColumns;var data=settings.aoData;var column;var j,jen,filterData,cellData,row;var wasInvalidated=!1;for(var rowIdx=0;rowIdx<data.length;rowIdx++){if(!data[rowIdx]){continue}
row=data[rowIdx];if(!row._aFilterData){filterData=[];for(j=0,jen=columns.length;j<jen;j++){column=columns[j];if(column.bSearchable){cellData=_fnGetCellData(settings,rowIdx,j,'filter');if(cellData===null){cellData=''}
if(typeof cellData!=='string'&&cellData.toString){cellData=cellData.toString()}}else{cellData=''}
if(cellData.indexOf&&cellData.indexOf('&')!==-1){__filter_div.innerHTML=cellData;cellData=__filter_div_textContent?__filter_div.textContent:__filter_div.innerText}
if(cellData.replace){cellData=cellData.replace(/[\r\n\u2028]/g,'')}
filterData.push(cellData)}
row._aFilterData=filterData;row._sFilterRow=filterData.join('  ');wasInvalidated=!0}}
return wasInvalidated}
function _fnInitialise(settings){var i;var init=settings.oInit;var deferLoading=settings.deferLoading;var dataSrc=_fnDataSource(settings);if(!settings.bInitialised){setTimeout(function(){_fnInitialise(settings)},200);return}
_fnBuildHead(settings,'header');_fnBuildHead(settings,'footer');_fnLoadState(settings,init,function(){_fnDrawHead(settings,settings.aoHeader);_fnDrawHead(settings,settings.aoFooter);var iAjaxStart=settings.iInitDisplayStart
if(init.aaData){for(i=0;i<init.aaData.length;i++){_fnAddData(settings,init.aaData[i])}}else if(deferLoading||dataSrc=='dom'){_fnAddTr(settings,$(settings.nTBody).children('tr'))}
settings.aiDisplay=settings.aiDisplayMaster.slice();_fnAddOptionsHtml(settings);_fnSortInit(settings);_colGroup(settings);_fnProcessingDisplay(settings,!0);_fnCallbackFire(settings,null,'preInit',[settings],!0);_fnReDraw(settings);if(dataSrc!='ssp'||deferLoading){if(dataSrc=='ajax'){_fnBuildAjax(settings,{},function(json){var aData=_fnAjaxDataSrc(settings,json);for(i=0;i<aData.length;i++){_fnAddData(settings,aData[i])}
settings.iInitDisplayStart=iAjaxStart;_fnReDraw(settings);_fnProcessingDisplay(settings,!1);_fnInitComplete(settings)},settings)}else{_fnInitComplete(settings);_fnProcessingDisplay(settings,!1)}}})}
function _fnInitComplete(settings){if(settings._bInitComplete){return}
var args=[settings,settings.json];settings._bInitComplete=!0;_fnAdjustColumnSizing(settings);_fnCallbackFire(settings,null,'plugin-init',args,!0);_fnCallbackFire(settings,'aoInitComplete','init',args,!0)}
function _fnLengthChange(settings,val){var len=parseInt(val,10);settings._iDisplayLength=len;_fnLengthOverflow(settings);_fnCallbackFire(settings,null,'length',[settings,len])}
function _fnPageChange(settings,action,redraw){var
start=settings._iDisplayStart,len=settings._iDisplayLength,records=settings.fnRecordsDisplay();if(records===0||len===-1){start=0}else if(typeof action==="number"){start=action*len;if(start>records){start=0}}else if(action=="first"){start=0}else if(action=="previous"){start=len>=0?start-len:0;if(start<0){start=0}}else if(action=="next"){if(start+len<records){start+=len}}else if(action=="last"){start=Math.floor((records-1)/len)*len}else if(action==='ellipsis'){return}else{_fnLog(settings,0,"Unknown paging action: "+action,5)}
var changed=settings._iDisplayStart!==start;settings._iDisplayStart=start;_fnCallbackFire(settings,null,changed?'page':'page-nc',[settings]);if(changed&&redraw){_fnDraw(settings)}
return changed}
function _processingHtml(settings){var table=settings.nTable;var scrolling=settings.oScroll.sX!==''||settings.oScroll.sY!=='';if(settings.oFeatures.bProcessing){var n=$('<div/>',{'id':settings.sTableId+'_processing','class':settings.oClasses.processing.container,'role':'status'}).html(settings.oLanguage.sProcessing).append('<div><div></div><div></div><div></div><div></div></div>');if(scrolling){n.prependTo($('div.dt-scroll',settings.nTableWrapper))}else{n.insertBefore(table)}
$(table).on('processing.dt.DT',function(e,s,show){n.css('display',show?'block':'none')})}}
function _fnProcessingDisplay(settings,show){if(settings.bDrawing&&show===!1){return}
_fnCallbackFire(settings,null,'processing',[settings,show])}
function _fnProcessingRun(settings,enable,run){if(!enable){run()}else{_fnProcessingDisplay(settings,!0);setTimeout(function(){run();_fnProcessingDisplay(settings,!1)},0)}}
function _fnFeatureHtmlTable(settings){var table=$(settings.nTable);var scroll=settings.oScroll;if(scroll.sX===''&&scroll.sY===''){return settings.nTable}
var scrollX=scroll.sX;var scrollY=scroll.sY;var classes=settings.oClasses.scrolling;var caption=settings.captionNode;var captionSide=caption?caption._captionSide:null;var headerClone=$(table[0].cloneNode(!1));var footerClone=$(table[0].cloneNode(!1));var footer=table.children('tfoot');var _div='<div/>';var size=function(s){return!s?null:_fnStringToCss(s)};if(!footer.length){footer=null}
var scroller=$(_div,{'class':classes.container}).append($(_div,{'class':classes.header.self}).css({overflow:'hidden',position:'relative',border:0,width:scrollX?size(scrollX):'100%'}).append($(_div,{'class':classes.header.inner}).css({'box-sizing':'content-box',width:scroll.sXInner||'100%'}).append(headerClone.removeAttr('id').css('margin-left',0).append(captionSide==='top'?caption:null).append(table.children('thead'))))).append($(_div,{'class':classes.body}).css({position:'relative',overflow:'auto',width:size(scrollX)}).append(table));if(footer){scroller.append($(_div,{'class':classes.footer.self}).css({overflow:'hidden',border:0,width:scrollX?size(scrollX):'100%'}).append($(_div,{'class':classes.footer.inner}).append(footerClone.removeAttr('id').css('margin-left',0).append(captionSide==='bottom'?caption:null).append(table.children('tfoot')))))}
var children=scroller.children();var scrollHead=children[0];var scrollBody=children[1];var scrollFoot=footer?children[2]:null;$(scrollBody).on('scroll.DT',function(){var scrollLeft=this.scrollLeft;scrollHead.scrollLeft=scrollLeft;if(footer){scrollFoot.scrollLeft=scrollLeft}});$('th, td',scrollHead).on('focus',function(){var scrollLeft=scrollHead.scrollLeft;scrollBody.scrollLeft=scrollLeft;if(footer){scrollBody.scrollLeft=scrollLeft}});$(scrollBody).css('max-height',scrollY);if(!scroll.bCollapse){$(scrollBody).css('height',scrollY)}
settings.nScrollHead=scrollHead;settings.nScrollBody=scrollBody;settings.nScrollFoot=scrollFoot;settings.aoDrawCallback.push(_fnScrollDraw);return scroller[0]}
function _fnScrollDraw(settings){var
scroll=settings.oScroll,barWidth=scroll.iBarWidth,divHeader=$(settings.nScrollHead),divHeaderInner=divHeader.children('div'),divHeaderTable=divHeaderInner.children('table'),divBodyEl=settings.nScrollBody,divBody=$(divBodyEl),divFooter=$(settings.nScrollFoot),divFooterInner=divFooter.children('div'),divFooterTable=divFooterInner.children('table'),header=$(settings.nTHead),table=$(settings.nTable),footer=settings.nTFoot&&$('th, td',settings.nTFoot).length?$(settings.nTFoot):null,browser=settings.oBrowser,headerCopy,footerCopy;var scrollBarVis=divBodyEl.scrollHeight>divBodyEl.clientHeight;if(settings.scrollBarVis!==scrollBarVis&&settings.scrollBarVis!==undefined){settings.scrollBarVis=scrollBarVis;_fnAdjustColumnSizing(settings);return}else{settings.scrollBarVis=scrollBarVis}
table.children('thead, tfoot').remove();headerCopy=header.clone().prependTo(table);headerCopy.find('th, td').removeAttr('tabindex');headerCopy.find('[id]').removeAttr('id');if(footer){footerCopy=footer.clone().prependTo(table);footerCopy.find('[id]').removeAttr('id')}
if(settings.aiDisplay.length){var colSizes=table.children('tbody').eq(0).children('tr').eq(0).children('th, td').map(function(vis){return{idx:_fnVisibleToColumnIndex(settings,vis),width:$(this).outerWidth()}});for(var i=0;i<colSizes.length;i++){var colEl=settings.aoColumns[colSizes[i].idx].colEl[0];var colWidth=colEl.style.width.replace('px','');if(colWidth!==colSizes[i].width){colEl.style.width=colSizes[i].width+'px'}}}
divHeaderTable.find('colgroup').remove();divHeaderTable.append(settings.colgroup.clone());if(footer){divFooterTable.find('colgroup').remove();divFooterTable.append(settings.colgroup.clone())}
$('th, td',headerCopy).each(function(){$(this.childNodes).wrapAll('<div class="dt-scroll-sizing">')});if(footer){$('th, td',footerCopy).each(function(){$(this.childNodes).wrapAll('<div class="dt-scroll-sizing">')})}
var isScrolling=Math.floor(table.height())>divBodyEl.clientHeight||divBody.css('overflow-y')=="scroll";var paddingSide='padding'+(browser.bScrollbarLeft?'Left':'Right');var outerWidth=table.outerWidth();divHeaderTable.css('width',_fnStringToCss(outerWidth));divHeaderInner.css('width',_fnStringToCss(outerWidth)).css(paddingSide,isScrolling?barWidth+"px":"0px");if(footer){divFooterTable.css('width',_fnStringToCss(outerWidth));divFooterInner.css('width',_fnStringToCss(outerWidth)).css(paddingSide,isScrolling?barWidth+"px":"0px")}
table.children('colgroup').prependTo(table);divBody.trigger('scroll');if((settings.bSorted||settings.bFiltered)&&!settings._drawHold){divBodyEl.scrollTop=0}}
function _fnCalculateColumnWidths(settings){if(!settings.oFeatures.bAutoWidth){return}
var table=settings.nTable,columns=settings.aoColumns,scroll=settings.oScroll,scrollY=scroll.sY,scrollX=scroll.sX,scrollXInner=scroll.sXInner,visibleColumns=_fnGetColumns(settings,'bVisible'),tableWidthAttr=table.getAttribute('width'),tableContainer=table.parentNode,i,column,columnIdx;var styleWidth=table.style.width;if(!styleWidth&&!tableWidthAttr){table.style.width='100%';styleWidth='100%'}
if(styleWidth&&styleWidth.indexOf('%')!==-1){tableWidthAttr=styleWidth}
_fnCallbackFire(settings,null,'column-calc',{visible:visibleColumns},!1);var tmpTable=$(table.cloneNode()).css('visibility','hidden').removeAttr('id');tmpTable.append('<tbody>')
var tr=$('<tr/>').appendTo(tmpTable.find('tbody'));tmpTable.append($(settings.nTHead).clone()).append($(settings.nTFoot).clone());tmpTable.find('tfoot th, tfoot td').css('width','');tmpTable.find('thead th, thead td').each(function(){var width=_fnColumnsSumWidth(settings,this,!0,!1);if(width){this.style.width=width;if(scrollX){$(this).append($('<div/>').css({width:width,margin:0,padding:0,border:0,height:1}))}}else{this.style.width=''}});for(i=0;i<visibleColumns.length;i++){columnIdx=visibleColumns[i];column=columns[columnIdx];var longest=_fnGetMaxLenString(settings,columnIdx);var autoClass=_ext.type.className[column.sType];var text=longest+column.sContentPadding;var insert=longest.indexOf('<')===-1?document.createTextNode(text):text
$('<td/>').addClass(autoClass).addClass(column.sClass).append(insert).appendTo(tr)}
$('[name]',tmpTable).removeAttr('name');var holder=$('<div/>').css(scrollX||scrollY?{position:'absolute',top:0,left:0,height:1,right:0,overflow:'hidden'}:{}).append(tmpTable).appendTo(tableContainer);if(scrollX&&scrollXInner){tmpTable.width(scrollXInner)}else if(scrollX){tmpTable.css('width','auto');tmpTable.removeAttr('width');if(tmpTable.width()<tableContainer.clientWidth&&tableWidthAttr){tmpTable.width(tableContainer.clientWidth)}}else if(scrollY){tmpTable.width(tableContainer.clientWidth)}else if(tableWidthAttr){tmpTable.width(tableWidthAttr)}
var total=0;var bodyCells=tmpTable.find('tbody tr').eq(0).children();for(i=0;i<visibleColumns.length;i++){var bounding=bodyCells[i].getBoundingClientRect().width;total+=bounding;columns[visibleColumns[i]].sWidth=_fnStringToCss(bounding)}
table.style.width=_fnStringToCss(total);holder.remove();if(tableWidthAttr){table.style.width=_fnStringToCss(tableWidthAttr)}
if((tableWidthAttr||scrollX)&&!settings._reszEvt){var bindResize=function(){$(window).on('resize.DT-'+settings.sInstance,DataTable.util.throttle(function(){if(!settings.bDestroying){_fnAdjustColumnSizing(settings)}}))};bindResize();settings._reszEvt=!0}}
function _fnGetMaxLenString(settings,colIdx){var column=settings.aoColumns[colIdx];if(!column.maxLenString){var s,max='',maxLen=-1;for(var i=0,ien=settings.aiDisplayMaster.length;i<ien;i++){var rowIdx=settings.aiDisplayMaster[i];var data=_fnGetRowDisplay(settings,rowIdx)[colIdx];var cellString=data&&typeof data==='object'&&data.nodeType?data.innerHTML:data+'';cellString=cellString.replace(/id=".*?"/g,'').replace(/name=".*?"/g,'');s=_stripHtml(cellString).replace(/&nbsp;/g,' ');if(s.length>maxLen){max=cellString;maxLen=s.length}}
column.maxLenString=max}
return column.maxLenString}
function _fnStringToCss(s){if(s===null){return'0px'}
if(typeof s=='number'){return s<0?'0px':s+'px'}
return s.match(/\d$/)?s+'px':s}
function _colGroup(settings){var cols=settings.aoColumns;settings.colgroup.empty();for(i=0;i<cols.length;i++){if(cols[i].bVisible){settings.colgroup.append(cols[i].colEl)}}}
function _fnSortInit(settings){var target=settings.nTHead;var headerRows=target.querySelectorAll('tr');var legacyTop=settings.bSortCellsTop;var notSelector=':not([data-dt-order="disable"]):not([data-dt-order="icon-only"])';if(legacyTop===!0){target=headerRows[0]}else if(legacyTop===!1){target=headerRows[headerRows.length-1]}
_fnSortAttachListener(settings,target,target===settings.nTHead?'tr'+notSelector+' th'+notSelector+', tr'+notSelector+' td'+notSelector:'th'+notSelector+', td'+notSelector);var order=[];_fnSortResolve(settings,order,settings.aaSorting);settings.aaSorting=order}
function _fnSortAttachListener(settings,node,selector,column,callback){_fnBindAction(node,selector,function(e){var run=!1;var columns=column===undefined?_fnColumnsFromHeader(e.target):[column];if(columns.length){for(var i=0,ien=columns.length;i<ien;i++){var ret=_fnSortAdd(settings,columns[i],i,e.shiftKey);if(ret!==!1){run=!0}
if(settings.aaSorting.length===1&&settings.aaSorting[0][1]===''){break}}
if(run){_fnProcessingRun(settings,!0,function(){_fnSort(settings);_fnSortDisplay(settings,settings.aiDisplay);_fnReDraw(settings,!1,!1);if(callback){callback()}})}}})}
function _fnSortDisplay(settings,display){if(display.length<2){return}
var master=settings.aiDisplayMaster;var masterMap={};var map={};var i;for(i=0;i<master.length;i++){masterMap[master[i]]=i}
for(i=0;i<display.length;i++){map[display[i]]=masterMap[display[i]]}
display.sort(function(a,b){return map[a]-map[b]})}
function _fnSortResolve(settings,nestedSort,sort){var push=function(a){if($.isPlainObject(a)){if(a.idx!==undefined){nestedSort.push([a.idx,a.dir])}else if(a.name){var cols=_pluck(settings.aoColumns,'sName');var idx=cols.indexOf(a.name);if(idx!==-1){nestedSort.push([idx,a.dir])}}}else{nestedSort.push(a)}};if($.isPlainObject(sort)){push(sort)}else if(sort.length&&typeof sort[0]==='number'){push(sort)}else if(sort.length){for(var z=0;z<sort.length;z++){push(sort[z])}}}
function _fnSortFlatten(settings){var
i,k,kLen,aSort=[],extSort=DataTable.ext.type.order,aoColumns=settings.aoColumns,aDataSort,iCol,sType,srcCol,fixed=settings.aaSortingFixed,fixedObj=$.isPlainObject(fixed),nestedSort=[];if(!settings.oFeatures.bSort){return aSort}
if(Array.isArray(fixed)){_fnSortResolve(settings,nestedSort,fixed)}
if(fixedObj&&fixed.pre){_fnSortResolve(settings,nestedSort,fixed.pre)}
_fnSortResolve(settings,nestedSort,settings.aaSorting);if(fixedObj&&fixed.post){_fnSortResolve(settings,nestedSort,fixed.post)}
for(i=0;i<nestedSort.length;i++){srcCol=nestedSort[i][0];if(aoColumns[srcCol]){aDataSort=aoColumns[srcCol].aDataSort;for(k=0,kLen=aDataSort.length;k<kLen;k++){iCol=aDataSort[k];sType=aoColumns[iCol].sType||'string';if(nestedSort[i]._idx===undefined){nestedSort[i]._idx=aoColumns[iCol].asSorting.indexOf(nestedSort[i][1])}
if(nestedSort[i][1]){aSort.push({src:srcCol,col:iCol,dir:nestedSort[i][1],index:nestedSort[i]._idx,type:sType,formatter:extSort[sType+"-pre"],sorter:extSort[sType+"-"+nestedSort[i][1]]})}}}}
return aSort}
function _fnSort(oSettings,col,dir){var
i,ien,iLen,aiOrig=[],extSort=DataTable.ext.type.order,aoData=oSettings.aoData,sortCol,displayMaster=oSettings.aiDisplayMaster,aSort;if(col!==undefined){var srcCol=oSettings.aoColumns[col];aSort=[{src:col,col:col,dir:dir,index:0,type:srcCol.sType,formatter:extSort[srcCol.sType+"-pre"],sorter:extSort[srcCol.sType+"-"+dir]}];displayMaster=displayMaster.slice()}else{aSort=_fnSortFlatten(oSettings)}
for(i=0,ien=aSort.length;i<ien;i++){sortCol=aSort[i];_fnSortData(oSettings,sortCol.col)}
if(_fnDataSource(oSettings)!='ssp'&&aSort.length!==0){for(i=0,iLen=displayMaster.length;i<iLen;i++){aiOrig[i]=i}
if(aSort.length&&aSort[0].dir==='desc'&&oSettings.orderDescReverse){aiOrig.reverse()}
displayMaster.sort(function(a,b){var
x,y,k,test,sort,len=aSort.length,dataA=aoData[a]._aSortData,dataB=aoData[b]._aSortData;for(k=0;k<len;k++){sort=aSort[k];x=dataA[sort.col];y=dataB[sort.col];if(sort.sorter){test=sort.sorter(x,y);if(test!==0){return test}}else{test=x<y?-1:x>y?1:0;if(test!==0){return sort.dir==='asc'?test:-test}}}
x=aiOrig[a];y=aiOrig[b];return x<y?-1:x>y?1:0})}else if(aSort.length===0){displayMaster.sort(function(x,y){return x<y?-1:x>y?1:0})}
if(col===undefined){oSettings.bSorted=!0;oSettings.sortDetails=aSort;_fnCallbackFire(oSettings,null,'order',[oSettings,aSort])}
return displayMaster}
function _fnSortAdd(settings,colIdx,addIndex,shift){var col=settings.aoColumns[colIdx];var sorting=settings.aaSorting;var asSorting=col.asSorting;var nextSortIdx;var next=function(a,overflow){var idx=a._idx;if(idx===undefined){idx=asSorting.indexOf(a[1])}
return idx+1<asSorting.length?idx+1:overflow?null:0};if(!col.bSortable){return!1}
if(typeof sorting[0]==='number'){sorting=settings.aaSorting=[sorting]}
if((shift||addIndex)&&settings.oFeatures.bSortMulti){var sortIdx=_pluck(sorting,'0').indexOf(colIdx);if(sortIdx!==-1){nextSortIdx=next(sorting[sortIdx],!0);if(nextSortIdx===null&&sorting.length===1){nextSortIdx=0}
if(nextSortIdx===null){sorting.splice(sortIdx,1)}else{sorting[sortIdx][1]=asSorting[nextSortIdx];sorting[sortIdx]._idx=nextSortIdx}}else if(shift){sorting.push([colIdx,asSorting[0],0]);sorting[sorting.length-1]._idx=0}else{sorting.push([colIdx,sorting[0][1],0]);sorting[sorting.length-1]._idx=0}}else if(sorting.length&&sorting[0][0]==colIdx){nextSortIdx=next(sorting[0]);sorting.length=1;sorting[0][1]=asSorting[nextSortIdx];sorting[0]._idx=nextSortIdx}else{sorting.length=0;sorting.push([colIdx,asSorting[0]]);sorting[0]._idx=0}}
function _fnSortingClasses(settings){var oldSort=settings.aLastSort;var sortClass=settings.oClasses.order.position;var sort=_fnSortFlatten(settings);var features=settings.oFeatures;var i,ien,colIdx;if(features.bSort&&features.bSortClasses){for(i=0,ien=oldSort.length;i<ien;i++){colIdx=oldSort[i].src;$(_pluck(settings.aoData,'anCells',colIdx)).removeClass(sortClass+(i<2?i+1:3))}
for(i=0,ien=sort.length;i<ien;i++){colIdx=sort[i].src;$(_pluck(settings.aoData,'anCells',colIdx)).addClass(sortClass+(i<2?i+1:3))}}
settings.aLastSort=sort}
function _fnSortData(settings,colIdx){var column=settings.aoColumns[colIdx];var customSort=DataTable.ext.order[column.sSortDataType];var customData;if(customSort){customData=customSort.call(settings.oInstance,settings,colIdx,_fnColumnIndexToVisible(settings,colIdx))}
var row,cellData;var formatter=DataTable.ext.type.order[column.sType+"-pre"];var data=settings.aoData;for(var rowIdx=0;rowIdx<data.length;rowIdx++){if(!data[rowIdx]){continue}
row=data[rowIdx];if(!row._aSortData){row._aSortData=[]}
if(!row._aSortData[colIdx]||customSort){cellData=customSort?customData[rowIdx]:_fnGetCellData(settings,rowIdx,colIdx,'sort');row._aSortData[colIdx]=formatter?formatter(cellData,settings):cellData}}}
function _fnSaveState(settings){if(settings._bLoadingState){return}
var state={time:+new Date(),start:settings._iDisplayStart,length:settings._iDisplayLength,order:$.extend(!0,[],settings.aaSorting),search:$.extend({},settings.oPreviousSearch),columns:settings.aoColumns.map(function(col,i){return{visible:col.bVisible,search:$.extend({},settings.aoPreSearchCols[i])}})};settings.oSavedState=state;_fnCallbackFire(settings,"aoStateSaveParams",'stateSaveParams',[settings,state]);if(settings.oFeatures.bStateSave&&!settings.bDestroying){settings.fnStateSaveCallback.call(settings.oInstance,settings,state)}}
function _fnLoadState(settings,init,callback){if(!settings.oFeatures.bStateSave){callback();return}
var loaded=function(state){_fnImplementState(settings,state,callback)}
var state=settings.fnStateLoadCallback.call(settings.oInstance,settings,loaded);if(state!==undefined){_fnImplementState(settings,state,callback)}
return!0}
function _fnImplementState(settings,s,callback){var i,ien;var columns=settings.aoColumns;settings._bLoadingState=!0;var api=settings._bInitComplete?new DataTable.Api(settings):null;if(!s||!s.time){settings._bLoadingState=!1;callback();return}
var duration=settings.iStateDuration;if(duration>0&&s.time<+new Date()-(duration*1000)){settings._bLoadingState=!1;callback();return}
var abStateLoad=_fnCallbackFire(settings,'aoStateLoadParams','stateLoadParams',[settings,s]);if(abStateLoad.indexOf(!1)!==-1){settings._bLoadingState=!1;callback();return}
if(s.columns&&columns.length!==s.columns.length){settings._bLoadingState=!1;callback();return}
settings.oLoadedState=$.extend(!0,{},s);_fnCallbackFire(settings,null,'stateLoadInit',[settings,s],!0);if(s.length!==undefined){if(api){api.page.len(s.length)}else{settings._iDisplayLength=s.length}}
if(s.start!==undefined){if(api===null){settings._iDisplayStart=s.start;settings.iInitDisplayStart=s.start}else{_fnPageChange(settings,s.start/settings._iDisplayLength)}}
if(s.order!==undefined){settings.aaSorting=[];$.each(s.order,function(i,col){settings.aaSorting.push(col[0]>=columns.length?[0,col[1]]:col)})}
if(s.search!==undefined){$.extend(settings.oPreviousSearch,s.search)}
if(s.columns){for(i=0,ien=s.columns.length;i<ien;i++){var col=s.columns[i];if(col.visible!==undefined){if(api){api.column(i).visible(col.visible,!1)}else{columns[i].bVisible=col.visible}}
if(col.search!==undefined){$.extend(settings.aoPreSearchCols[i],col.search)}}
if(api){api.columns.adjust()}}
settings._bLoadingState=!1;_fnCallbackFire(settings,'aoStateLoaded','stateLoaded',[settings,s]);callback()}
function _fnLog(settings,level,msg,tn){msg='DataTables warning: '+(settings?'table id='+settings.sTableId+' - ':'')+msg;if(tn){msg+='. For more information about this error, please see '+'https://datatables.net/tn/'+tn}
if(!level){var ext=DataTable.ext;var type=ext.sErrMode||ext.errMode;if(settings){_fnCallbackFire(settings,null,'dt-error',[settings,tn,msg],!0)}
if(type=='alert'){alert(msg)}else if(type=='throw'){throw new Error(msg)}else if(typeof type=='function'){type(settings,tn,msg)}}else if(window.console&&console.log){console.log(msg)}}
function _fnMap(ret,src,name,mappedName){if(Array.isArray(name)){$.each(name,function(i,val){if(Array.isArray(val)){_fnMap(ret,src,val[0],val[1])}else{_fnMap(ret,src,val)}});return}
if(mappedName===undefined){mappedName=name}
if(src[name]!==undefined){ret[mappedName]=src[name]}}
function _fnExtend(out,extender,breakRefs){var val;for(var prop in extender){if(Object.prototype.hasOwnProperty.call(extender,prop)){val=extender[prop];if($.isPlainObject(val)){if(!$.isPlainObject(out[prop])){out[prop]={}}
$.extend(!0,out[prop],val)}else if(breakRefs&&prop!=='data'&&prop!=='aaData'&&Array.isArray(val)){out[prop]=val.slice()}else{out[prop]=val}}}
return out}
function _fnBindAction(n,selector,fn){$(n).on('click.DT',selector,function(e){fn(e)}).on('keypress.DT',selector,function(e){if(e.which===13){e.preventDefault();fn(e)}}).on('selectstart.DT',selector,function(){return!1})}
function _fnCallbackReg(settings,store,fn){if(fn){settings[store].push(fn)}}
function _fnCallbackFire(settings,callbackArr,eventName,args,bubbles){var ret=[];if(callbackArr){ret=settings[callbackArr].slice().reverse().map(function(val){return val.apply(settings.oInstance,args)})}
if(eventName!==null){var e=$.Event(eventName+'.dt');var table=$(settings.nTable);e.dt=settings.api;table[bubbles?'trigger':'triggerHandler'](e,args);if(bubbles&&table.parents('body').length===0){$('body').trigger(e,args)}
ret.push(e.result)}
return ret}
function _fnLengthOverflow(settings){var
start=settings._iDisplayStart,end=settings.fnDisplayEnd(),len=settings._iDisplayLength;if(start>=end){start=end-len}
start-=(start%len);if(len===-1||start<0){start=0}
settings._iDisplayStart=start}
function _fnRenderer(settings,type){var renderer=settings.renderer;var host=DataTable.ext.renderer[type];if($.isPlainObject(renderer)&&renderer[type]){return host[renderer[type]]||host._}else if(typeof renderer==='string'){return host[renderer]||host._}
return host._}
function _fnDataSource(settings){if(settings.oFeatures.bServerSide){return'ssp'}else if(settings.ajax){return'ajax'}
return'dom'}
function _fnMacros(settings,str,entries){var
formatter=settings.fnFormatNumber,start=settings._iDisplayStart+1,len=settings._iDisplayLength,vis=settings.fnRecordsDisplay(),max=settings.fnRecordsTotal(),all=len===-1;return str.replace(/_START_/g,formatter.call(settings,start)).replace(/_END_/g,formatter.call(settings,settings.fnDisplayEnd())).replace(/_MAX_/g,formatter.call(settings,max)).replace(/_TOTAL_/g,formatter.call(settings,vis)).replace(/_PAGE_/g,formatter.call(settings,all?1:Math.ceil(start/len))).replace(/_PAGES_/g,formatter.call(settings,all?1:Math.ceil(vis/len))).replace(/_ENTRIES_/g,settings.api.i18n('entries','',entries)).replace(/_ENTRIES-MAX_/g,settings.api.i18n('entries','',max)).replace(/_ENTRIES-TOTAL_/g,settings.api.i18n('entries','',vis))}
var __apiStruct=[];var __arrayProto=Array.prototype;var _toSettings=function(mixed){var idx,jq;var settings=DataTable.settings;var tables=_pluck(settings,'nTable');if(!mixed){return[]}else if(mixed.nTable&&mixed.oFeatures){return[mixed]}else if(mixed.nodeName&&mixed.nodeName.toLowerCase()==='table'){idx=tables.indexOf(mixed);return idx!==-1?[settings[idx]]:null}else if(mixed&&typeof mixed.settings==='function'){return mixed.settings().toArray()}else if(typeof mixed==='string'){jq=$(mixed).get()}else if(mixed instanceof $){jq=mixed.get()}
if(jq){return settings.filter(function(v,idx){return jq.includes(tables[idx])})}};_Api=function(context,data){if(!(this instanceof _Api)){return new _Api(context,data)}
var settings=[];var ctxSettings=function(o){var a=_toSettings(o);if(a){settings.push.apply(settings,a)}};if(Array.isArray(context)){for(var i=0,ien=context.length;i<ien;i++){ctxSettings(context[i])}}else{ctxSettings(context)}
this.context=settings.length>1?_unique(settings):settings;if(data){this.push.apply(this,data)}
this.selector={rows:null,cols:null,opts:null};_Api.extend(this,this,__apiStruct)};DataTable.Api=_Api;$.extend(_Api.prototype,{any:function(){return this.count()!==0},context:[],count:function(){return this.flatten().length},each:function(fn){for(var i=0,ien=this.length;i<ien;i++){fn.call(this,this[i],i,this)}
return this},eq:function(idx){var ctx=this.context;return ctx.length>idx?new _Api(ctx[idx],this[idx]):null},filter:function(fn){var a=__arrayProto.filter.call(this,fn,this);return new _Api(this.context,a)},flatten:function(){var a=[];return new _Api(this.context,a.concat.apply(a,this.toArray()))},get:function(idx){return this[idx]},join:__arrayProto.join,includes:function(find){return this.indexOf(find)===-1?!1:!0},indexOf:__arrayProto.indexOf,iterator:function(flatten,type,fn,alwaysNew){var
a=[],ret,i,ien,j,jen,context=this.context,rows,items,item,selector=this.selector;if(typeof flatten==='string'){alwaysNew=fn;fn=type;type=flatten;flatten=!1}
for(i=0,ien=context.length;i<ien;i++){var apiInst=new _Api(context[i]);if(type==='table'){ret=fn.call(apiInst,context[i],i);if(ret!==undefined){a.push(ret)}}else if(type==='columns'||type==='rows'){ret=fn.call(apiInst,context[i],this[i],i);if(ret!==undefined){a.push(ret)}}else if(type==='every'||type==='column'||type==='column-rows'||type==='row'||type==='cell'){items=this[i];if(type==='column-rows'){rows=_selector_row_indexes(context[i],selector.opts)}
for(j=0,jen=items.length;j<jen;j++){item=items[j];if(type==='cell'){ret=fn.call(apiInst,context[i],item.row,item.column,i,j)}else{ret=fn.call(apiInst,context[i],item,i,j,rows)}
if(ret!==undefined){a.push(ret)}}}}
if(a.length||alwaysNew){var api=new _Api(context,flatten?a.concat.apply([],a):a);var apiSelector=api.selector;apiSelector.rows=selector.rows;apiSelector.cols=selector.cols;apiSelector.opts=selector.opts;return api}
return this},lastIndexOf:__arrayProto.lastIndexOf,length:0,map:function(fn){var a=__arrayProto.map.call(this,fn,this);return new _Api(this.context,a)},pluck:function(prop){var fn=DataTable.util.get(prop);return this.map(function(el){return fn(el)})},pop:__arrayProto.pop,push:__arrayProto.push,reduce:__arrayProto.reduce,reduceRight:__arrayProto.reduceRight,reverse:__arrayProto.reverse,selector:null,shift:__arrayProto.shift,slice:function(){return new _Api(this.context,this)},sort:__arrayProto.sort,splice:__arrayProto.splice,toArray:function(){return __arrayProto.slice.call(this)},to$:function(){return $(this)},toJQuery:function(){return $(this)},unique:function(){return new _Api(this.context,_unique(this.toArray()))},unshift:__arrayProto.unshift});function _api_scope(scope,fn,struc){return function(){var ret=fn.apply(scope||this,arguments);_Api.extend(ret,ret,struc.methodExt);return ret}}
function _api_find(src,name){for(var i=0,ien=src.length;i<ien;i++){if(src[i].name===name){return src[i]}}
return null}
window.__apiStruct=__apiStruct;_Api.extend=function(scope,obj,ext){if(!ext.length||!obj||(!(obj instanceof _Api)&&!obj.__dt_wrapper)){return}
var i,ien,struct;for(i=0,ien=ext.length;i<ien;i++){struct=ext[i];if(struct.name==='__proto__'){continue}
obj[struct.name]=struct.type==='function'?_api_scope(scope,struct.val,struct):struct.type==='object'?{}:struct.val;obj[struct.name].__dt_wrapper=!0;_Api.extend(scope,obj[struct.name],struct.propExt)}};_Api.register=_api_register=function(name,val){if(Array.isArray(name)){for(var j=0,jen=name.length;j<jen;j++){_Api.register(name[j],val)}
return}
var i,ien,heir=name.split('.'),struct=__apiStruct,key,method;for(i=0,ien=heir.length;i<ien;i++){method=heir[i].indexOf('()')!==-1;key=method?heir[i].replace('()',''):heir[i];var src=_api_find(struct,key);if(!src){src={name:key,val:{},methodExt:[],propExt:[],type:'object'};struct.push(src)}
if(i===ien-1){src.val=val;src.type=typeof val==='function'?'function':$.isPlainObject(val)?'object':'other'}else{struct=method?src.methodExt:src.propExt}}};_Api.registerPlural=_api_registerPlural=function(pluralName,singularName,val){_Api.register(pluralName,val);_Api.register(singularName,function(){var ret=val.apply(this,arguments);if(ret===this){return this}else if(ret instanceof _Api){return ret.length?Array.isArray(ret[0])?new _Api(ret.context,ret[0]):ret[0]:undefined}
return ret})};var __table_selector=function(selector,a){if(Array.isArray(selector)){var result=[];selector.forEach(function(sel){var inner=__table_selector(sel,a);result.push.apply(result,inner)});return result.filter(function(item){return item})}
if(typeof selector==='number'){return[a[selector]]}
var nodes=a.map(function(el){return el.nTable});return $(nodes).filter(selector).map(function(){var idx=nodes.indexOf(this);return a[idx]}).toArray()};_api_register('tables()',function(selector){return selector!==undefined&&selector!==null?new _Api(__table_selector(selector,this.context)):this});_api_register('table()',function(selector){var tables=this.tables(selector);var ctx=tables.context;return ctx.length?new _Api(ctx[0]):tables});[['nodes','node','nTable'],['body','body','nTBody'],['header','header','nTHead'],['footer','footer','nTFoot'],].forEach(function(item){_api_registerPlural('tables().'+item[0]+'()','table().'+item[1]+'()',function(){return this.iterator('table',function(ctx){return ctx[item[2]]},1)})});[['header','aoHeader'],['footer','aoFooter'],].forEach(function(item){_api_register('table().'+item[0]+'.structure()',function(selector){var indexes=this.columns(selector).indexes().flatten();var ctx=this.context[0];return _fnHeaderLayout(ctx,ctx[item[1]],indexes)})})
_api_registerPlural('tables().containers()','table().container()',function(){return this.iterator('table',function(ctx){return ctx.nTableWrapper},1)});_api_register('tables().every()',function(fn){var that=this;return this.iterator('table',function(s,i){fn.call(that.table(i),i)})});_api_register('caption()',function(value,side){var context=this.context;if(value===undefined){var caption=context[0].captionNode;return caption&&context.length?caption.innerHTML:null}
return this.iterator('table',function(ctx){var table=$(ctx.nTable);var caption=$(ctx.captionNode);var container=$(ctx.nTableWrapper);if(!caption.length){caption=$('<caption/>').html(value);ctx.captionNode=caption[0];if(!side){table.prepend(caption);side=caption.css('caption-side')}}
caption.html(value);if(side){caption.css('caption-side',side);caption[0]._captionSide=side}
if(container.find('div.dataTables_scroll').length){var selector=(side==='top'?'Head':'Foot');container.find('div.dataTables_scroll'+selector+' table').prepend(caption)}else{table.prepend(caption)}},1)});_api_register('caption.node()',function(){var ctx=this.context;return ctx.length?ctx[0].captionNode:null});_api_register('draw()',function(paging){return this.iterator('table',function(settings){if(paging==='page'){_fnDraw(settings)}else{if(typeof paging==='string'){paging=paging==='full-hold'?!1:!0}
_fnReDraw(settings,paging===!1)}})});_api_register('page()',function(action){if(action===undefined){return this.page.info().page}
return this.iterator('table',function(settings){_fnPageChange(settings,action)})});_api_register('page.info()',function(){if(this.context.length===0){return undefined}
var settings=this.context[0],start=settings._iDisplayStart,len=settings.oFeatures.bPaginate?settings._iDisplayLength:-1,visRecords=settings.fnRecordsDisplay(),all=len===-1;return{"page":all?0:Math.floor(start/len),"pages":all?1:Math.ceil(visRecords/len),"start":start,"end":settings.fnDisplayEnd(),"length":len,"recordsTotal":settings.fnRecordsTotal(),"recordsDisplay":visRecords,"serverSide":_fnDataSource(settings)==='ssp'}});_api_register('page.len()',function(len){if(len===undefined){return this.context.length!==0?this.context[0]._iDisplayLength:undefined}
return this.iterator('table',function(settings){_fnLengthChange(settings,len)})});var __reload=function(settings,holdPosition,callback){if(callback){var api=new _Api(settings);api.one('draw',function(){callback(api.ajax.json())})}
if(_fnDataSource(settings)=='ssp'){_fnReDraw(settings,holdPosition)}else{_fnProcessingDisplay(settings,!0);var xhr=settings.jqXHR;if(xhr&&xhr.readyState!==4){xhr.abort()}
_fnBuildAjax(settings,{},function(json){_fnClearTable(settings);var data=_fnAjaxDataSrc(settings,json);for(var i=0,ien=data.length;i<ien;i++){_fnAddData(settings,data[i])}
_fnReDraw(settings,holdPosition);_fnInitComplete(settings);_fnProcessingDisplay(settings,!1)})}};_api_register('ajax.json()',function(){var ctx=this.context;if(ctx.length>0){return ctx[0].json}});_api_register('ajax.params()',function(){var ctx=this.context;if(ctx.length>0){return ctx[0].oAjaxData}});_api_register('ajax.reload()',function(callback,resetPaging){return this.iterator('table',function(settings){__reload(settings,resetPaging===!1,callback)})});_api_register('ajax.url()',function(url){var ctx=this.context;if(url===undefined){if(ctx.length===0){return undefined}
ctx=ctx[0];return $.isPlainObject(ctx.ajax)?ctx.ajax.url:ctx.ajax}
return this.iterator('table',function(settings){if($.isPlainObject(settings.ajax)){settings.ajax.url=url}else{settings.ajax=url}})});_api_register('ajax.url().load()',function(callback,resetPaging){return this.iterator('table',function(ctx){__reload(ctx,resetPaging===!1,callback)})});var _selector_run=function(type,selector,selectFn,settings,opts){var
out=[],res,a,i,ien,j,jen,selectorType=typeof selector;if(!selector||selectorType==='string'||selectorType==='function'||selector.length===undefined){selector=[selector]}
for(i=0,ien=selector.length;i<ien;i++){a=selector[i]&&selector[i].split&&!selector[i].match(/[[(:]/)?selector[i].split(','):[selector[i]];for(j=0,jen=a.length;j<jen;j++){res=selectFn(typeof a[j]==='string'?(a[j]).trim():a[j]);res=res.filter(function(item){return item!==null&&item!==undefined});if(res&&res.length){out=out.concat(res)}}}
var ext=_ext.selector[type];if(ext.length){for(i=0,ien=ext.length;i<ien;i++){out=ext[i](settings,opts,out)}}
return _unique(out)};var _selector_opts=function(opts){if(!opts){opts={}}
if(opts.filter&&opts.search===undefined){opts.search=opts.filter}
return $.extend({search:'none',order:'current',page:'all'},opts)};var _selector_first=function(old){let inst=new _Api(old.context[0]);if(old.length){inst.push(old[0])}
inst.selector=old.selector;if(inst.length&&inst[0].length>1){inst[0].splice(1)}
return inst};var _selector_row_indexes=function(settings,opts){var
i,ien,tmp,a=[],displayFiltered=settings.aiDisplay,displayMaster=settings.aiDisplayMaster;var search=opts.search,order=opts.order,page=opts.page;if(_fnDataSource(settings)=='ssp'){return search==='removed'?[]:_range(0,displayMaster.length)}
if(page=='current'){for(i=settings._iDisplayStart,ien=settings.fnDisplayEnd();i<ien;i++){a.push(displayFiltered[i])}}else if(order=='current'||order=='applied'){if(search=='none'){a=displayMaster.slice()}else if(search=='applied'){a=displayFiltered.slice()}else if(search=='removed'){var displayFilteredMap={};for(i=0,ien=displayFiltered.length;i<ien;i++){displayFilteredMap[displayFiltered[i]]=null}
displayMaster.forEach(function(item){if(!Object.prototype.hasOwnProperty.call(displayFilteredMap,item)){a.push(item)}})}}else if(order=='index'||order=='original'){for(i=0,ien=settings.aoData.length;i<ien;i++){if(!settings.aoData[i]){continue}
if(search=='none'){a.push(i)}else{tmp=displayFiltered.indexOf(i);if((tmp===-1&&search=='removed')||(tmp>=0&&search=='applied')){a.push(i)}}}}else if(typeof order==='number'){var ordered=_fnSort(settings,order,'asc');if(search==='none'){a=ordered}else{for(i=0;i<ordered.length;i++){tmp=displayFiltered.indexOf(ordered[i]);if((tmp===-1&&search=='removed')||(tmp>=0&&search=='applied')){a.push(ordered[i])}}}}
return a};var __row_selector=function(settings,selector,opts){var rows;var run=function(sel){var selInt=_intVal(sel);var aoData=settings.aoData;if(selInt!==null&&!opts){return[selInt]}
if(!rows){rows=_selector_row_indexes(settings,opts)}
if(selInt!==null&&rows.indexOf(selInt)!==-1){return[selInt]}else if(sel===null||sel===undefined||sel===''){return rows}
if(typeof sel==='function'){return rows.map(function(idx){var row=aoData[idx];return sel(idx,row._aData,row.nTr)?idx:null})}
if(sel.nodeName){var rowIdx=sel._DT_RowIndex;var cellIdx=sel._DT_CellIndex;if(rowIdx!==undefined){return aoData[rowIdx]&&aoData[rowIdx].nTr===sel?[rowIdx]:[]}else if(cellIdx){return aoData[cellIdx.row]&&aoData[cellIdx.row].nTr===sel.parentNode?[cellIdx.row]:[]}else{var host=$(sel).closest('*[data-dt-row]');return host.length?[host.data('dt-row')]:[]}}
if(typeof sel==='string'&&sel.charAt(0)==='#'){var rowObj=settings.aIds[sel.replace(/^#/,'')];if(rowObj!==undefined){return[rowObj.idx]}}
var nodes=_removeEmpty(_pluck_order(settings.aoData,rows,'nTr'));return $(nodes).filter(sel).map(function(){return this._DT_RowIndex}).toArray()};var matched=_selector_run('row',selector,run,settings,opts);if(opts.order==='current'||opts.order==='applied'){_fnSortDisplay(settings,matched)}
return matched};_api_register('rows()',function(selector,opts){if(selector===undefined){selector=''}else if($.isPlainObject(selector)){opts=selector;selector=''}
opts=_selector_opts(opts);var inst=this.iterator('table',function(settings){return __row_selector(settings,selector,opts)},1);inst.selector.rows=selector;inst.selector.opts=opts;return inst});_api_register('rows().nodes()',function(){return this.iterator('row',function(settings,row){return settings.aoData[row].nTr||undefined},1)});_api_register('rows().data()',function(){return this.iterator(!0,'rows',function(settings,rows){return _pluck_order(settings.aoData,rows,'_aData')},1)});_api_registerPlural('rows().cache()','row().cache()',function(type){return this.iterator('row',function(settings,row){var r=settings.aoData[row];return type==='search'?r._aFilterData:r._aSortData},1)});_api_registerPlural('rows().invalidate()','row().invalidate()',function(src){return this.iterator('row',function(settings,row){_fnInvalidate(settings,row,src)})});_api_registerPlural('rows().indexes()','row().index()',function(){return this.iterator('row',function(settings,row){return row},1)});_api_registerPlural('rows().ids()','row().id()',function(hash){var a=[];var context=this.context;for(var i=0,ien=context.length;i<ien;i++){for(var j=0,jen=this[i].length;j<jen;j++){var id=context[i].rowIdFn(context[i].aoData[this[i][j]]._aData);a.push((hash===!0?'#':'')+id)}}
return new _Api(context,a)});_api_registerPlural('rows().remove()','row().remove()',function(){this.iterator('row',function(settings,row){var data=settings.aoData;var rowData=data[row];var idx=settings.aiDisplayMaster.indexOf(row);if(idx!==-1){settings.aiDisplayMaster.splice(idx,1)}
if(settings._iRecordsDisplay>0){settings._iRecordsDisplay--}
_fnLengthOverflow(settings);var id=settings.rowIdFn(rowData._aData);if(id!==undefined){delete settings.aIds[id]}
data[row]=null});return this});_api_register('rows.add()',function(rows){var newRows=this.iterator('table',function(settings){var row,i,ien;var out=[];for(i=0,ien=rows.length;i<ien;i++){row=rows[i];if(row.nodeName&&row.nodeName.toUpperCase()==='TR'){out.push(_fnAddTr(settings,row)[0])}else{out.push(_fnAddData(settings,row))}}
return out},1);var modRows=this.rows(-1);modRows.pop();modRows.push.apply(modRows,newRows);return modRows});_api_register('row()',function(selector,opts){return _selector_first(this.rows(selector,opts))});_api_register('row().data()',function(data){var ctx=this.context;if(data===undefined){return ctx.length&&this.length&&this[0].length?ctx[0].aoData[this[0]]._aData:undefined}
var row=ctx[0].aoData[this[0]];row._aData=data;if(Array.isArray(data)&&row.nTr&&row.nTr.id){_fnSetObjectDataFn(ctx[0].rowId)(data,row.nTr.id)}
_fnInvalidate(ctx[0],this[0],'data');return this});_api_register('row().node()',function(){var ctx=this.context;if(ctx.length&&this.length&&this[0].length){var row=ctx[0].aoData[this[0]];if(row&&row.nTr){return row.nTr}}
return null});_api_register('row.add()',function(row){if(row instanceof $&&row.length){row=row[0]}
var rows=this.iterator('table',function(settings){if(row.nodeName&&row.nodeName.toUpperCase()==='TR'){return _fnAddTr(settings,row)[0]}
return _fnAddData(settings,row)});return this.row(rows[0])});$(document).on('plugin-init.dt',function(e,context){var api=new _Api(context);api.on('stateSaveParams.DT',function(e,settings,d){var idFn=settings.rowIdFn;var rows=settings.aiDisplayMaster;var ids=[];for(var i=0;i<rows.length;i++){var rowIdx=rows[i];var data=settings.aoData[rowIdx];if(data._detailsShow){ids.push('#'+idFn(data._aData))}}
d.childRows=ids});api.on('stateLoaded.DT',function(e,settings,state){__details_state_load(api,state)});__details_state_load(api,api.state.loaded())});var __details_state_load=function(api,state){if(state&&state.childRows){api.rows(state.childRows.map(function(id){return id.replace(/([^:\\]*(?:\\.[^:\\]*)*):/g,"$1\\:")})).every(function(){_fnCallbackFire(api.settings()[0],null,'requestChild',[this])})}}
var __details_add=function(ctx,row,data,klass){var rows=[];var addRow=function(r,k){if(Array.isArray(r)||r instanceof $){for(var i=0,ien=r.length;i<ien;i++){addRow(r[i],k)}
return}
if(r.nodeName&&r.nodeName.toLowerCase()==='tr'){r.setAttribute('data-dt-row',row.idx);rows.push(r)}else{var created=$('<tr><td></td></tr>').attr('data-dt-row',row.idx).addClass(k);$('td',created).addClass(k).html(r)[0].colSpan=_fnVisbleColumns(ctx);rows.push(created[0])}};addRow(data,klass);if(row._details){row._details.detach()}
row._details=$(rows);if(row._detailsShow){row._details.insertAfter(row.nTr)}};var __details_state=DataTable.util.throttle(function(ctx){_fnSaveState(ctx[0])},500);var __details_remove=function(api,idx){var ctx=api.context;if(ctx.length){var row=ctx[0].aoData[idx!==undefined?idx:api[0]];if(row&&row._details){row._details.remove();row._detailsShow=undefined;row._details=undefined;$(row.nTr).removeClass('dt-hasChild');__details_state(ctx)}}};var __details_display=function(api,show){var ctx=api.context;if(ctx.length&&api.length){var row=ctx[0].aoData[api[0]];if(row._details){row._detailsShow=show;if(show){row._details.insertAfter(row.nTr);$(row.nTr).addClass('dt-hasChild')}else{row._details.detach();$(row.nTr).removeClass('dt-hasChild')}
_fnCallbackFire(ctx[0],null,'childRow',[show,api.row(api[0])])
__details_events(ctx[0]);__details_state(ctx)}}};var __details_events=function(settings){var api=new _Api(settings);var namespace='.dt.DT_details';var drawEvent='draw'+namespace;var colvisEvent='column-sizing'+namespace;var destroyEvent='destroy'+namespace;var data=settings.aoData;api.off(drawEvent+' '+colvisEvent+' '+destroyEvent);if(_pluck(data,'_details').length>0){api.on(drawEvent,function(e,ctx){if(settings!==ctx){return}
api.rows({page:'current'}).eq(0).each(function(idx){var row=data[idx];if(row._detailsShow){row._details.insertAfter(row.nTr)}})});api.on(colvisEvent,function(e,ctx){if(settings!==ctx){return}
var row,visible=_fnVisbleColumns(ctx);for(var i=0,ien=data.length;i<ien;i++){row=data[i];if(row&&row._details){row._details.each(function(){var el=$(this).children('td');if(el.length==1){el.attr('colspan',visible)}})}}});api.on(destroyEvent,function(e,ctx){if(settings!==ctx){return}
for(var i=0,ien=data.length;i<ien;i++){if(data[i]&&data[i]._details){__details_remove(api,i)}}})}};var _emp='';var _child_obj=_emp+'row().child';var _child_mth=_child_obj+'()';_api_register(_child_mth,function(data,klass){var ctx=this.context;if(data===undefined){return ctx.length&&this.length&&ctx[0].aoData[this[0]]?ctx[0].aoData[this[0]]._details:undefined}else if(data===!0){this.child.show()}else if(data===!1){__details_remove(this)}else if(ctx.length&&this.length){__details_add(ctx[0],ctx[0].aoData[this[0]],data,klass)}
return this});_api_register([_child_obj+'.show()',_child_mth+'.show()'],function(){__details_display(this,!0);return this});_api_register([_child_obj+'.hide()',_child_mth+'.hide()'],function(){__details_display(this,!1);return this});_api_register([_child_obj+'.remove()',_child_mth+'.remove()'],function(){__details_remove(this);return this});_api_register(_child_obj+'.isShown()',function(){var ctx=this.context;if(ctx.length&&this.length&&ctx[0].aoData[this[0]]){return ctx[0].aoData[this[0]]._detailsShow||!1}
return!1});var __re_column_selector=/^([^:]+)?:(name|title|visIdx|visible)$/;var __columnData=function(settings,column,r1,r2,rows,type){var a=[];for(var row=0,ien=rows.length;row<ien;row++){a.push(_fnGetCellData(settings,rows[row],column,type))}
return a};var __column_header=function(settings,column,row){var header=settings.aoHeader;var target=row!==undefined?row:settings.bSortCellsTop?0:header.length-1;return header[target][column].cell};var __column_selector=function(settings,selector,opts){var
columns=settings.aoColumns,names=_pluck(columns,'sName'),titles=_pluck(columns,'sTitle'),cells=DataTable.util.get('[].[].cell')(settings.aoHeader),nodes=_unique(_flatten([],cells));var run=function(s){var selInt=_intVal(s);if(s===''){return _range(columns.length)}
if(selInt!==null){return[selInt>=0?selInt:columns.length+selInt]}
if(typeof s==='function'){var rows=_selector_row_indexes(settings,opts);return columns.map(function(col,idx){return s(idx,__columnData(settings,idx,0,0,rows),__column_header(settings,idx))?idx:null})}
var match=typeof s==='string'?s.match(__re_column_selector):'';if(match){switch(match[2]){case 'visIdx':case 'visible':if(match[1]){var idx=parseInt(match[1],10);if(idx<0){var visColumns=columns.map(function(col,i){return col.bVisible?i:null});return[visColumns[visColumns.length+idx]]}
return[_fnVisibleToColumnIndex(settings,idx)]}
return columns.map(function(col,i){return col.bVisible?i:null});case 'name':return names.map(function(name,i){return name===match[1]?i:null});case 'title':return titles.map(function(title,i){return title===match[1]?i:null});default:return[]}}
if(s.nodeName&&s._DT_CellIndex){return[s._DT_CellIndex.column]}
var jqResult=$(nodes).filter(s).map(function(){return _fnColumnsFromHeader(this)}).toArray();if(jqResult.length||!s.nodeName){return jqResult}
var host=$(s).closest('*[data-dt-column]');return host.length?[host.data('dt-column')]:[]};return _selector_run('column',selector,run,settings,opts)};var __setColumnVis=function(settings,column,vis){var
cols=settings.aoColumns,col=cols[column],data=settings.aoData,cells,i,ien,tr;if(vis===undefined){return col.bVisible}
if(col.bVisible===vis){return!1}
if(vis){var insertBefore=_pluck(cols,'bVisible').indexOf(!0,column+1);for(i=0,ien=data.length;i<ien;i++){if(data[i]){tr=data[i].nTr;cells=data[i].anCells;if(tr){tr.insertBefore(cells[column],cells[insertBefore]||null)}}}}else{$(_pluck(settings.aoData,'anCells',column)).detach()}
col.bVisible=vis;_colGroup(settings);return!0};_api_register('columns()',function(selector,opts){if(selector===undefined){selector=''}else if($.isPlainObject(selector)){opts=selector;selector=''}
opts=_selector_opts(opts);var inst=this.iterator('table',function(settings){return __column_selector(settings,selector,opts)},1);inst.selector.cols=selector;inst.selector.opts=opts;return inst});_api_registerPlural('columns().header()','column().header()',function(row){return this.iterator('column',function(settings,column){return __column_header(settings,column,row)},1)});_api_registerPlural('columns().footer()','column().footer()',function(row){return this.iterator('column',function(settings,column){var footer=settings.aoFooter;if(!footer.length){return null}
return settings.aoFooter[row!==undefined?row:0][column].cell},1)});_api_registerPlural('columns().data()','column().data()',function(){return this.iterator('column-rows',__columnData,1)});_api_registerPlural('columns().render()','column().render()',function(type){return this.iterator('column-rows',function(settings,column,i,j,rows){return __columnData(settings,column,i,j,rows,type)},1)});_api_registerPlural('columns().dataSrc()','column().dataSrc()',function(){return this.iterator('column',function(settings,column){return settings.aoColumns[column].mData},1)});_api_registerPlural('columns().cache()','column().cache()',function(type){return this.iterator('column-rows',function(settings,column,i,j,rows){return _pluck_order(settings.aoData,rows,type==='search'?'_aFilterData':'_aSortData',column)},1)});_api_registerPlural('columns().init()','column().init()',function(){return this.iterator('column',function(settings,column){return settings.aoColumns[column]},1)});_api_registerPlural('columns().nodes()','column().nodes()',function(){return this.iterator('column-rows',function(settings,column,i,j,rows){return _pluck_order(settings.aoData,rows,'anCells',column)},1)});_api_registerPlural('columns().titles()','column().title()',function(title,row){return this.iterator('column',function(settings,column){if(typeof title==='number'){row=title;title=undefined}
var span=$('span.dt-column-title',this.column(column).header(row));if(title!==undefined){span.html(title);return this}
return span.html()},1)});_api_registerPlural('columns().types()','column().type()',function(){return this.iterator('column',function(settings,column){var type=settings.aoColumns[column].sType;if(!type){_fnColumnTypes(settings)}
return type},1)});_api_registerPlural('columns().visible()','column().visible()',function(vis,calc){var that=this;var changed=[];var ret=this.iterator('column',function(settings,column){if(vis===undefined){return settings.aoColumns[column].bVisible}
if(__setColumnVis(settings,column,vis)){changed.push(column)}});if(vis!==undefined){this.iterator('table',function(settings){_fnDrawHead(settings,settings.aoHeader);_fnDrawHead(settings,settings.aoFooter);if(!settings.aiDisplay.length){$(settings.nTBody).find('td[colspan]').attr('colspan',_fnVisbleColumns(settings))}
_fnSaveState(settings);that.iterator('column',function(settings,column){if(changed.includes(column)){_fnCallbackFire(settings,null,'column-visibility',[settings,column,vis,calc])}});if(changed.length&&(calc===undefined||calc)){that.columns.adjust()}})}
return ret});_api_registerPlural('columns().widths()','column().width()',function(){var columns=this.columns(':visible').count();var row=$('<tr>').html('<td>'+Array(columns).join('</td><td>')+'</td>');$(this.table().body()).append(row);var widths=row.children().map(function(){return $(this).outerWidth()});row.remove();return this.iterator('column',function(settings,column){var visIdx=_fnColumnIndexToVisible(settings,column);return visIdx!==null?widths[visIdx]:0},1)});_api_registerPlural('columns().indexes()','column().index()',function(type){return this.iterator('column',function(settings,column){return type==='visible'?_fnColumnIndexToVisible(settings,column):column},1)});_api_register('columns.adjust()',function(){return this.iterator('table',function(settings){_fnAdjustColumnSizing(settings)},1)});_api_register('column.index()',function(type,idx){if(this.context.length!==0){var ctx=this.context[0];if(type==='fromVisible'||type==='toData'){return _fnVisibleToColumnIndex(ctx,idx)}else if(type==='fromData'||type==='toVisible'){return _fnColumnIndexToVisible(ctx,idx)}}});_api_register('column()',function(selector,opts){return _selector_first(this.columns(selector,opts))});var __cell_selector=function(settings,selector,opts){var data=settings.aoData;var rows=_selector_row_indexes(settings,opts);var cells=_removeEmpty(_pluck_order(data,rows,'anCells'));var allCells=$(_flatten([],cells));var row;var columns=settings.aoColumns.length;var a,i,ien,j,o,host;var run=function(s){var fnSelector=typeof s==='function';if(s===null||s===undefined||fnSelector){a=[];for(i=0,ien=rows.length;i<ien;i++){row=rows[i];for(j=0;j<columns;j++){o={row:row,column:j};if(fnSelector){host=data[row];if(s(o,_fnGetCellData(settings,row,j),host.anCells?host.anCells[j]:null)){a.push(o)}}else{a.push(o)}}}
return a}
if($.isPlainObject(s)){return s.column!==undefined&&s.row!==undefined&&rows.indexOf(s.row)!==-1?[s]:[]}
var jqResult=allCells.filter(s).map(function(i,el){return{row:el._DT_CellIndex.row,column:el._DT_CellIndex.column}}).toArray();if(jqResult.length||!s.nodeName){return jqResult}
host=$(s).closest('*[data-dt-row]');return host.length?[{row:host.data('dt-row'),column:host.data('dt-column')}]:[]};return _selector_run('cell',selector,run,settings,opts)};_api_register('cells()',function(rowSelector,columnSelector,opts){if($.isPlainObject(rowSelector)){if(rowSelector.row===undefined){opts=rowSelector;rowSelector=null}else{opts=columnSelector;columnSelector=null}}
if($.isPlainObject(columnSelector)){opts=columnSelector;columnSelector=null}
if(columnSelector===null||columnSelector===undefined){return this.iterator('table',function(settings){return __cell_selector(settings,rowSelector,_selector_opts(opts))})}
var internalOpts=opts?{page:opts.page,order:opts.order,search:opts.search}:{};var columns=this.columns(columnSelector,internalOpts);var rows=this.rows(rowSelector,internalOpts);var i,ien,j,jen;var cellsNoOpts=this.iterator('table',function(settings,idx){var a=[];for(i=0,ien=rows[idx].length;i<ien;i++){for(j=0,jen=columns[idx].length;j<jen;j++){a.push({row:rows[idx][i],column:columns[idx][j]})}}
return a},1);var cells=opts&&opts.selected?this.cells(cellsNoOpts,opts):cellsNoOpts;$.extend(cells.selector,{cols:columnSelector,rows:rowSelector,opts:opts});return cells});_api_registerPlural('cells().nodes()','cell().node()',function(){return this.iterator('cell',function(settings,row,column){var data=settings.aoData[row];return data&&data.anCells?data.anCells[column]:undefined},1)});_api_register('cells().data()',function(){return this.iterator('cell',function(settings,row,column){return _fnGetCellData(settings,row,column)},1)});_api_registerPlural('cells().cache()','cell().cache()',function(type){type=type==='search'?'_aFilterData':'_aSortData';return this.iterator('cell',function(settings,row,column){return settings.aoData[row][type][column]},1)});_api_registerPlural('cells().render()','cell().render()',function(type){return this.iterator('cell',function(settings,row,column){return _fnGetCellData(settings,row,column,type)},1)});_api_registerPlural('cells().indexes()','cell().index()',function(){return this.iterator('cell',function(settings,row,column){return{row:row,column:column,columnVisible:_fnColumnIndexToVisible(settings,column)}},1)});_api_registerPlural('cells().invalidate()','cell().invalidate()',function(src){return this.iterator('cell',function(settings,row,column){_fnInvalidate(settings,row,src,column)})});_api_register('cell()',function(rowSelector,columnSelector,opts){return _selector_first(this.cells(rowSelector,columnSelector,opts))});_api_register('cell().data()',function(data){var ctx=this.context;var cell=this[0];if(data===undefined){return ctx.length&&cell.length?_fnGetCellData(ctx[0],cell[0].row,cell[0].column):undefined}
_fnSetCellData(ctx[0],cell[0].row,cell[0].column,data);_fnInvalidate(ctx[0],cell[0].row,'data',cell[0].column);return this});_api_register('order()',function(order,dir){var ctx=this.context;var args=Array.prototype.slice.call(arguments);if(order===undefined){return ctx.length!==0?ctx[0].aaSorting:undefined}
if(typeof order==='number'){order=[[order,dir]]}else if(args.length>1){order=args}
return this.iterator('table',function(settings){settings.aaSorting=Array.isArray(order)?order.slice():order})});_api_register('order.listener()',function(node,column,callback){return this.iterator('table',function(settings){_fnSortAttachListener(settings,node,{},column,callback)})});_api_register('order.fixed()',function(set){if(!set){var ctx=this.context;var fixed=ctx.length?ctx[0].aaSortingFixed:undefined;return Array.isArray(fixed)?{pre:fixed}:fixed}
return this.iterator('table',function(settings){settings.aaSortingFixed=$.extend(!0,{},set)})});_api_register(['columns().order()','column().order()'],function(dir){var that=this;if(!dir){return this.iterator('column',function(settings,idx){var sort=_fnSortFlatten(settings);for(var i=0,ien=sort.length;i<ien;i++){if(sort[i].col===idx){return sort[i].dir}}
return null},1)}else{return this.iterator('table',function(settings,i){settings.aaSorting=that[i].map(function(col){return[col,dir]})})}});_api_registerPlural('columns().orderable()','column().orderable()',function(directions){return this.iterator('column',function(settings,idx){var col=settings.aoColumns[idx];return directions?col.asSorting:col.bSortable},1)});_api_register('processing()',function(show){return this.iterator('table',function(ctx){_fnProcessingDisplay(ctx,show)})});_api_register('search()',function(input,regex,smart,caseInsen){var ctx=this.context;if(input===undefined){return ctx.length!==0?ctx[0].oPreviousSearch.search:undefined}
return this.iterator('table',function(settings){if(!settings.oFeatures.bFilter){return}
if(typeof regex==='object'){_fnFilterComplete(settings,$.extend(settings.oPreviousSearch,regex,{search:input}))}else{_fnFilterComplete(settings,$.extend(settings.oPreviousSearch,{search:input,regex:regex===null?!1:regex,smart:smart===null?!0:smart,caseInsensitive:caseInsen===null?!0:caseInsen}))}})});_api_register('search.fixed()',function(name,search){var ret=this.iterator(!0,'table',function(settings){var fixed=settings.searchFixed;if(!name){return Object.keys(fixed)}else if(search===undefined){return fixed[name]}else if(search===null){delete fixed[name]}else{fixed[name]=search}
return this});return name!==undefined&&search===undefined?ret[0]:ret});_api_registerPlural('columns().search()','column().search()',function(input,regex,smart,caseInsen){return this.iterator('column',function(settings,column){var preSearch=settings.aoPreSearchCols;if(input===undefined){return preSearch[column].search}
if(!settings.oFeatures.bFilter){return}
if(typeof regex==='object'){$.extend(preSearch[column],regex,{search:input})}else{$.extend(preSearch[column],{search:input,regex:regex===null?!1:regex,smart:smart===null?!0:smart,caseInsensitive:caseInsen===null?!0:caseInsen})}
_fnFilterComplete(settings,settings.oPreviousSearch)})});_api_register(['columns().search.fixed()','column().search.fixed()'],function(name,search){var ret=this.iterator(!0,'column',function(settings,colIdx){var fixed=settings.aoColumns[colIdx].searchFixed;if(!name){return Object.keys(fixed)}else if(search===undefined){return fixed[name]}else if(search===null){delete fixed[name]}else{fixed[name]=search}
return this});return name!==undefined&&search===undefined?ret[0]:ret});_api_register('state()',function(set,ignoreTime){if(!set){return this.context.length?this.context[0].oSavedState:null}
var setMutate=$.extend(!0,{},set);return this.iterator('table',function(settings){if(ignoreTime!==!1){setMutate.time=+new Date()+100}
_fnImplementState(settings,setMutate,function(){})})});_api_register('state.clear()',function(){return this.iterator('table',function(settings){settings.fnStateSaveCallback.call(settings.oInstance,settings,{})})});_api_register('state.loaded()',function(){return this.context.length?this.context[0].oLoadedState:null});_api_register('state.save()',function(){return this.iterator('table',function(settings){_fnSaveState(settings)})});DataTable.use=function(arg1,arg2){var module=typeof arg1==='string'?arg2:arg1;var type=typeof arg2==='string'?arg2:arg1;if(module===undefined&&typeof type==='string'){switch(type){case 'lib':case 'jq':return $;case 'win':return window;case 'datetime':return DataTable.DateTime;case 'luxon':return __luxon;case 'moment':return __moment;default:return null}}
if(type==='lib'||type==='jq'||(module&&module.fn&&module.fn.jquery)){$=module}else if(type=='win'||(module&&module.document)){window=module;document=module.document}else if(type==='datetime'||(module&&module.type==='DateTime')){DataTable.DateTime=module}else if(type==='luxon'||(module&&module.FixedOffsetZone)){__luxon=module}else if(type==='moment'||(module&&module.isMoment)){__moment=module}}
DataTable.factory=function(root,jq){var is=!1;if(root&&root.document){window=root;document=root.document}
if(jq&&jq.fn&&jq.fn.jquery){$=jq;is=!0}
return is}
DataTable.versionCheck=function(version,version2){var aThis=version2?version2.split('.'):DataTable.version.split('.');var aThat=version.split('.');var iThis,iThat;for(var i=0,iLen=aThat.length;i<iLen;i++){iThis=parseInt(aThis[i],10)||0;iThat=parseInt(aThat[i],10)||0;if(iThis===iThat){continue}
return iThis>iThat}
return!0};DataTable.isDataTable=function(table){var t=$(table).get(0);var is=!1;if(table instanceof DataTable.Api){return!0}
$.each(DataTable.settings,function(i,o){var head=o.nScrollHead?$('table',o.nScrollHead)[0]:null;var foot=o.nScrollFoot?$('table',o.nScrollFoot)[0]:null;if(o.nTable===t||head===t||foot===t){is=!0}});return is};DataTable.tables=function(visible){var api=!1;if($.isPlainObject(visible)){api=visible.api;visible=visible.visible}
var a=DataTable.settings.filter(function(o){return!visible||(visible&&$(o.nTable).is(':visible'))?!0:!1}).map(function(o){return o.nTable});return api?new _Api(a):a};DataTable.camelToHungarian=_fnCamelToHungarian;_api_register('$()',function(selector,opts){var
rows=this.rows(opts).nodes(),jqRows=$(rows);return $([].concat(jqRows.filter(selector).toArray(),jqRows.find(selector).toArray()))});$.each(['on','one','off'],function(i,key){_api_register(key+'()',function(){var args=Array.prototype.slice.call(arguments);args[0]=args[0].split(/\s/).map(function(e){return!e.match(/\.dt\b/)?e+'.dt':e}).join(' ');var inst=$(this.tables().nodes());inst[key].apply(inst,args);return this})});_api_register('clear()',function(){return this.iterator('table',function(settings){_fnClearTable(settings)})});_api_register('error()',function(msg){return this.iterator('table',function(settings){_fnLog(settings,0,msg)})});_api_register('settings()',function(){return new _Api(this.context,this.context)});_api_register('init()',function(){var ctx=this.context;return ctx.length?ctx[0].oInit:null});_api_register('data()',function(){return this.iterator('table',function(settings){return _pluck(settings.aoData,'_aData')}).flatten()});_api_register('trigger()',function(name,args,bubbles){return this.iterator('table',function(settings){return _fnCallbackFire(settings,null,name,args,bubbles)}).flatten()});_api_register('ready()',function(fn){var ctx=this.context;if(!fn){return ctx.length?(ctx[0]._bInitComplete||!1):null}
return this.tables().every(function(){if(this.context[0]._bInitComplete){fn.call(this)}else{this.on('init',function(){fn.call(this)})}})});_api_register('destroy()',function(remove){remove=remove||!1;return this.iterator('table',function(settings){var classes=settings.oClasses;var table=settings.nTable;var tbody=settings.nTBody;var thead=settings.nTHead;var tfoot=settings.nTFoot;var jqTable=$(table);var jqTbody=$(tbody);var jqWrapper=$(settings.nTableWrapper);var rows=settings.aoData.map(function(r){return r?r.nTr:null});var orderClasses=classes.order;settings.bDestroying=!0;_fnCallbackFire(settings,"aoDestroyCallback","destroy",[settings],!0);if(!remove){new _Api(settings).columns().visible(!0)}
jqWrapper.off('.DT').find(':not(tbody *)').off('.DT');$(window).off('.DT-'+settings.sInstance);if(table!=thead.parentNode){jqTable.children('thead').detach();jqTable.append(thead)}
if(tfoot&&table!=tfoot.parentNode){jqTable.children('tfoot').detach();jqTable.append(tfoot)}
settings.colgroup.remove();settings.aaSorting=[];settings.aaSortingFixed=[];_fnSortingClasses(settings);$('th, td',thead).removeClass(orderClasses.canAsc+' '+orderClasses.canDesc+' '+orderClasses.isAsc+' '+orderClasses.isDesc).css('width','');jqTbody.children().detach();jqTbody.append(rows);var orig=settings.nTableWrapper.parentNode;var insertBefore=settings.nTableWrapper.nextSibling;var removedMethod=remove?'remove':'detach';jqTable[removedMethod]();jqWrapper[removedMethod]();if(!remove&&orig){orig.insertBefore(table,insertBefore);jqTable.css('width',settings.sDestroyWidth).removeClass(classes.table)}
var idx=DataTable.settings.indexOf(settings);if(idx!==-1){DataTable.settings.splice(idx,1)}})});$.each(['column','row','cell'],function(i,type){_api_register(type+'s().every()',function(fn){var opts=this.selector.opts;var api=this;var inst;var counter=0;return this.iterator('every',function(settings,selectedIdx,tableIdx){inst=api[type](selectedIdx,opts);if(type==='cell'){fn.call(inst,inst[0][0].row,inst[0][0].column,tableIdx,counter)}else{fn.call(inst,selectedIdx,tableIdx,counter)}
counter++})})});_api_register('i18n()',function(token,def,plural){var ctx=this.context[0];var resolved=_fnGetObjectDataFn(token)(ctx.oLanguage);if(resolved===undefined){resolved=def}
if($.isPlainObject(resolved)){resolved=plural!==undefined&&resolved[plural]!==undefined?resolved[plural]:resolved._}
return typeof resolved==='string'?resolved.replace('%d',plural):resolved});DataTable.version="2.1.3";DataTable.settings=[];DataTable.models={};DataTable.models.oSearch={"caseInsensitive":!0,"search":"","regex":!1,"smart":!0,"return":!1};DataTable.models.oRow={"nTr":null,"anCells":null,"_aData":[],"_aSortData":null,"_aFilterData":null,"_sFilterRow":null,"src":null,"idx":-1,displayData:null};DataTable.models.oColumn={"idx":null,"aDataSort":null,"asSorting":null,"bSearchable":null,"bSortable":null,"bVisible":null,"_sManualType":null,"_bAttrSrc":!1,"fnCreatedCell":null,"fnGetData":null,"fnSetData":null,"mData":null,"mRender":null,"sClass":null,"sContentPadding":null,"sDefaultContent":null,"sName":null,"sSortDataType":'std',"sSortingClass":null,"sTitle":null,"sType":null,"sWidth":null,"sWidthOrig":null,maxLenString:null,searchFixed:null};DataTable.defaults={"aaData":null,"aaSorting":[[0,'asc']],"aaSortingFixed":[],"ajax":null,"aLengthMenu":[10,25,50,100],"aoColumns":null,"aoColumnDefs":null,"aoSearchCols":[],"bAutoWidth":!0,"bDeferRender":!0,"bDestroy":!1,"bFilter":!0,"bInfo":!0,"bLengthChange":!0,"bPaginate":!0,"bProcessing":!1,"bRetrieve":!1,"bScrollCollapse":!1,"bServerSide":!1,"bSort":!0,"bSortMulti":!0,"bSortCellsTop":null,"bSortClasses":!0,"bStateSave":!1,"fnCreatedRow":null,"fnDrawCallback":null,"fnFooterCallback":null,"fnFormatNumber":function(toFormat){return toFormat.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},"fnHeaderCallback":null,"fnInfoCallback":null,"fnInitComplete":null,"fnPreDrawCallback":null,"fnRowCallback":null,"fnStateLoadCallback":function(settings){try{return JSON.parse((settings.iStateDuration===-1?sessionStorage:localStorage).getItem('DataTables_'+settings.sInstance+'_'+location.pathname))}catch(e){return{}}},"fnStateLoadParams":null,"fnStateLoaded":null,"fnStateSaveCallback":function(settings,data){try{(settings.iStateDuration===-1?sessionStorage:localStorage).setItem('DataTables_'+settings.sInstance+'_'+location.pathname,JSON.stringify(data))}catch(e){}},"fnStateSaveParams":null,"iStateDuration":7200,"iDisplayLength":10,"iDisplayStart":0,"iTabIndex":0,"oClasses":{},"oLanguage":{"oAria":{"orderable":": Activate to sort","orderableReverse":": Activate to invert sorting","orderableRemove":": Activate to remove sorting",paginate:{first:'First',last:'Last',next:'Next',previous:'Previous',number:''}},"oPaginate":{"sFirst":"\u00AB","sLast":"\u00BB","sNext":"\u203A","sPrevious":"\u2039",},entries:{_:"entries",1:"entry"},"sEmptyTable":"No data available in table","sInfo":"Showing _START_ to _END_ of _TOTAL_ _ENTRIES-TOTAL_","sInfoEmpty":"Showing 0 to 0 of 0 _ENTRIES-TOTAL_","sInfoFiltered":"(filtered from _MAX_ total _ENTRIES-MAX_)","sInfoPostFix":"","sDecimal":"","sThousands":",","sLengthMenu":"_MENU_ _ENTRIES_ per page","sLoadingRecords":"Loading...","sProcessing":"","sSearch":"Search:","sSearchPlaceholder":"","sUrl":"","sZeroRecords":"No matching records found"},orderDescReverse:!0,"oSearch":$.extend({},DataTable.models.oSearch),layout:{topStart:'pageLength',topEnd:'search',bottomStart:'info',bottomEnd:'paging'},"sDom":null,"searchDelay":null,"sPaginationType":"","sScrollX":"","sScrollXInner":"","sScrollY":"","sServerMethod":"GET","renderer":null,"rowId":"DT_RowId","caption":null,iDeferLoading:null};_fnHungarianMap(DataTable.defaults);DataTable.defaults.column={"aDataSort":null,"iDataSort":-1,ariaTitle:'',"asSorting":['asc','desc',''],"bSearchable":!0,"bSortable":!0,"bVisible":!0,"fnCreatedCell":null,"mData":null,"mRender":null,"sCellType":"td","sClass":"","sContentPadding":"","sDefaultContent":null,"sName":"","sSortDataType":"std","sTitle":null,"sType":null,"sWidth":null};_fnHungarianMap(DataTable.defaults.column);DataTable.models.oSettings={"oFeatures":{"bAutoWidth":null,"bDeferRender":null,"bFilter":null,"bInfo":!0,"bLengthChange":!0,"bPaginate":null,"bProcessing":null,"bServerSide":null,"bSort":null,"bSortMulti":null,"bSortClasses":null,"bStateSave":null},"oScroll":{"bCollapse":null,"iBarWidth":0,"sX":null,"sXInner":null,"sY":null},"oLanguage":{"fnInfoCallback":null},"oBrowser":{"bScrollbarLeft":!1,"barWidth":0},"ajax":null,"aanFeatures":[],"aoData":[],"aiDisplay":[],"aiDisplayMaster":[],"aIds":{},"aoColumns":[],"aoHeader":[],"aoFooter":[],"oPreviousSearch":{},searchFixed:{},"aoPreSearchCols":[],"aaSorting":null,"aaSortingFixed":[],"sDestroyWidth":0,"aoRowCallback":[],"aoHeaderCallback":[],"aoFooterCallback":[],"aoDrawCallback":[],"aoRowCreatedCallback":[],"aoPreDrawCallback":[],"aoInitComplete":[],"aoStateSaveParams":[],"aoStateLoadParams":[],"aoStateLoaded":[],"sTableId":"","nTable":null,"nTHead":null,"nTFoot":null,"nTBody":null,"nTableWrapper":null,"bInitialised":!1,"aoOpenRows":[],"sDom":null,"searchDelay":null,"sPaginationType":"two_button",pagingControls:0,"iStateDuration":0,"aoStateSave":[],"aoStateLoad":[],"oSavedState":null,"oLoadedState":null,"bAjaxDataGet":!0,"jqXHR":null,"json":undefined,"oAjaxData":undefined,"sServerMethod":null,"fnFormatNumber":null,"aLengthMenu":null,"iDraw":0,"bDrawing":!1,"iDrawError":-1,"_iDisplayLength":10,"_iDisplayStart":0,"_iRecordsTotal":0,"_iRecordsDisplay":0,"oClasses":{},"bFiltered":!1,"bSorted":!1,"bSortCellsTop":null,"oInit":null,"aoDestroyCallback":[],"fnRecordsTotal":function(){return _fnDataSource(this)=='ssp'?this._iRecordsTotal*1:this.aiDisplayMaster.length},"fnRecordsDisplay":function(){return _fnDataSource(this)=='ssp'?this._iRecordsDisplay*1:this.aiDisplay.length},"fnDisplayEnd":function(){var
len=this._iDisplayLength,start=this._iDisplayStart,calc=start+len,records=this.aiDisplay.length,features=this.oFeatures,paginate=features.bPaginate;if(features.bServerSide){return paginate===!1||len===-1?start+records:Math.min(start+len,this._iRecordsDisplay)}else{return!paginate||calc>records||len===-1?records:calc}},"oInstance":null,"sInstance":null,"iTabIndex":0,"nScrollHead":null,"nScrollFoot":null,"aLastSort":[],"oPlugins":{},"rowIdFn":null,"rowId":null,caption:'',captionNode:null,colgroup:null,deferLoading:null};var extPagination=DataTable.ext.pager;$.extend(extPagination,{simple:function(){return['previous','next']},full:function(){return['first','previous','next','last']},numbers:function(){return['numbers']},simple_numbers:function(){return['previous','numbers','next']},full_numbers:function(){return['first','previous','numbers','next','last']},first_last:function(){return['first','last']},first_last_numbers:function(){return['first','numbers','last']},_numbers:_pagingNumbers,numbers_length:7});$.extend(!0,DataTable.ext.renderer,{pagingButton:{_:function(settings,buttonType,content,active,disabled){var classes=settings.oClasses.paging;var btnClasses=[classes.button];var btn;if(active){btnClasses.push(classes.active)}
if(disabled){btnClasses.push(classes.disabled)}
if(buttonType==='ellipsis'){btn=$('<span class="ellipsis"></span>').html(content)[0]}else{btn=$('<button>',{class:btnClasses.join(' '),role:'link',type:'button'}).html(content)}
return{display:btn,clicker:btn}}},pagingContainer:{_:function(settings,buttons){return buttons}}});var _filterString=function(stripHtml,normalize){return function(str){if(_empty(str)||typeof str!=='string'){return str}
str=str.replace(_re_new_lines," ");if(stripHtml){str=_stripHtml(str)}
if(normalize){str=_normalize(str,!1)}
return str}}
function __mld(dtLib,momentFn,luxonFn,dateFn,arg1){if(__moment){return dtLib[momentFn](arg1)}else if(__luxon){return dtLib[luxonFn](arg1)}
return dateFn?dtLib[dateFn](arg1):dtLib}
var __mlWarning=!1;var __luxon;var __moment;function resolveWindowLibs(){if(window.luxon&&!__luxon){__luxon=window.luxon}
if(window.moment&&!__moment){__moment=window.moment}}
function __mldObj(d,format,locale){var dt;resolveWindowLibs();if(__moment){dt=__moment.utc(d,format,locale,!0);if(!dt.isValid()){return null}}else if(__luxon){dt=format&&typeof d==='string'?__luxon.DateTime.fromFormat(d,format):__luxon.DateTime.fromISO(d);if(!dt.isValid){return null}
dt.setLocale(locale)}else if(!format){dt=new Date(d)}else{if(!__mlWarning){alert('DataTables warning: Formatted date without Moment.js or Luxon - https://datatables.net/tn/17')}
__mlWarning=!0}
return dt}
function __mlHelper(localeString){return function(from,to,locale,def){if(arguments.length===0){locale='en';to=null;from=null}else if(arguments.length===1){locale='en';to=from;from=null}else if(arguments.length===2){locale=to;to=from;from=null}
var typeName='datetime'+(to?'-'+to:'');if(!DataTable.ext.type.order[typeName]){DataTable.type(typeName,{detect:function(d){return d===typeName?typeName:!1},order:{pre:function(d){return d.valueOf()}},className:'dt-right'})}
return function(d,type){if(d===null||d===undefined){if(def==='--now'){var local=new Date();d=new Date(Date.UTC(local.getFullYear(),local.getMonth(),local.getDate(),local.getHours(),local.getMinutes(),local.getSeconds()))}else{d=''}}
if(type==='type'){return typeName}
if(d===''){return type!=='sort'?'':__mldObj('0000-01-01 00:00:00',null,locale)}
if(to!==null&&from===to&&type!=='sort'&&type!=='type'&&!(d instanceof Date)){return d}
var dt=__mldObj(d,from,locale);if(dt===null){return d}
if(type==='sort'){return dt}
var formatted=to===null?__mld(dt,'toDate','toJSDate','')[localeString]():__mld(dt,'format','toFormat','toISOString',to);return type==='display'?_escapeHtml(formatted):formatted}}}
var __thousands=',';var __decimal='.';if(window.Intl!==undefined){try{var num=new Intl.NumberFormat().formatToParts(100000.1);for(var i=0;i<num.length;i++){if(num[i].type==='group'){__thousands=num[i].value}else if(num[i].type==='decimal'){__decimal=num[i].value}}}catch(e){}}
DataTable.datetime=function(format,locale){var typeName='datetime-'+format;if(!locale){locale='en'}
if(!DataTable.ext.type.order[typeName]){DataTable.type(typeName,{detect:function(d){var dt=__mldObj(d,format,locale);return d===''||dt?typeName:!1},order:{pre:function(d){return __mldObj(d,format,locale)||0}},className:'dt-right'})}}
DataTable.render={date:__mlHelper('toLocaleDateString'),datetime:__mlHelper('toLocaleString'),time:__mlHelper('toLocaleTimeString'),number:function(thousands,decimal,precision,prefix,postfix){if(thousands===null||thousands===undefined){thousands=__thousands}
if(decimal===null||decimal===undefined){decimal=__decimal}
return{display:function(d){if(typeof d!=='number'&&typeof d!=='string'){return d}
if(d===''||d===null){return d}
var negative=d<0?'-':'';var flo=parseFloat(d);var abs=Math.abs(flo);if(abs>=100000000000||(abs<0.0001&&abs!==0)){var exp=flo.toExponential(precision).split(/e\+?/);return exp[0]+' x 10<sup>'+exp[1]+'</sup>'}
if(isNaN(flo)){return _escapeHtml(d)}
flo=flo.toFixed(precision);d=Math.abs(flo);var intPart=parseInt(d,10);var floatPart=precision?decimal+(d-intPart).toFixed(precision).substring(2):'';if(intPart===0&&parseFloat(floatPart)===0){negative=''}
return negative+(prefix||'')+intPart.toString().replace(/\B(?=(\d{3})+(?!\d))/g,thousands)+floatPart+(postfix||'')}}},text:function(){return{display:_escapeHtml,filter:_escapeHtml}}};var _extTypes=DataTable.ext.type;DataTable.type=function(name,prop,val){if(!prop){return{className:_extTypes.className[name],detect:_extTypes.detect.find(function(fn){return fn.name===name}),order:{pre:_extTypes.order[name+'-pre'],asc:_extTypes.order[name+'-asc'],desc:_extTypes.order[name+'-desc']},render:_extTypes.render[name],search:_extTypes.search[name]}}
var setProp=function(prop,propVal){_extTypes[prop][name]=propVal};var setDetect=function(detect){Object.defineProperty(detect,"name",{value:name});var idx=_extTypes.detect.findIndex(function(item){return item.name===name});if(idx===-1){_extTypes.detect.unshift(detect)}else{_extTypes.detect.splice(idx,1,detect)}};var setOrder=function(obj){_extTypes.order[name+'-pre']=obj.pre;_extTypes.order[name+'-asc']=obj.asc;_extTypes.order[name+'-desc']=obj.desc};if(val===undefined){val=prop;prop=null}
if(prop==='className'){setProp('className',val)}else if(prop==='detect'){setDetect(val)}else if(prop==='order'){setOrder(val)}else if(prop==='render'){setProp('render',val)}else if(prop==='search'){setProp('search',val)}else if(!prop){if(val.className){setProp('className',val.className)}
if(val.detect!==undefined){setDetect(val.detect)}
if(val.order){setOrder(val.order)}
if(val.render!==undefined){setProp('render',val.render)}
if(val.search!==undefined){setProp('search',val.search)}}}
DataTable.types=function(){return _extTypes.detect.map(function(fn){return fn.name})};var __diacriticSort=function(a,b){a=a.toString().toLowerCase();b=b.toString().toLowerCase();return a.localeCompare(b,navigator.languages[0]||navigator.language,{numeric:!0,ignorePunctuation:!0,})}
DataTable.type('string',{detect:function(){return'string'},order:{pre:function(a){return _empty(a)?'':typeof a==='string'?a.toLowerCase():!a.toString?'':a.toString()}},search:_filterString(!1,!0)});DataTable.type('string-utf8',{detect:{allOf:function(d){return!0},oneOf:function(d){return!_empty(d)&&navigator.languages&&typeof d==='string'&&d.match(/[^\x00-\x7F]/)}},order:{asc:__diacriticSort,desc:function(a,b){return __diacriticSort(a,b)*-1}},search:_filterString(!1,!0)});DataTable.type('html',{detect:{allOf:function(d){return _empty(d)||(typeof d==='string'&&d.indexOf('<')!==-1)},oneOf:function(d){return!_empty(d)&&typeof d==='string'&&d.indexOf('<')!==-1}},order:{pre:function(a){return _empty(a)?'':a.replace?_stripHtml(a).trim().toLowerCase():a+''}},search:_filterString(!0,!0)});DataTable.type('date',{className:'dt-type-date',detect:{allOf:function(d){if(d&&!(d instanceof Date)&&!_re_date.test(d)){return null}
var parsed=Date.parse(d);return(parsed!==null&&!isNaN(parsed))||_empty(d)},oneOf:function(d){return(d instanceof Date)||(typeof d==='string'&&_re_date.test(d))}},order:{pre:function(d){var ts=Date.parse(d);return isNaN(ts)?-Infinity:ts}}});DataTable.type('html-num-fmt',{className:'dt-type-numeric',detect:{allOf:function(d,settings){var decimal=settings.oLanguage.sDecimal;return _htmlNumeric(d,decimal,!0,!1)},oneOf:function(d,settings){var decimal=settings.oLanguage.sDecimal;return _htmlNumeric(d,decimal,!0,!1)}},order:{pre:function(d,s){var dp=s.oLanguage.sDecimal;return __numericReplace(d,dp,_re_html,_re_formatted_numeric)}},search:_filterString(!0,!0)});DataTable.type('html-num',{className:'dt-type-numeric',detect:{allOf:function(d,settings){var decimal=settings.oLanguage.sDecimal;return _htmlNumeric(d,decimal,!1,!0)},oneOf:function(d,settings){var decimal=settings.oLanguage.sDecimal;return _htmlNumeric(d,decimal,!1,!1)}},order:{pre:function(d,s){var dp=s.oLanguage.sDecimal;return __numericReplace(d,dp,_re_html)}},search:_filterString(!0,!0)});DataTable.type('num-fmt',{className:'dt-type-numeric',detect:{allOf:function(d,settings){var decimal=settings.oLanguage.sDecimal;return _isNumber(d,decimal,!0,!0)},oneOf:function(d,settings){var decimal=settings.oLanguage.sDecimal;return _isNumber(d,decimal,!0,!1)}},order:{pre:function(d,s){var dp=s.oLanguage.sDecimal;return __numericReplace(d,dp,_re_formatted_numeric)}}});DataTable.type('num',{className:'dt-type-numeric',detect:{allOf:function(d,settings){var decimal=settings.oLanguage.sDecimal;return _isNumber(d,decimal,!1,!0)},oneOf:function(d,settings){var decimal=settings.oLanguage.sDecimal;return _isNumber(d,decimal,!1,!1)}},order:{pre:function(d,s){var dp=s.oLanguage.sDecimal;return __numericReplace(d,dp)}}});var __numericReplace=function(d,decimalPlace,re1,re2){if(d!==0&&(!d||d==='-')){return-Infinity}
var type=typeof d;if(type==='number'||type==='bigint'){return d}
if(decimalPlace){d=_numToDecimal(d,decimalPlace)}
if(d.replace){if(re1){d=d.replace(re1,'')}
if(re2){d=d.replace(re2,'')}}
return d*1};$.extend(!0,DataTable.ext.renderer,{footer:{_:function(settings,cell,classes){cell.addClass(classes.tfoot.cell)}},header:{_:function(settings,cell,classes){cell.addClass(classes.thead.cell);if(!settings.oFeatures.bSort){cell.addClass(classes.order.none)}
var legacyTop=settings.bSortCellsTop;var headerRows=cell.closest('thead').find('tr');var rowIdx=cell.parent().index();if(cell.attr('data-dt-order')==='disable'||cell.parent().attr('data-dt-order')==='disable'||(legacyTop===!0&&rowIdx!==0)||(legacyTop===!1&&rowIdx!==headerRows.length-1)){return}
$(settings.nTable).on('order.dt.DT column-visibility.dt.DT',function(e,ctx){if(settings!==ctx){return}
var i;var orderClasses=classes.order;var columns=ctx.api.columns(cell);var col=settings.aoColumns[columns.flatten()[0]];var orderable=columns.orderable().includes(!0);var ariaType='';var indexes=columns.indexes();var sortDirs=columns.orderable(!0).flatten();var sorting=ctx.sortDetails;var orderedColumns=_pluck(sorting,'col');cell.removeClass(orderClasses.isAsc+' '+orderClasses.isDesc).toggleClass(orderClasses.none,!orderable).toggleClass(orderClasses.canAsc,orderable&&sortDirs.includes('asc')).toggleClass(orderClasses.canDesc,orderable&&sortDirs.includes('desc'));var isOrdering=!0;for(i=0;i<indexes.length;i++){if(!orderedColumns.includes(indexes[i])){isOrdering=!1}}
if(isOrdering){var orderDirs=columns.order();cell.addClass(orderDirs.includes('asc')?orderClasses.isAsc:''+orderDirs.includes('desc')?orderClasses.isDesc:'')}
var firstVis=-1;for(i=0;i<orderedColumns.length;i++){if(settings.aoColumns[orderedColumns[i]].bVisible){firstVis=orderedColumns[i];break}}
if(indexes[0]==firstVis){var firstSort=sorting[0];var sortOrder=col.asSorting;cell.attr('aria-sort',firstSort.dir==='asc'?'ascending':'descending');ariaType=!sortOrder[firstSort.index+1]?'Remove':'Reverse'}else{cell.removeAttr('aria-sort')}
cell.attr('aria-label',orderable?col.ariaTitle+ctx.api.i18n('oAria.orderable'+ariaType):col.ariaTitle);if(orderable){cell.find('.dt-column-title').attr('role','button');cell.attr('tabindex',0)}})}},layout:{_:function(settings,container,items){var classes=settings.oClasses.layout;var row=$('<div/>').attr('id',items.id||null).addClass(items.className||classes.row).appendTo(container);$.each(items,function(key,val){if(key==='id'||key==='className'){return}
var klass='';if(val.table){row.addClass(classes.tableRow);klass+=classes.tableCell+' '}
if(key==='start'){klass+=classes.start}else if(key==='end'){klass+=classes.end}else{klass+=classes.full}
$('<div/>').attr({id:val.id||null,"class":val.className?val.className:classes.cell+' '+klass}).append(val.contents).appendTo(row)})}}});DataTable.feature={};DataTable.feature.register=function(name,cb,legacy){DataTable.ext.features[name]=cb;if(legacy){_ext.feature.push({cFeature:legacy,fnInit:cb})}};function _divProp(el,prop,val){if(val){el[prop]=val}}
DataTable.feature.register('div',function(settings,opts){var n=$('<div>')[0];if(opts){_divProp(n,'className',opts.className);_divProp(n,'id',opts.id);_divProp(n,'innerHTML',opts.html);_divProp(n,'textContent',opts.text)}
return n});DataTable.feature.register('info',function(settings,opts){if(!settings.oFeatures.bInfo){return null}
var lang=settings.oLanguage,tid=settings.sTableId,n=$('<div/>',{'class':settings.oClasses.info.container,});opts=$.extend({callback:lang.fnInfoCallback,empty:lang.sInfoEmpty,postfix:lang.sInfoPostFix,search:lang.sInfoFiltered,text:lang.sInfo,},opts);settings.aoDrawCallback.push(function(s){_fnUpdateInfo(s,opts,n)});if(!settings._infoEl){n.attr({'aria-live':'polite',id:tid+'_info',role:'status'});$(settings.nTable).attr('aria-describedby',tid+'_info');settings._infoEl=n}
return n},'i');function _fnUpdateInfo(settings,opts,node){var
start=settings._iDisplayStart+1,end=settings.fnDisplayEnd(),max=settings.fnRecordsTotal(),total=settings.fnRecordsDisplay(),out=total?opts.text:opts.empty;if(total!==max){out+=' '+opts.search}
out+=opts.postfix;out=_fnMacros(settings,out);if(opts.callback){out=opts.callback.call(settings.oInstance,settings,start,end,max,total,out)}
node.html(out);_fnCallbackFire(settings,null,'info',[settings,node[0],out])}
var __searchCounter=0;DataTable.feature.register('search',function(settings,opts){if(!settings.oFeatures.bFilter){return null}
var classes=settings.oClasses.search;var tableId=settings.sTableId;var language=settings.oLanguage;var previousSearch=settings.oPreviousSearch;var input='<input type="search" class="'+classes.input+'"/>';opts=$.extend({placeholder:language.sSearchPlaceholder,processing:!1,text:language.sSearch},opts);if(opts.text.indexOf('_INPUT_')===-1){opts.text+='_INPUT_'}
opts.text=_fnMacros(settings,opts.text);var end=opts.text.match(/_INPUT_$/);var start=opts.text.match(/^_INPUT_/);var removed=opts.text.replace(/_INPUT_/,'');var str='<label>'+opts.text+'</label>';if(start){str='_INPUT_<label>'+removed+'</label>'}else if(end){str='<label>'+removed+'</label>_INPUT_'}
var filter=$('<div>').addClass(classes.container).append(str.replace(/_INPUT_/,input));filter.find('label').attr('for','dt-search-'+__searchCounter);filter.find('input').attr('id','dt-search-'+__searchCounter);__searchCounter++;var searchFn=function(event){var val=this.value;if(previousSearch.return&&event.key!=="Enter"){return}
if(val!=previousSearch.search){_fnProcessingRun(settings,opts.processing,function(){previousSearch.search=val;_fnFilterComplete(settings,previousSearch);settings._iDisplayStart=0;_fnDraw(settings)})}};var searchDelay=settings.searchDelay!==null?settings.searchDelay:0;var jqFilter=$('input',filter).val(previousSearch.search).attr('placeholder',opts.placeholder).on('keyup.DT search.DT input.DT paste.DT cut.DT',searchDelay?DataTable.util.debounce(searchFn,searchDelay):searchFn).on('mouseup.DT',function(e){setTimeout(function(){searchFn.call(jqFilter[0],e)},10)}).on('keypress.DT',function(e){if(e.keyCode==13){return!1}}).attr('aria-controls',tableId);$(settings.nTable).on('search.dt.DT',function(ev,s){if(settings===s&&jqFilter[0]!==document.activeElement){jqFilter.val(typeof previousSearch.search!=='function'?previousSearch.search:'')}});return filter},'f');DataTable.feature.register('paging',function(settings,opts){if(!settings.oFeatures.bPaginate){return null}
opts=$.extend({buttons:DataTable.ext.pager.numbers_length,type:settings.sPaginationType,boundaryNumbers:!0,firstLast:!0,previousNext:!0,numbers:!0},opts);var host=$('<div/>').addClass(settings.oClasses.paging.container+(opts.type?' paging_'+opts.type:'')).append('<nav>');var draw=function(){_pagingDraw(settings,host.children(),opts)};settings.aoDrawCallback.push(draw);$(settings.nTable).on('column-sizing.dt.DT',draw);return host},'p');function _pagingDynamic(opts){var out=[];if(opts.numbers){out.push('numbers')}
if(opts.previousNext){out.unshift('previous');out.push('next')}
if(opts.firstLast){out.unshift('first');out.push('last')}
return out}
function _pagingDraw(settings,host,opts){if(!settings._bInitComplete){return}
var plugin=opts.type?DataTable.ext.pager[opts.type]:_pagingDynamic,aria=settings.oLanguage.oAria.paginate||{},start=settings._iDisplayStart,len=settings._iDisplayLength,visRecords=settings.fnRecordsDisplay(),all=len===-1,page=all?0:Math.ceil(start/len),pages=all?1:Math.ceil(visRecords/len),buttons=plugin(opts).map(function(val){return val==='numbers'?_pagingNumbers(page,pages,opts.buttons,opts.boundaryNumbers):val}).flat();var buttonEls=[];for(var i=0;i<buttons.length;i++){var button=buttons[i];var btnInfo=_pagingButtonInfo(settings,button,page,pages);var btn=_fnRenderer(settings,'pagingButton')(settings,button,btnInfo.display,btnInfo.active,btnInfo.disabled);var ariaLabel=typeof button==='string'?aria[button]:aria.number?aria.number+(button+1):null;$(btn.clicker).attr({'aria-controls':settings.sTableId,'aria-disabled':btnInfo.disabled?'true':null,'aria-current':btnInfo.active?'page':null,'aria-label':ariaLabel,'data-dt-idx':button,'tabIndex':btnInfo.disabled?-1:settings.iTabIndex?settings.iTabIndex:null,});if(typeof button!=='number'){$(btn.clicker).addClass(button)}
_fnBindAction(btn.clicker,{action:button},function(e){e.preventDefault();_fnPageChange(settings,e.data.action,!0)});buttonEls.push(btn.display)}
var wrapped=_fnRenderer(settings,'pagingContainer')(settings,buttonEls);var activeEl=host.find(document.activeElement).data('dt-idx');host.empty().append(wrapped);if(activeEl!==undefined){host.find('[data-dt-idx='+activeEl+']').trigger('focus')}
if(buttonEls.length&&opts.buttons>1&&$(host).height()>=($(buttonEls[0]).outerHeight()*2)-10){_pagingDraw(settings,host,$.extend({},opts,{buttons:opts.buttons-2}))}}
function _pagingButtonInfo(settings,button,page,pages){var lang=settings.oLanguage.oPaginate;var o={display:'',active:!1,disabled:!1};switch(button){case 'ellipsis':o.display='&#x2026;';o.disabled=!0;break;case 'first':o.display=lang.sFirst;if(page===0){o.disabled=!0}
break;case 'previous':o.display=lang.sPrevious;if(page===0){o.disabled=!0}
break;case 'next':o.display=lang.sNext;if(pages===0||page===pages-1){o.disabled=!0}
break;case 'last':o.display=lang.sLast;if(pages===0||page===pages-1){o.disabled=!0}
break;default:if(typeof button==='number'){o.display=settings.fnFormatNumber(button+1);if(page===button){o.active=!0}}
break}
return o}
function _pagingNumbers(page,pages,buttons,addFirstLast){var
numbers=[],half=Math.floor(buttons/2),before=addFirstLast?2:1,after=addFirstLast?1:0;if(pages<=buttons){numbers=_range(0,pages)}else if(buttons===1){numbers=[page]}else if(buttons===3){if(page<=1){numbers=[0,1,'ellipsis']}else if(page>=pages-2){numbers=_range(pages-2,pages);numbers.unshift('ellipsis')}else{numbers=['ellipsis',page,'ellipsis']}}else if(page<=half){numbers=_range(0,buttons-before);numbers.push('ellipsis');if(addFirstLast){numbers.push(pages-1)}}else if(page>=pages-1-half){numbers=_range(pages-(buttons-before),pages);numbers.unshift('ellipsis');if(addFirstLast){numbers.unshift(0)}}else{numbers=_range(page-half+before,page+half-after);numbers.push('ellipsis');numbers.unshift('ellipsis');if(addFirstLast){numbers.push(pages-1);numbers.unshift(0)}}
return numbers}
var __lengthCounter=0;DataTable.feature.register('pageLength',function(settings,opts){var features=settings.oFeatures;if(!features.bPaginate||!features.bLengthChange){return null}
opts=$.extend({menu:settings.aLengthMenu,text:settings.oLanguage.sLengthMenu},opts);var classes=settings.oClasses.length,tableId=settings.sTableId,menu=opts.menu,lengths=[],language=[],i;if(Array.isArray(menu[0])){lengths=menu[0];language=menu[1]}else{for(i=0;i<menu.length;i++){if($.isPlainObject(menu[i])){lengths.push(menu[i].value);language.push(menu[i].label)}else{lengths.push(menu[i]);language.push(menu[i])}}}
var end=opts.text.match(/_MENU_$/);var start=opts.text.match(/^_MENU_/);var removed=opts.text.replace(/_MENU_/,'');var str='<label>'+opts.text+'</label>';if(start){str='_MENU_<label>'+removed+'</label>'}else if(end){str='<label>'+removed+'</label>_MENU_'}
var tmpId='tmp-'+(+new Date())
var div=$('<div/>').addClass(classes.container).append(str.replace('_MENU_','<span id="'+tmpId+'"></span>'));var textNodes=[];div.find('label')[0].childNodes.forEach(function(el){if(el.nodeType===Node.TEXT_NODE){textNodes.push({el:el,text:el.textContent})}})
var updateEntries=function(len){textNodes.forEach(function(node){node.el.textContent=_fnMacros(settings,node.text,len)})}
var select=$('<select/>',{'name':tableId+'_length','aria-controls':tableId,'class':classes.select});for(i=0;i<lengths.length;i++){select[0][i]=new Option(typeof language[i]==='number'?settings.fnFormatNumber(language[i]):language[i],lengths[i])}
div.find('label').attr('for','dt-length-'+__lengthCounter);select.attr('id','dt-length-'+__lengthCounter);__lengthCounter++;div.find('#'+tmpId).replaceWith(select);$('select',div).val(settings._iDisplayLength).on('change.DT',function(){_fnLengthChange(settings,$(this).val());_fnDraw(settings)});$(settings.nTable).on('length.dt.DT',function(e,s,len){if(settings===s){$('select',div).val(len);updateEntries(len)}});updateEntries(settings._iDisplayLength);return div},'l');$.fn.dataTable=DataTable;DataTable.$=$;$.fn.dataTableSettings=DataTable.settings;$.fn.dataTableExt=DataTable.ext;$.fn.DataTable=function(opts){return $(this).dataTable(opts).api()};$.each(DataTable,function(prop,val){$.fn.DataTable[prop]=val});return DataTable}));
/*! DataTables styling integration
 * © SpryMedia Ltd - datatables.net/license
 */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','datatables.net'],function($){return factory($,window,document)})}else if(typeof exports==='object'){var jq=require('jquery');var cjsRequires=function(root,$){if(!$.fn.dataTable){require('datatables.net')(root,$)}};if(typeof window==='undefined'){module.exports=function(root,$){if(!root){root=window}
if(!$){$=jq(root)}
cjsRequires(root,$);return factory($,root,root.document)}}else{cjsRequires(window,jq);module.exports=factory(jq,window,window.document)}}else{factory(jQuery,window,document)}}(function($,window,document){'use strict';var DataTable=$.fn.dataTable;return DataTable}));
/*! Responsive 3.0.2
 * © SpryMedia Ltd - datatables.net/license
 */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','datatables.net'],function($){return factory($,window,document)})}else if(typeof exports==='object'){var jq=require('jquery');var cjsRequires=function(root,$){if(!$.fn.dataTable){require('datatables.net')(root,$)}};if(typeof window==='undefined'){module.exports=function(root,$){if(!root){root=window}
if(!$){$=jq(root)}
cjsRequires(root,$);return factory($,root,root.document)}}else{cjsRequires(window,jq);module.exports=factory(jq,window,window.document)}}else{factory(jQuery,window,document)}}(function($,window,document){'use strict';var DataTable=$.fn.dataTable;var Responsive=function(settings,opts){if(!DataTable.versionCheck||!DataTable.versionCheck('2')){throw 'DataTables Responsive requires DataTables 2 or newer'}
this.s={childNodeStore:{},columns:[],current:[],dt:new DataTable.Api(settings)};if(this.s.dt.settings()[0].responsive){return}
if(opts&&typeof opts.details==='string'){opts.details={type:opts.details}}else if(opts&&opts.details===!1){opts.details={type:!1}}else if(opts&&opts.details===!0){opts.details={type:'inline'}}
this.c=$.extend(!0,{},Responsive.defaults,DataTable.defaults.responsive,opts);settings.responsive=this;this._constructor()};$.extend(Responsive.prototype,{_constructor:function(){var that=this;var dt=this.s.dt;var oldWindowWidth=$(window).innerWidth();dt.settings()[0]._responsive=this;$(window).on('orientationchange.dtr',DataTable.util.throttle(function(){var width=$(window).innerWidth();if(width!==oldWindowWidth){that._resize();oldWindowWidth=width}}));dt.on('row-created.dtr',function(e,tr,data,idx){if($.inArray(!1,that.s.current)!==-1){$('>td, >th',tr).each(function(i){var idx=dt.column.index('toData',i);if(that.s.current[idx]===!1){$(this).css('display','none').addClass('dtr-hidden')}})}});dt.on('destroy.dtr',function(){dt.off('.dtr');$(dt.table().body()).off('.dtr');$(window).off('resize.dtr orientationchange.dtr');dt.cells('.dtr-control').nodes().to$().removeClass('dtr-control');$(dt.table().node()).removeClass('dtr-inline collapsed');$.each(that.s.current,function(i,val){if(val===!1){that._setColumnVis(i,!0)}})});this.c.breakpoints.sort(function(a,b){return a.width<b.width?1:a.width>b.width?-1:0});this._classLogic();this._resizeAuto();var details=this.c.details;if(details.type!==!1){that._detailsInit();dt.on('column-visibility.dtr',function(){if(that._timer){clearTimeout(that._timer)}
that._timer=setTimeout(function(){that._timer=null;that._classLogic();that._resizeAuto();that._resize(!0);that._redrawChildren()},100)});dt.on('draw.dtr',function(){that._redrawChildren()});$(dt.table().node()).addClass('dtr-'+details.type)}
dt.on('column-reorder.dtr',function(e,settings,details){that._classLogic();that._resizeAuto();that._resize(!0)});dt.on('column-sizing.dtr',function(){that._resizeAuto();that._resize()});dt.on('column-calc.dt',function(e,d){var curr=that.s.current;for(var i=0;i<curr.length;i++){var idx=d.visible.indexOf(i);if(curr[i]===!1&&idx>=0){d.visible.splice(idx,1)}}});dt.on('preXhr.dtr',function(){var rowIds=[];dt.rows().every(function(){if(this.child.isShown()){rowIds.push(this.id(!0))}});dt.one('draw.dtr',function(){that._resizeAuto();that._resize();dt.rows(rowIds).every(function(){that._detailsDisplay(this,!1)})})});dt.on('draw.dtr',function(){that._controlClass()}).on('init.dtr',function(e,settings,details){if(e.namespace!=='dt'){return}
that._resizeAuto();that._resize()});this._resize()},_colGroupAttach:function(colGroup,colEls,idx){var found=null;if(colEls[idx].get(0).parentNode===colGroup[0]){return}
for(var i=idx+1;i<colEls.length;i++){if(colGroup[0]===colEls[i].get(0).parentNode){found=i;break}}
if(found!==null){colEls[idx].insertBefore(colEls[found][0])}else{colGroup.append(colEls[idx])}},_childNodes:function(dt,row,col){var name=row+'-'+col;if(this.s.childNodeStore[name]){return this.s.childNodeStore[name]}
var nodes=[];var children=dt.cell(row,col).node().childNodes;for(var i=0,ien=children.length;i<ien;i++){nodes.push(children[i])}
this.s.childNodeStore[name]=nodes;return nodes},_childNodesRestore:function(dt,row,col){var name=row+'-'+col;if(!this.s.childNodeStore[name]){return}
var node=dt.cell(row,col).node();var store=this.s.childNodeStore[name];if(store.length>0){var parent=store[0].parentNode;var parentChildren=parent.childNodes;var a=[];for(var i=0,ien=parentChildren.length;i<ien;i++){a.push(parentChildren[i])}
for(var j=0,jen=a.length;j<jen;j++){node.appendChild(a[j])}}
this.s.childNodeStore[name]=undefined},_columnsVisiblity:function(breakpoint){var dt=this.s.dt;var columns=this.s.columns;var i,ien;var order=columns.map(function(col,idx){return{columnIdx:idx,priority:col.priority}}).sort(function(a,b){if(a.priority!==b.priority){return a.priority-b.priority}
return a.columnIdx-b.columnIdx});var display=$.map(columns,function(col,i){if(dt.column(i).visible()===!1){return'not-visible'}
return col.auto&&col.minWidth===null?!1:col.auto===!0?'-':$.inArray(breakpoint,col.includeIn)!==-1});var requiredWidth=0;for(i=0,ien=display.length;i<ien;i++){if(display[i]===!0){requiredWidth+=columns[i].minWidth}}
var scrolling=dt.settings()[0].oScroll;var bar=scrolling.sY||scrolling.sX?scrolling.iBarWidth:0;var widthAvailable=dt.table().container().offsetWidth-bar;var usedWidth=widthAvailable-requiredWidth;for(i=0,ien=display.length;i<ien;i++){if(columns[i].control){usedWidth-=columns[i].minWidth}}
var empty=!1;for(i=0,ien=order.length;i<ien;i++){var colIdx=order[i].columnIdx;if(display[colIdx]==='-'&&!columns[colIdx].control&&columns[colIdx].minWidth){if(empty||usedWidth-columns[colIdx].minWidth<0){empty=!0;display[colIdx]=!1}else{display[colIdx]=!0}
usedWidth-=columns[colIdx].minWidth}}
var showControl=!1;for(i=0,ien=columns.length;i<ien;i++){if(!columns[i].control&&!columns[i].never&&display[i]===!1){showControl=!0;break}}
for(i=0,ien=columns.length;i<ien;i++){if(columns[i].control){display[i]=showControl}
if(display[i]==='not-visible'){display[i]=!1}}
if($.inArray(!0,display)===-1){display[0]=!0}
return display},_classLogic:function(){var that=this;var breakpoints=this.c.breakpoints;var dt=this.s.dt;var columns=dt.columns().eq(0).map(function(i){var column=this.column(i);var className=column.header().className;var priority=column.init().responsivePriority;var dataPriority=column.header().getAttribute('data-priority');if(priority===undefined){priority=dataPriority===undefined||dataPriority===null?10000:dataPriority*1}
return{className:className,includeIn:[],auto:!1,control:!1,never:className.match(/\b(dtr\-)?never\b/)?!0:!1,priority:priority}});var add=function(colIdx,name){var includeIn=columns[colIdx].includeIn;if($.inArray(name,includeIn)===-1){includeIn.push(name)}};var column=function(colIdx,name,operator,matched){var size,i,ien;if(!operator){columns[colIdx].includeIn.push(name)}else if(operator==='max-'){size=that._find(name).width;for(i=0,ien=breakpoints.length;i<ien;i++){if(breakpoints[i].width<=size){add(colIdx,breakpoints[i].name)}}}else if(operator==='min-'){size=that._find(name).width;for(i=0,ien=breakpoints.length;i<ien;i++){if(breakpoints[i].width>=size){add(colIdx,breakpoints[i].name)}}}else if(operator==='not-'){for(i=0,ien=breakpoints.length;i<ien;i++){if(breakpoints[i].name.indexOf(matched)===-1){add(colIdx,breakpoints[i].name)}}}};columns.each(function(col,i){var classNames=col.className.split(' ');var hasClass=!1;for(var k=0,ken=classNames.length;k<ken;k++){var className=classNames[k].trim();if(className==='all'||className==='dtr-all'){hasClass=!0;col.includeIn=$.map(breakpoints,function(a){return a.name});return}else if(className==='none'||className==='dtr-none'||col.never){hasClass=!0;return}else if(className==='control'||className==='dtr-control'){hasClass=!0;col.control=!0;return}
$.each(breakpoints,function(j,breakpoint){var brokenPoint=breakpoint.name.split('-');var re=new RegExp('(min\\-|max\\-|not\\-)?('+brokenPoint[0]+')(\\-[_a-zA-Z0-9])?');var match=className.match(re);if(match){hasClass=!0;if(match[2]===brokenPoint[0]&&match[3]==='-'+brokenPoint[1]){column(i,breakpoint.name,match[1],match[2]+match[3])}else if(match[2]===brokenPoint[0]&&!match[3]){column(i,breakpoint.name,match[1],match[2])}}})}
if(!hasClass){col.auto=!0}});this.s.columns=columns},_controlClass:function(){if(this.c.details.type==='inline'){var dt=this.s.dt;var columnsVis=this.s.current;var firstVisible=$.inArray(!0,columnsVis);dt.cells(null,function(idx){return idx!==firstVisible},{page:'current'}).nodes().to$().filter('.dtr-control').removeClass('dtr-control');dt.cells(null,firstVisible,{page:'current'}).nodes().to$().addClass('dtr-control')}},_detailsDisplay:function(row,update){var that=this;var dt=this.s.dt;var details=this.c.details;var event=function(res){$(row.node()).toggleClass('dtr-expanded',res!==!1);$(dt.table().node()).triggerHandler('responsive-display.dt',[dt,row,res,update])};if(details&&details.type!==!1){var renderer=typeof details.renderer==='string'?Responsive.renderer[details.renderer]():details.renderer;var res=details.display(row,update,function(){return renderer.call(that,dt,row[0][0],that._detailsObj(row[0]))},function(){event(!1)});if(typeof res==='boolean'){event(res)}}},_detailsInit:function(){var that=this;var dt=this.s.dt;var details=this.c.details;if(details.type==='inline'){details.target='td.dtr-control, th.dtr-control'}
dt.on('draw.dtr',function(){that._tabIndexes()});that._tabIndexes();$(dt.table().body()).on('keyup.dtr','td, th',function(e){if(e.keyCode===13&&$(this).data('dtr-keyboard')){$(this).click()}});var target=details.target;var selector=typeof target==='string'?target:'td, th';if(target!==undefined||target!==null){$(dt.table().body()).on('click.dtr mousedown.dtr mouseup.dtr',selector,function(e){if(!$(dt.table().node()).hasClass('collapsed')){return}
if($.inArray($(this).closest('tr').get(0),dt.rows().nodes().toArray())===-1){return}
if(typeof target==='number'){var targetIdx=target<0?dt.columns().eq(0).length+target:target;if(dt.cell(this).index().column!==targetIdx){return}}
var row=dt.row($(this).closest('tr'));if(e.type==='click'){that._detailsDisplay(row,!1)}else if(e.type==='mousedown'){$(this).css('outline','none')}else if(e.type==='mouseup'){$(this).trigger('blur').css('outline','')}})}},_detailsObj:function(rowIdx){var that=this;var dt=this.s.dt;return $.map(this.s.columns,function(col,i){if(col.never||col.control){return}
var dtCol=dt.settings()[0].aoColumns[i];return{className:dtCol.sClass,columnIndex:i,data:dt.cell(rowIdx,i).render(that.c.orthogonal),hidden:dt.column(i).visible()&&!that.s.current[i],rowIndex:rowIdx,title:dt.column(i).title()}})},_find:function(name){var breakpoints=this.c.breakpoints;for(var i=0,ien=breakpoints.length;i<ien;i++){if(breakpoints[i].name===name){return breakpoints[i]}}},_redrawChildren:function(){var that=this;var dt=this.s.dt;dt.rows({page:'current'}).iterator('row',function(settings,idx){that._detailsDisplay(dt.row(idx),!0)})},_resize:function(forceRedraw){var that=this;var dt=this.s.dt;var width=$(window).innerWidth();var breakpoints=this.c.breakpoints;var breakpoint=breakpoints[0].name;var columns=this.s.columns;var i,ien;var oldVis=this.s.current.slice();for(i=breakpoints.length-1;i>=0;i--){if(width<=breakpoints[i].width){breakpoint=breakpoints[i].name;break}}
var columnsVis=this._columnsVisiblity(breakpoint);this.s.current=columnsVis;var collapsedClass=!1;for(i=0,ien=columns.length;i<ien;i++){if(columnsVis[i]===!1&&!columns[i].never&&!columns[i].control&&!dt.column(i).visible()===!1){collapsedClass=!0;break}}
$(dt.table().node()).toggleClass('collapsed',collapsedClass);var changed=!1;var visible=0;var dtSettings=dt.settings()[0];var colGroup=$(dt.table().node()).children('colgroup');var colEls=dtSettings.aoColumns.map(function(col){return col.colEl});dt.columns().eq(0).each(function(colIdx,i){if(!dt.column(colIdx).visible()){return}
if(columnsVis[i]===!0){visible++}
if(forceRedraw||columnsVis[i]!==oldVis[i]){changed=!0;that._setColumnVis(colIdx,columnsVis[i])}
if(!columnsVis[i]){colEls[i].detach()}else{that._colGroupAttach(colGroup,colEls,i)}});if(changed){dt.columns.adjust();this._redrawChildren();$(dt.table().node()).trigger('responsive-resize.dt',[dt,this._responsiveOnlyHidden()]);if(dt.page.info().recordsDisplay===0){$('td',dt.table().body()).eq(0).attr('colspan',visible)}}
that._controlClass()},_resizeAuto:function(){var dt=this.s.dt;var columns=this.s.columns;var that=this;var visibleColumns=dt.columns().indexes().filter(function(idx){return dt.column(idx).visible()});if(!this.c.auto){return}
if($.inArray(!0,$.map(columns,function(c){return c.auto}))===-1){return}
var clonedTable=dt.table().node().cloneNode(!1);var clonedHeader=$(dt.table().header().cloneNode(!1)).appendTo(clonedTable);var clonedFooter=$(dt.table().footer().cloneNode(!1)).appendTo(clonedTable);var clonedBody=$(dt.table().body()).clone(!1,!1).empty().appendTo(clonedTable);clonedTable.style.width='auto';dt.table().header.structure(visibleColumns).forEach((row)=>{var cells=row.filter(function(el){return el?!0:!1}).map(function(el){return $(el.cell).clone(!1).css('display','table-cell').css('width','auto').css('min-width',0)});$('<tr/>').append(cells).appendTo(clonedHeader)});var emptyRow=$('<tr/>').appendTo(clonedBody);for(var i=0;i<visibleColumns.count();i++){emptyRow.append('<td/>')}
dt.rows({page:'current'}).every(function(rowIdx){var node=this.node();if(!node){return}
var tr=node.cloneNode(!1);dt.cells(rowIdx,visibleColumns).every(function(rowIdx2,colIdx){var store=that.s.childNodeStore[rowIdx+'-'+colIdx];if(store){$(this.node().cloneNode(!1)).append($(store).clone()).appendTo(tr)}else{$(this.node()).clone(!1).appendTo(tr)}});clonedBody.append(tr)});clonedBody.find('th, td').css('display','');dt.table().footer.structure(visibleColumns).forEach((row)=>{var cells=row.filter(function(el){return el?!0:!1}).map(function(el){return $(el.cell).clone(!1).css('display','table-cell').css('width','auto').css('min-width',0)});$('<tr/>').append(cells).appendTo(clonedFooter)});if(this.c.details.type==='inline'){$(clonedTable).addClass('dtr-inline collapsed')}
$(clonedTable).find('[name]').removeAttr('name');$(clonedTable).css('position','relative');var inserted=$('<div/>').css({width:1,height:1,overflow:'hidden',clear:'both'}).append(clonedTable);inserted.insertBefore(dt.table().node());emptyRow.children().each(function(i){var idx=dt.column.index('fromVisible',i);columns[idx].minWidth=this.offsetWidth||0});inserted.remove()},_responsiveOnlyHidden:function(){var dt=this.s.dt;return $.map(this.s.current,function(v,i){if(dt.column(i).visible()===!1){return!0}
return v})},_setColumnVis:function(col,showHide){var that=this;var dt=this.s.dt;var display=showHide?'':'none';this._setHeaderVis(col,showHide,dt.table().header.structure());this._setHeaderVis(col,showHide,dt.table().footer.structure());dt.column(col).nodes().to$().css('display',display).toggleClass('dtr-hidden',!showHide);if(!$.isEmptyObject(this.s.childNodeStore)){dt.cells(null,col).indexes().each(function(idx){that._childNodesRestore(dt,idx.row,idx.column)})}},_setHeaderVis:function(col,showHide,structure){var that=this;var display=showHide?'':'none';structure.forEach(function(row){if(row[col]){$(row[col].cell).css('display',display).toggleClass('dtr-hidden',!showHide)}else{var search=col;while(search>=0){if(row[search]){row[search].cell.colSpan=that._colspan(row,search);break}
search--}}})},_colspan:function(row,idx){var colspan=1;for(var col=idx+1;col<row.length;col++){if(row[col]===null&&this.s.current[col]){colspan++}else if(row[col]){break}}
return colspan},_tabIndexes:function(){var dt=this.s.dt;var cells=dt.cells({page:'current'}).nodes().to$();var ctx=dt.settings()[0];var target=this.c.details.target;cells.filter('[data-dtr-keyboard]').removeData('[data-dtr-keyboard]');if(typeof target==='number'){dt.cells(null,target,{page:'current'}).nodes().to$().attr('tabIndex',ctx.iTabIndex).data('dtr-keyboard',1)}else{if(target==='td:first-child, th:first-child'){target='>td:first-child, >th:first-child'}
$(target,dt.rows({page:'current'}).nodes()).attr('tabIndex',ctx.iTabIndex).data('dtr-keyboard',1)}}});Responsive.breakpoints=[{name:'desktop',width:Infinity},{name:'tablet-l',width:1024},{name:'tablet-p',width:768},{name:'mobile-l',width:480},{name:'mobile-p',width:320}];Responsive.display={childRow:function(row,update,render){var rowNode=$(row.node());if(update){if(rowNode.hasClass('dtr-expanded')){row.child(render(),'child').show();return!0}}else{if(!rowNode.hasClass('dtr-expanded')){var rendered=render();if(rendered===!1){return!1}
row.child(rendered,'child').show();return!0}else{row.child(!1);return!1}}},childRowImmediate:function(row,update,render){var rowNode=$(row.node());if((!update&&rowNode.hasClass('dtr-expanded'))||!row.responsive.hasHidden()){row.child(!1);return!1}else{var rendered=render();if(rendered===!1){return!1}
row.child(rendered,'child').show();return!0}},modal:function(options){return function(row,update,render,closeCallback){var modal;var rendered=render();if(rendered===!1){return!1}
if(!update){var close=function(){modal.remove();$(document).off('keypress.dtr');$(row.node()).removeClass('dtr-expanded');closeCallback()};modal=$('<div class="dtr-modal"/>').append($('<div class="dtr-modal-display"/>').append($('<div class="dtr-modal-content"/>').data('dtr-row-idx',row.index()).append(rendered)).append($('<div class="dtr-modal-close">&times;</div>').click(function(){close()}))).append($('<div class="dtr-modal-background"/>').click(function(){close()})).appendTo('body');$(row.node()).addClass('dtr-expanded');$(document).on('keyup.dtr',function(e){if(e.keyCode===27){e.stopPropagation();close()}})}else{modal=$('div.dtr-modal-content');if(modal.length&&row.index()===modal.data('dtr-row-idx')){modal.empty().append(rendered)}else{return null}}
if(options&&options.header){$('div.dtr-modal-content').prepend('<h2>'+options.header(row)+'</h2>')}
return!0}}};Responsive.renderer={listHiddenNodes:function(){return function(api,rowIdx,columns){var that=this;var ul=$('<ul data-dtr-index="'+rowIdx+'" class="dtr-details"/>');var found=!1;$.each(columns,function(i,col){if(col.hidden){var klass=col.className?'class="'+col.className+'"':'';$('<li '+klass+' data-dtr-index="'+col.columnIndex+'" data-dt-row="'+col.rowIndex+'" data-dt-column="'+col.columnIndex+'">'+'<span class="dtr-title">'+col.title+'</span> '+'</li>').append($('<span class="dtr-data"/>').append(that._childNodes(api,col.rowIndex,col.columnIndex))).appendTo(ul);found=!0}});return found?ul:!1}},listHidden:function(){return function(api,rowIdx,columns){var data=$.map(columns,function(col){var klass=col.className?'class="'+col.className+'"':'';return col.hidden?'<li '+klass+' data-dtr-index="'+col.columnIndex+'" data-dt-row="'+col.rowIndex+'" data-dt-column="'+col.columnIndex+'">'+'<span class="dtr-title">'+col.title+'</span> '+'<span class="dtr-data">'+col.data+'</span>'+'</li>':''}).join('');return data?$('<ul data-dtr-index="'+rowIdx+'" class="dtr-details"/>').append(data):!1}},tableAll:function(options){options=$.extend({tableClass:''},options);return function(api,rowIdx,columns){var data=$.map(columns,function(col){var klass=col.className?'class="'+col.className+'"':'';return('<tr '+klass+' data-dt-row="'+col.rowIndex+'" data-dt-column="'+col.columnIndex+'">'+'<td>'+col.title+':'+'</td> '+'<td>'+col.data+'</td>'+'</tr>')}).join('');return $('<table class="'+options.tableClass+' dtr-details" width="100%"/>').append(data)}}};Responsive.defaults={breakpoints:Responsive.breakpoints,auto:!0,details:{display:Responsive.display.childRow,renderer:Responsive.renderer.listHidden(),target:0,type:'inline'},orthogonal:'display'};var Api=$.fn.dataTable.Api;Api.register('responsive()',function(){return this});Api.register('responsive.index()',function(li){li=$(li);return{column:li.data('dtr-index'),row:li.parent().data('dtr-index')}});Api.register('responsive.rebuild()',function(){return this.iterator('table',function(ctx){if(ctx._responsive){ctx._responsive._classLogic()}})});Api.register('responsive.recalc()',function(){return this.iterator('table',function(ctx){if(ctx._responsive){ctx._responsive._resizeAuto();ctx._responsive._resize()}})});Api.register('responsive.hasHidden()',function(){var ctx=this.context[0];return ctx._responsive?$.inArray(!1,ctx._responsive._responsiveOnlyHidden())!==-1:!1});Api.registerPlural('columns().responsiveHidden()','column().responsiveHidden()',function(){return this.iterator('column',function(settings,column){return settings._responsive?settings._responsive._responsiveOnlyHidden()[column]:!1},1)});Responsive.version='3.0.2';$.fn.dataTable.Responsive=Responsive;$.fn.DataTable.Responsive=Responsive;$(document).on('preInit.dt.dtr',function(e,settings,json){if(e.namespace!=='dt'){return}
if($(settings.nTable).hasClass('responsive')||$(settings.nTable).hasClass('dt-responsive')||settings.oInit.responsive||DataTable.defaults.responsive){var init=settings.oInit.responsive;if(init!==!1){new Responsive(settings,$.isPlainObject(init)?init:{})}}});return DataTable}));
/*! DataTables styling wrapper for Responsive
 * © SpryMedia Ltd - datatables.net/license
 */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','datatables.net-dt','datatables.net-responsive'],function($){return factory($,window,document)})}else if(typeof exports==='object'){var jq=require('jquery');var cjsRequires=function(root,$){if(!$.fn.dataTable){require('datatables.net-dt')(root,$)}
if(!$.fn.dataTable.Responsive){require('datatables.net-responsive')(root,$)}};if(typeof window==='undefined'){module.exports=function(root,$){if(!root){root=window}
if(!$){$=jq(root)}
cjsRequires(root,$);return factory($,root,root.document)}}else{cjsRequires(window,jq);module.exports=factory(jq,window,window.document)}}else{factory(jQuery,window,document)}}(function($,window,document){'use strict';var DataTable=$.fn.dataTable;return DataTable}));
/*! SearchBuilder 1.7.1
 * ©SpryMedia Ltd - datatables.net/license/mit
 */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','datatables.net'],function($){return factory($,window,document)})}else if(typeof exports==='object'){var jq=require('jquery');var cjsRequires=function(root,$){if(!$.fn.dataTable){require('datatables.net')(root,$)}};if(typeof window==='undefined'){module.exports=function(root,$){if(!root){root=window}
if(!$){$=jq(root)}
cjsRequires(root,$);return factory($,root,root.document)}}else{cjsRequires(window,jq);module.exports=factory(jq,window,window.document)}}else{factory(jQuery,window,document)}}(function($,window,document){'use strict';var DataTable=$.fn.dataTable;(function(){'use strict';var $$3;var dataTable$3;function moment(){return window.moment}
function luxon(){return window.luxon}
function setJQuery$2(jq){$$3=jq;dataTable$3=jq.fn.dataTable}
var Criteria=(function(){function Criteria(table,opts,topGroup,index,depth,serverData,liveSearch){if(index===void 0){index=0}
if(depth===void 0){depth=1}
if(serverData===void 0){serverData=undefined}
if(liveSearch===void 0){liveSearch=!1}
var _this=this;if(!dataTable$3||!dataTable$3.versionCheck||!dataTable$3.versionCheck('1.10.0')){throw new Error('SearchPane requires DataTables 1.10 or newer')}
this.classes=$$3.extend(!0,{},Criteria.classes);this.c=$$3.extend(!0,{},Criteria.defaults,$$3.fn.dataTable.ext.searchBuilder,opts);var i18n=this.c.i18n;this.s={condition:undefined,conditions:{},data:undefined,dataIdx:-1,dataPoints:[],dateFormat:!1,depth:depth,dt:table,filled:!1,index:index,liveSearch:liveSearch,origData:undefined,preventRedraw:!1,serverData:serverData,topGroup:topGroup,type:'',value:[]};this.dom={buttons:$$3('<div/>').addClass(this.classes.buttonContainer),condition:$$3('<select disabled/>').addClass(this.classes.condition).addClass(this.classes.dropDown).addClass(this.classes.italic).attr('autocomplete','hacking'),conditionTitle:$$3('<option value="" disabled selected hidden/>').html(this.s.dt.i18n('searchBuilder.condition',i18n.condition)),container:$$3('<div/>').addClass(this.classes.container),data:$$3('<select/>').addClass(this.classes.data).addClass(this.classes.dropDown).addClass(this.classes.italic),dataTitle:$$3('<option value="" disabled selected hidden/>').html(this.s.dt.i18n('searchBuilder.data',i18n.data)),defaultValue:$$3('<select disabled/>').addClass(this.classes.value).addClass(this.classes.dropDown).addClass(this.classes.select).addClass(this.classes.italic),"delete":$$3('<button/>').html(this.s.dt.i18n('searchBuilder.delete',i18n["delete"])).addClass(this.classes["delete"]).addClass(this.classes.button).attr('title',this.s.dt.i18n('searchBuilder.deleteTitle',i18n.deleteTitle)).attr('type','button'),inputCont:$$3('<div/>').addClass(this.classes.inputCont),left:$$3('<button/>').html(this.s.dt.i18n('searchBuilder.left',i18n.left)).addClass(this.classes.left).addClass(this.classes.button).attr('title',this.s.dt.i18n('searchBuilder.leftTitle',i18n.leftTitle)).attr('type','button'),right:$$3('<button/>').html(this.s.dt.i18n('searchBuilder.right',i18n.right)).addClass(this.classes.right).addClass(this.classes.button).attr('title',this.s.dt.i18n('searchBuilder.rightTitle',i18n.rightTitle)).attr('type','button'),value:[$$3('<select disabled/>').addClass(this.classes.value).addClass(this.classes.dropDown).addClass(this.classes.italic).addClass(this.classes.select)],valueTitle:$$3('<option value="--valueTitle--" disabled selected hidden/>').html(this.s.dt.i18n('searchBuilder.value',i18n.value))};if(this.c.greyscale){this.dom.data.addClass(this.classes.greyscale);this.dom.condition.addClass(this.classes.greyscale);this.dom.defaultValue.addClass(this.classes.greyscale);for(var _i=0,_a=this.dom.value;_i<_a.length;_i++){var val=_a[_i];val.addClass(this.classes.greyscale)}}
$$3(window).on('resize.dtsb',dataTable$3.util.throttle(function(){_this.s.topGroup.trigger('dtsb-redrawLogic')}));this._buildCriteria();return this}
Criteria._escapeHTML=function(txt){return txt.toString().replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&quot;/g,'"').replace(/&amp;/g,'&')};Criteria.prototype.doSearch=function(){if(this.c.liveSearch){this.s.dt.draw()}};Criteria.parseNumFmt=function(val){return+val.replace(/(?!^-)[^0-9.]/g,'')};Criteria.prototype.updateArrows=function(hasSiblings){if(hasSiblings===void 0){hasSiblings=!1}
this.dom.container.children().detach();this.dom.container.append(this.dom.data).append(this.dom.condition).append(this.dom.inputCont);this.setListeners();if(this.dom.value[0]!==undefined){$$3(this.dom.value[0]).trigger('dtsb-inserted')}
for(var i=1;i<this.dom.value.length;i++){this.dom.inputCont.append(this.dom.value[i]);$$3(this.dom.value[i]).trigger('dtsb-inserted')}
if(this.s.depth>1){this.dom.buttons.append(this.dom.left)}
if((this.c.depthLimit===!1||this.s.depth<this.c.depthLimit)&&hasSiblings){this.dom.buttons.append(this.dom.right)}else{this.dom.right.remove()}
this.dom.buttons.append(this.dom["delete"]);this.dom.container.append(this.dom.buttons)};Criteria.prototype.destroy=function(){this.dom.data.off('.dtsb');this.dom.condition.off('.dtsb');this.dom["delete"].off('.dtsb');for(var _i=0,_a=this.dom.value;_i<_a.length;_i++){var val=_a[_i];val.off('.dtsb')}
this.dom.container.remove()};Criteria.prototype.search=function(rowData,rowIdx){var settings=this.s.dt.settings()[0];var condition=this.s.conditions[this.s.condition];if(this.s.condition!==undefined&&condition!==undefined){var filter=rowData[this.s.dataIdx];if(this.s.type.includes('num')&&(settings.oLanguage.sDecimal!==''||settings.oLanguage.sThousands!=='')){var splitRD=[rowData[this.s.dataIdx]];if(settings.oLanguage.sDecimal!==''){splitRD=rowData[this.s.dataIdx].split(settings.oLanguage.sDecimal)}
if(settings.oLanguage.sThousands!==''){for(var i=0;i<splitRD.length;i++){splitRD[i]=splitRD[i].replace(settings.oLanguage.sThousands,',')}}
filter=splitRD.join('.')}
if(this.c.orthogonal.search!=='filter'){filter=settings.fastData(rowIdx,this.s.dataIdx,typeof this.c.orthogonal==='string'?this.c.orthogonal:this.c.orthogonal.search)}
if(this.s.type==='array'){if(!Array.isArray(filter)){filter=[filter]}
filter.sort();for(var _i=0,filter_1=filter;_i<filter_1.length;_i++){var filt=filter_1[_i];if(filt&&typeof filt==='string'){filt=filt.replace(/[\r\n\u2028]/g,' ')}}}else if(filter!==null&&typeof filter==='string'){filter=filter.replace(/[\r\n\u2028]/g,' ')}
if(this.s.type.includes('html')&&typeof filter==='string'){filter=filter.replace(/(<([^>]+)>)/ig,'')}
if(filter===null){filter=''}
return condition.search(filter,this.s.value,this)}};Criteria.prototype.getDetails=function(deFormatDates){if(deFormatDates===void 0){deFormatDates=!1}
var i;var settings=this.s.dt.settings()[0];if(this.s.type!==null&&this.s.type.includes('num')&&(settings.oLanguage.sDecimal!==''||settings.oLanguage.sThousands!=='')){for(i=0;i<this.s.value.length;i++){var splitRD=[this.s.value[i].toString()];if(settings.oLanguage.sDecimal!==''){splitRD=this.s.value[i].split(settings.oLanguage.sDecimal)}
if(settings.oLanguage.sThousands!==''){for(var j=0;j<splitRD.length;j++){splitRD[j]=splitRD[j].replace(settings.oLanguage.sThousands,',')}}
this.s.value[i]=splitRD.join('.')}}else if(this.s.type!==null&&deFormatDates){if(this.s.type.includes('date')||this.s.type.includes('time')){for(i=0;i<this.s.value.length;i++){if(this.s.value[i].match(/^\d{4}-([0]\d|1[0-2])-([0-2]\d|3[01])$/g)===null){this.s.value[i]=''}}}else if(this.s.type.includes('moment')){for(i=0;i<this.s.value.length;i++){if(this.s.value[i]&&this.s.value[i].length>0&&moment()(this.s.value[i],this.s.dateFormat,!0).isValid()){this.s.value[i]=moment()(this.s.value[i],this.s.dateFormat).format('YYYY-MM-DD HH:mm:ss')}}}else if(this.s.type.includes('luxon')){for(i=0;i<this.s.value.length;i++){if(this.s.value[i]&&this.s.value[i].length>0&&luxon().DateTime.fromFormat(this.s.value[i],this.s.dateFormat).invalid===null){this.s.value[i]=luxon().DateTime.fromFormat(this.s.value[i],this.s.dateFormat).toFormat('yyyy-MM-dd HH:mm:ss')}}}}
if(this.s.type.includes('num')&&this.s.dt.page.info().serverSide){for(i=0;i<this.s.value.length;i++){this.s.value[i]=this.s.value[i].replace(/[^0-9.\-]/g,'')}}
return{condition:this.s.condition,data:this.s.data,origData:this.s.origData,type:this.s.type,value:this.s.value.map(function(a){return a!==null&&a!==undefined?a.toString():a})}};Criteria.prototype.getNode=function(){return this.dom.container};Criteria.prototype.parseNumber=function(val){var decimal=this.s.dt.i18n('decimal');if(decimal&&decimal!=='.'){val=val.replace(/\./g,'').replace(decimal,'.')}
return+val.replace(/(?!^-)[^0-9.]/g,'')};Criteria.prototype.populate=function(){this._populateData();if(this.s.dataIdx!==-1){this._populateCondition();if(this.s.condition!==undefined){this._populateValue()}}};Criteria.prototype.rebuild=function(loadedCriteria){var foundData=!1;var dataIdx,i;this._populateData();if(loadedCriteria.data!==undefined){var italic_1=this.classes.italic;var data_1=this.dom.data;this.dom.data.children('option').each(function(){if(!foundData&&($$3(this).text()===loadedCriteria.data||loadedCriteria.origData&&$$3(this).prop('origData')===loadedCriteria.origData)){$$3(this).prop('selected',!0);data_1.removeClass(italic_1);foundData=!0;dataIdx=parseInt($$3(this).val(),10)}else{$$3(this).removeProp('selected')}})}
if(foundData){this.s.data=loadedCriteria.data;this.s.origData=loadedCriteria.origData;this.s.dataIdx=dataIdx;this.c.orthogonal=this._getOptions().orthogonal;this.dom.dataTitle.remove();this._populateCondition();this.dom.conditionTitle.remove();var condition=void 0;var options=this.dom.condition.children('option');for(i=0;i<options.length;i++){var option=$$3(options[i]);if(loadedCriteria.condition!==undefined&&option.val()===loadedCriteria.condition&&typeof loadedCriteria.condition==='string'){option.prop('selected',!0);condition=option.val()}else{option.removeProp('selected')}}
this.s.condition=condition;if(this.s.condition!==undefined){this.dom.conditionTitle.removeProp('selected');this.dom.conditionTitle.remove();this.dom.condition.removeClass(this.classes.italic);for(i=0;i<options.length;i++){var opt=$$3(options[i]);if(opt.val()!==this.s.condition){opt.removeProp('selected')}}
this._populateValue(loadedCriteria)}else{this.dom.conditionTitle.prependTo(this.dom.condition).prop('selected',!0)}}};Criteria.prototype.setListeners=function(){var _this=this;this.dom.data.unbind('change').on('change.dtsb',function(){_this.dom.dataTitle.removeProp('selected');var options=_this.dom.data.children('option.'+_this.classes.option);for(var i=0;i<options.length;i++){var option=$$3(options[i]);if(option.val()===_this.dom.data.val()){_this.dom.data.removeClass(_this.classes.italic);option.prop('selected',!0);_this.s.dataIdx=+option.val();_this.s.data=option.text();_this.s.origData=option.prop('origData');_this.c.orthogonal=_this._getOptions().orthogonal;_this._clearCondition();_this._clearValue();_this._populateCondition();if(_this.s.filled){_this.s.filled=!1;_this.doSearch();_this.setListeners()}
_this.s.dt.state.save()}else{option.removeProp('selected')}}});this.dom.condition.unbind('change').on('change.dtsb',function(){_this.dom.conditionTitle.removeProp('selected');var options=_this.dom.condition.children('option.'+_this.classes.option);for(var i=0;i<options.length;i++){var option=$$3(options[i]);if(option.val()===_this.dom.condition.val()){_this.dom.condition.removeClass(_this.classes.italic);option.prop('selected',!0);var condDisp=option.val();for(var _i=0,_a=Object.keys(_this.s.conditions);_i<_a.length;_i++){var cond=_a[_i];if(cond===condDisp){_this.s.condition=condDisp;break}}
_this._clearValue();_this._populateValue();for(var _b=0,_c=_this.dom.value;_b<_c.length;_b++){var val=_c[_b];if(_this.s.filled&&val!==undefined&&_this.dom.inputCont.has(val[0]).length!==0){_this.s.filled=!1;_this.doSearch();_this.setListeners()}}
if(_this.dom.value.length===0||_this.dom.value.length===1&&_this.dom.value[0]===undefined){_this.doSearch()}}else{option.removeProp('selected')}}})};Criteria.prototype.setupButtons=function(){if(window.innerWidth>550){this.dom.container.removeClass(this.classes.vertical);this.dom.buttons.css('left',null);this.dom.buttons.css('top',null);return}
this.dom.container.addClass(this.classes.vertical);this.dom.buttons.css('left',this.dom.data.innerWidth());this.dom.buttons.css('top',this.dom.data.position().top)};Criteria.prototype._buildCriteria=function(){this.dom.data.append(this.dom.dataTitle);this.dom.condition.append(this.dom.conditionTitle);this.dom.container.append(this.dom.data).append(this.dom.condition);this.dom.inputCont.empty();for(var _i=0,_a=this.dom.value;_i<_a.length;_i++){var val=_a[_i];val.append(this.dom.valueTitle);this.dom.inputCont.append(val)}
this.dom.buttons.append(this.dom["delete"]).append(this.dom.right);this.dom.container.append(this.dom.inputCont).append(this.dom.buttons);this.setListeners()};Criteria.prototype._clearCondition=function(){this.dom.condition.empty();this.dom.conditionTitle.prop('selected',!0).attr('disabled','true');this.dom.condition.prepend(this.dom.conditionTitle).prop('selectedIndex',0);this.s.conditions={};this.s.condition=undefined};Criteria.prototype._clearValue=function(){var val;if(this.s.condition!==undefined){if(this.dom.value.length>0&&this.dom.value[0]!==undefined){for(var _i=0,_a=this.dom.value;_i<_a.length;_i++){val=_a[_i];if(val!==undefined){setTimeout(function(){val.remove()},50)}}}
this.dom.value=[].concat(this.s.conditions[this.s.condition].init(this,Criteria.updateListener));if(this.dom.value.length>0&&this.dom.value[0]!==undefined){this.dom.inputCont.empty().append(this.dom.value[0]).insertAfter(this.dom.condition);$$3(this.dom.value[0]).trigger('dtsb-inserted');for(var i=1;i<this.dom.value.length;i++){this.dom.inputCont.append(this.dom.value[i]);$$3(this.dom.value[i]).trigger('dtsb-inserted')}}}else{for(var _b=0,_c=this.dom.value;_b<_c.length;_b++){val=_c[_b];if(val!==undefined){setTimeout(function(){val.remove()},50)}}
this.dom.valueTitle.prop('selected',!0);this.dom.defaultValue.append(this.dom.valueTitle).insertAfter(this.dom.condition)}
this.s.value=[];this.dom.value=[$$3('<select disabled/>').addClass(this.classes.value).addClass(this.classes.dropDown).addClass(this.classes.italic).addClass(this.classes.select).append(this.dom.valueTitle.clone())]};Criteria.prototype._getOptions=function(){var table=this.s.dt;return $$3.extend(!0,{},Criteria.defaults,table.settings()[0].aoColumns[this.s.dataIdx].searchBuilder)};Criteria.prototype._populateCondition=function(){var conditionOpts=[];var conditionsLength=Object.keys(this.s.conditions).length;var colInits=this.s.dt.settings()[0].aoColumns;var column=+this.dom.data.children('option:selected').val();var condition,condName;if(conditionsLength===0){this.s.type=this.s.dt.column(column).type();if(colInits!==undefined){var colInit=colInits[column];if(colInit.searchBuilderType!==undefined&&colInit.searchBuilderType!==null){this.s.type=colInit.searchBuilderType}else if(this.s.type===undefined||this.s.type===null){this.s.type=colInit.sType}}
if(this.s.type===null||this.s.type===undefined){if($$3.fn.dataTable.ext.oApi){$$3.fn.dataTable.ext.oApi._fnColumnTypes(this.s.dt.settings()[0])}
this.s.type=this.s.dt.column(column).type()}
this.dom.condition.removeAttr('disabled').empty().append(this.dom.conditionTitle).addClass(this.classes.italic);this.dom.conditionTitle.prop('selected',!0);var decimal=this.s.dt.settings()[0].oLanguage.sDecimal;if(decimal!==''&&this.s.type.indexOf(decimal)===this.s.type.length-decimal.length){if(this.s.type.includes('num-fmt')){this.s.type=this.s.type.replace(decimal,'')}else if(this.s.type.includes('num')){this.s.type=this.s.type.replace(decimal,'')}}
var conditionObj=this.c.conditions[this.s.type]!==undefined?this.c.conditions[this.s.type]:this.s.type.includes('moment')?this.c.conditions.moment:this.s.type.includes('luxon')?this.c.conditions.luxon:this.c.conditions.string;if(this.s.type.includes('moment')){this.s.dateFormat=this.s.type.replace(/moment-/g,'')}else if(this.s.type.includes('luxon')){this.s.dateFormat=this.s.type.replace(/luxon-/g,'')}
for(var _i=0,_a=Object.keys(conditionObj);_i<_a.length;_i++){condition=_a[_i];if(conditionObj[condition]!==null){if(this.s.dt.page.info().serverSide&&conditionObj[condition].init===Criteria.initSelect){var col=colInits[column];if(this.s.serverData&&this.s.serverData[col.data]){conditionObj[condition].init=Criteria.initSelectSSP;conditionObj[condition].inputValue=Criteria.inputValueSelect;conditionObj[condition].isInputValid=Criteria.isInputValidSelect}else{conditionObj[condition].init=Criteria.initInput;conditionObj[condition].inputValue=Criteria.inputValueInput;conditionObj[condition].isInputValid=Criteria.isInputValidInput}}
this.s.conditions[condition]=conditionObj[condition];condName=conditionObj[condition].conditionName;if(typeof condName==='function'){condName=condName(this.s.dt,this.c.i18n)}
conditionOpts.push($$3('<option>',{text:condName,value:condition}).addClass(this.classes.option).addClass(this.classes.notItalic))}}}else if(conditionsLength>0){this.dom.condition.empty().removeAttr('disabled').addClass(this.classes.italic);for(var _b=0,_c=Object.keys(this.s.conditions);_b<_c.length;_b++){condition=_c[_b];var name_1=this.s.conditions[condition].conditionName;if(typeof name_1==='function'){name_1=name_1(this.s.dt,this.c.i18n)}
var newOpt=$$3('<option>',{text:name_1,value:condition}).addClass(this.classes.option).addClass(this.classes.notItalic);if(this.s.condition!==undefined&&this.s.condition===name_1){newOpt.prop('selected',!0);this.dom.condition.removeClass(this.classes.italic)}
conditionOpts.push(newOpt)}}else{this.dom.condition.attr('disabled','true').addClass(this.classes.italic);return}
for(var _d=0,conditionOpts_1=conditionOpts;_d<conditionOpts_1.length;_d++){var opt=conditionOpts_1[_d];this.dom.condition.append(opt)}
if(colInits[column].searchBuilder&&colInits[column].searchBuilder.defaultCondition){var defaultCondition=colInits[column].searchBuilder.defaultCondition;if(typeof defaultCondition==='number'){this.dom.condition.prop('selectedIndex',defaultCondition);this.dom.condition.trigger('change')}else if(typeof defaultCondition==='string'){for(var i=0;i<conditionOpts.length;i++){for(var _e=0,_f=Object.keys(this.s.conditions);_e<_f.length;_e++){var cond=_f[_e];condName=this.s.conditions[cond].conditionName;if((typeof condName==='string'?condName:condName(this.s.dt,this.c.i18n))===conditionOpts[i].text()&&cond===defaultCondition){this.dom.condition.prop('selectedIndex',this.dom.condition.children().toArray().indexOf(conditionOpts[i][0])).removeClass(this.classes.italic);this.dom.condition.trigger('change');i=conditionOpts.length;break}}}}}else{this.dom.condition.prop('selectedIndex',0)}};Criteria.prototype._populateData=function(){var columns=this.s.dt.settings()[0].aoColumns;var includeColumns=this.s.dt.columns(this.c.columns).indexes().toArray();this.dom.data.empty().append(this.dom.dataTitle);for(var index=0;index<columns.length;index++){if(this.c.columns===!0||includeColumns.includes(index)){var col=columns[index];var opt={index:index,origData:col.data,text:(col.searchBuilderTitle||col.sTitle).replace(/(<([^>]+)>)/ig,'')};this.dom.data.append($$3('<option>',{text:opt.text,value:opt.index}).addClass(this.classes.option).addClass(this.classes.notItalic).prop('origData',col.data).prop('selected',this.s.dataIdx===opt.index?!0:!1));if(this.s.dataIdx===opt.index){this.dom.dataTitle.removeProp('selected')}}}};Criteria.prototype._populateValue=function(loadedCriteria){var _this=this;var prevFilled=this.s.filled;var i;this.s.filled=!1;setTimeout(function(){_this.dom.defaultValue.remove()},50);var _loop_1=function(val){setTimeout(function(){if(val!==undefined){val.remove()}},50)};for(var _i=0,_a=this.dom.value;_i<_a.length;_i++){var val=_a[_i];_loop_1(val)}
var children=this.dom.inputCont.children();if(children.length>1){for(i=0;i<children.length;i++){$$3(children[i]).remove()}}
if(loadedCriteria!==undefined){this.s.dt.columns().every(function(index){if(_this.s.dt.settings()[0].aoColumns[index].sTitle===loadedCriteria.data){_this.s.dataIdx=index}})}
this.dom.value=[].concat(this.s.conditions[this.s.condition].init(this,Criteria.updateListener,loadedCriteria!==undefined?loadedCriteria.value:undefined));if(loadedCriteria!==undefined&&loadedCriteria.value!==undefined){this.s.value=loadedCriteria.value}
this.dom.inputCont.empty();if(this.dom.value[0]!==undefined){$$3(this.dom.value[0]).appendTo(this.dom.inputCont).trigger('dtsb-inserted')}
for(i=1;i<this.dom.value.length;i++){$$3(this.dom.value[i]).insertAfter(this.dom.value[i-1]).trigger('dtsb-inserted')}
this.s.filled=this.s.conditions[this.s.condition].isInputValid(this.dom.value,this);this.setListeners();if(!this.s.preventRedraw&&prevFilled!==this.s.filled){if(!this.s.dt.page.info().serverSide){this.doSearch()}
this.setListeners()}};Criteria.prototype._throttle=function(fn,frequency){if(frequency===void 0){frequency=200}
var last=null;var timer=null;var that=this;if(frequency===null){frequency=200}
return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}
var now=+new Date();if(last!==null&&now<last+frequency){clearTimeout(timer)}else{last=now}
timer=setTimeout(function(){last=null;fn.apply(that,args)},frequency)}};Criteria.version='1.1.0';Criteria.classes={button:'dtsb-button',buttonContainer:'dtsb-buttonContainer',condition:'dtsb-condition',container:'dtsb-criteria',data:'dtsb-data',"delete":'dtsb-delete',dropDown:'dtsb-dropDown',greyscale:'dtsb-greyscale',input:'dtsb-input',inputCont:'dtsb-inputCont',italic:'dtsb-italic',joiner:'dtsb-joiner',left:'dtsb-left',notItalic:'dtsb-notItalic',option:'dtsb-option',right:'dtsb-right',select:'dtsb-select',value:'dtsb-value',vertical:'dtsb-vertical'};Criteria.initSelect=function(that,fn,preDefined,array){if(preDefined===void 0){preDefined=null}
if(array===void 0){array=!1}
var column=that.dom.data.children('option:selected').val();var indexArray=that.s.dt.rows().indexes().toArray();var fastData=that.s.dt.settings()[0].fastData;that.dom.valueTitle.prop('selected',!0);var el=$$3('<select/>').addClass(Criteria.classes.value).addClass(Criteria.classes.dropDown).addClass(Criteria.classes.italic).addClass(Criteria.classes.select).append(that.dom.valueTitle).on('change.dtsb',function(){$$3(this).removeClass(Criteria.classes.italic);fn(that,this)});if(that.c.greyscale){el.addClass(Criteria.classes.greyscale)}
var added=[];var options=[];for(var _i=0,indexArray_1=indexArray;_i<indexArray_1.length;_i++){var index=indexArray_1[_i];var filter=fastData(index,column,typeof that.c.orthogonal==='string'?that.c.orthogonal:that.c.orthogonal.search);var value={filter:typeof filter==='string'?filter.replace(/[\r\n\u2028]/g,' '):filter,index:index,text:fastData(index,column,typeof that.c.orthogonal==='string'?that.c.orthogonal:that.c.orthogonal.display)};if(that.s.type==='array'){value.filter=!Array.isArray(value.filter)?[value.filter]:value.filter;value.text=!Array.isArray(value.text)?[value.text]:value.text}
var addOption=function(filt,text){if(that.s.type.includes('html')&&filt!==null&&typeof filt==='string'){filt.replace(/(<([^>]+)>)/ig,'')}
var opt=$$3('<option>',{type:Array.isArray(filt)?'Array':'String',value:filt}).data('sbv',filt).addClass(that.classes.option).addClass(that.classes.notItalic).html(typeof text==='string'?text.replace(/(<([^>]+)>)/ig,''):text);var val=opt.val();if(added.indexOf(val)===-1){added.push(val);options.push(opt);if(preDefined!==null&&Array.isArray(preDefined[0])){preDefined[0]=preDefined[0].sort().join(',')}
if(preDefined!==null&&opt.val()===preDefined[0]){opt.prop('selected',!0);el.removeClass(Criteria.classes.italic);that.dom.valueTitle.removeProp('selected')}}};if(array){for(var i=0;i<value.filter.length;i++){addOption(value.filter[i],value.text[i])}}else{addOption(value.filter,Array.isArray(value.text)?value.text.join(', '):value.text)}}
options.sort(function(a,b){if(that.s.type==='array'||that.s.type==='string'||that.s.type==='html'){if(a.val()<b.val()){return-1}else if(a.val()>b.val()){return 1}else{return 0}}else if(that.s.type==='num'||that.s.type==='html-num'){if(+a.val().replace(/(<([^>]+)>)/ig,'')<+b.val().replace(/(<([^>]+)>)/ig,'')){return-1}else if(+a.val().replace(/(<([^>]+)>)/ig,'')>+b.val().replace(/(<([^>]+)>)/ig,'')){return 1}else{return 0}}else if(that.s.type==='num-fmt'||that.s.type==='html-num-fmt'){if(+a.val().replace(/[^0-9.]/g,'')<+b.val().replace(/[^0-9.]/g,'')){return-1}else if(+a.val().replace(/[^0-9.]/g,'')>+b.val().replace(/[^0-9.]/g,'')){return 1}else{return 0}}});for(var _a=0,options_1=options;_a<options_1.length;_a++){var opt=options_1[_a];el.append(opt)}
return el};Criteria.initSelectSSP=function(that,fn,preDefined){if(preDefined===void 0){preDefined=null}
that.dom.valueTitle.prop('selected',!0);var el=$$3('<select/>').addClass(Criteria.classes.value).addClass(Criteria.classes.dropDown).addClass(Criteria.classes.italic).addClass(Criteria.classes.select).append(that.dom.valueTitle).on('change.dtsb',function(){$$3(this).removeClass(Criteria.classes.italic);fn(that,this)});if(that.c.greyscale){el.addClass(Criteria.classes.greyscale)}
var options=[];for(var _i=0,_a=that.s.serverData[that.s.origData];_i<_a.length;_i++){var option=_a[_i];var value=option.value;var label=option.label;var addOption=function(filt,text){if(that.s.type.includes('html')&&filt!==null&&typeof filt==='string'){filt.replace(/(<([^>]+)>)/ig,'')}
var opt=$$3('<option>',{type:Array.isArray(filt)?'Array':'String',value:filt}).data('sbv',filt).addClass(that.classes.option).addClass(that.classes.notItalic).html(typeof text==='string'?text.replace(/(<([^>]+)>)/ig,''):text);options.push(opt);if(preDefined!==null&&opt.val()===preDefined[0]){opt.prop('selected',!0);el.removeClass(Criteria.classes.italic);that.dom.valueTitle.removeProp('selected')}};addOption(value,label)}
for(var _b=0,options_2=options;_b<options_2.length;_b++){var opt=options_2[_b];el.append(opt)}
return el};Criteria.initSelectArray=function(that,fn,preDefined){if(preDefined===void 0){preDefined=null}
return Criteria.initSelect(that,fn,preDefined,!0)};Criteria.initInput=function(that,fn,preDefined){if(preDefined===void 0){preDefined=null}
var searchDelay=that.s.dt.settings()[0].searchDelay;var el=$$3('<input/>').addClass(Criteria.classes.value).addClass(Criteria.classes.input).on('input.dtsb keypress.dtsb',that._throttle(function(e){var code=e.keyCode||e.which;return fn(that,this,code)},searchDelay===null?100:searchDelay));if(that.c.greyscale){el.addClass(Criteria.classes.greyscale)}
if(preDefined!==null){el.val(preDefined[0])}
that.s.dt.one('draw.dtsb',function(){that.s.topGroup.trigger('dtsb-redrawLogic')});return el};Criteria.init2Input=function(that,fn,preDefined){if(preDefined===void 0){preDefined=null}
var searchDelay=that.s.dt.settings()[0].searchDelay;var els=[$$3('<input/>').addClass(Criteria.classes.value).addClass(Criteria.classes.input).on('input.dtsb keypress.dtsb',that._throttle(function(e){var code=e.keyCode||e.which;return fn(that,this,code)},searchDelay===null?100:searchDelay)),$$3('<span>').addClass(that.classes.joiner).html(that.s.dt.i18n('searchBuilder.valueJoiner',that.c.i18n.valueJoiner)),$$3('<input/>').addClass(Criteria.classes.value).addClass(Criteria.classes.input).on('input.dtsb keypress.dtsb',that._throttle(function(e){var code=e.keyCode||e.which;return fn(that,this,code)},searchDelay===null?100:searchDelay))];if(that.c.greyscale){els[0].addClass(Criteria.classes.greyscale);els[2].addClass(Criteria.classes.greyscale)}
if(preDefined!==null){els[0].val(preDefined[0]);els[2].val(preDefined[1])}
that.s.dt.one('draw.dtsb',function(){that.s.topGroup.trigger('dtsb-redrawLogic')});return els};Criteria.initDate=function(that,fn,preDefined){if(preDefined===void 0){preDefined=null}
var searchDelay=that.s.dt.settings()[0].searchDelay;var i18n=that.s.dt.i18n('datetime',{});var el=$$3('<input/>').addClass(Criteria.classes.value).addClass(Criteria.classes.input).dtDateTime({attachTo:'input',format:that.s.dateFormat?that.s.dateFormat:undefined,i18n:i18n}).on('change.dtsb',that._throttle(function(){return fn(that,this)},searchDelay===null?100:searchDelay)).on('input.dtsb keypress.dtsb',function(e){that._throttle(function(){var code=e.keyCode||e.which;return fn(that,this,code)},searchDelay===null?100:searchDelay)});if(that.c.greyscale){el.addClass(Criteria.classes.greyscale)}
if(preDefined!==null){el.val(preDefined[0])}
that.s.dt.one('draw.dtsb',function(){that.s.topGroup.trigger('dtsb-redrawLogic')});return el};Criteria.initNoValue=function(that){that.s.dt.one('draw.dtsb',function(){that.s.topGroup.trigger('dtsb-redrawLogic')});return[]};Criteria.init2Date=function(that,fn,preDefined){var _this=this;if(preDefined===void 0){preDefined=null}
var searchDelay=that.s.dt.settings()[0].searchDelay;var i18n=that.s.dt.i18n('datetime',{});var els=[$$3('<input/>').addClass(Criteria.classes.value).addClass(Criteria.classes.input).dtDateTime({attachTo:'input',format:that.s.dateFormat?that.s.dateFormat:undefined,i18n:i18n}).on('change.dtsb',searchDelay!==null?DataTable.util.throttle(function(){return fn(that,this)},searchDelay):function(){fn(that,_this)}).on('input.dtsb keypress.dtsb',function(e){DataTable.util.throttle(function(){var code=e.keyCode||e.which;return fn(that,this,code)},searchDelay===null?0:searchDelay)}),$$3('<span>').addClass(that.classes.joiner).html(that.s.dt.i18n('searchBuilder.valueJoiner',that.c.i18n.valueJoiner)),$$3('<input/>').addClass(Criteria.classes.value).addClass(Criteria.classes.input).dtDateTime({attachTo:'input',format:that.s.dateFormat?that.s.dateFormat:undefined,i18n:i18n}).on('change.dtsb',searchDelay!==null?DataTable.util.throttle(function(){return fn(that,this)},searchDelay):function(){fn(that,_this)}).on('input.dtsb keypress.dtsb',!that.c.enterSearch&&!(that.s.dt.settings()[0].oInit.search!==undefined&&that.s.dt.settings()[0].oInit.search["return"])&&searchDelay!==null?DataTable.util.throttle(function(){return fn(that,this)},searchDelay):function(e){var code=e.keyCode||e.which;fn(that,_this,code)})];if(that.c.greyscale){els[0].addClass(Criteria.classes.greyscale);els[2].addClass(Criteria.classes.greyscale)}
if(preDefined!==null&&preDefined.length>0){els[0].val(preDefined[0]);els[2].val(preDefined[1])}
that.s.dt.one('draw.dtsb',function(){that.s.topGroup.trigger('dtsb-redrawLogic')});return els};Criteria.isInputValidSelect=function(el){var allFilled=!0;for(var _i=0,el_1=el;_i<el_1.length;_i++){var element=el_1[_i];if(element.children('option:selected').length===element.children('option').length-element.children('option.'+Criteria.classes.notItalic).length&&element.children('option:selected').length===1&&element.children('option:selected')[0]===element.children('option')[0]){allFilled=!1}}
return allFilled};Criteria.isInputValidInput=function(el){var allFilled=!0;for(var _i=0,el_2=el;_i<el_2.length;_i++){var element=el_2[_i];if(element.is('input')&&element.val().length===0){allFilled=!1}}
return allFilled};Criteria.inputValueSelect=function(el){var values=[];for(var _i=0,el_3=el;_i<el_3.length;_i++){var element=el_3[_i];if(element.is('select')){values.push(Criteria._escapeHTML(element.children('option:selected').data('sbv')))}}
return values};Criteria.inputValueInput=function(el){var values=[];for(var _i=0,el_4=el;_i<el_4.length;_i++){var element=el_4[_i];if(element.is('input')){values.push(Criteria._escapeHTML(element.val()))}}
return values};Criteria.updateListener=function(that,el,code){var condition=that.s.conditions[that.s.condition];var i;that.s.filled=condition.isInputValid(that.dom.value,that);that.s.value=condition.inputValue(that.dom.value,that);if(!that.s.filled){if(!that.c.enterSearch&&!(that.s.dt.settings()[0].oInit.search!==undefined&&that.s.dt.settings()[0].oInit.search["return"])||code===13){that.doSearch()}
return}
if(!Array.isArray(that.s.value)){that.s.value=[that.s.value]}
for(i=0;i<that.s.value.length;i++){if(Array.isArray(that.s.value[i])){that.s.value[i].sort()}}
var idx=null;var cursorPos=null;for(i=0;i<that.dom.value.length;i++){if(el===that.dom.value[i][0]){idx=i;if(el.selectionStart!==undefined){cursorPos=el.selectionStart}}}
if(!that.c.enterSearch&&!(that.s.dt.settings()[0].oInit.search!==undefined&&that.s.dt.settings()[0].oInit.search["return"])||code===13){that.doSearch()}
if(idx!==null){that.dom.value[idx].removeClass(that.classes.italic);that.dom.value[idx].focus();if(cursorPos!==null){that.dom.value[idx][0].setSelectionRange(cursorPos,cursorPos)}}};Criteria.dateConditions={'=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.equals',i18n.conditions.date.equals)},init:Criteria.initDate,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){value=value.replace(/(\/|-|,)/g,'-');return value===comparison[0]}},'!=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.not',i18n.conditions.date.not)},init:Criteria.initDate,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){value=value.replace(/(\/|-|,)/g,'-');return value!==comparison[0]}},'<':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.before',i18n.conditions.date.before)},init:Criteria.initDate,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){value=value.replace(/(\/|-|,)/g,'-');return value<comparison[0]}},'>':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.after',i18n.conditions.date.after)},init:Criteria.initDate,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){value=value.replace(/(\/|-|,)/g,'-');return value>comparison[0]}},'between':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.between',i18n.conditions.date.between)},init:Criteria.init2Date,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){value=value.replace(/(\/|-|,)/g,'-');if(comparison[0]<comparison[1]){return comparison[0]<=value&&value<=comparison[1]}else{return comparison[1]<=value&&value<=comparison[0]}}},'!between':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.notBetween',i18n.conditions.date.notBetween)},init:Criteria.init2Date,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){value=value.replace(/(\/|-|,)/g,'-');if(comparison[0]<comparison[1]){return!(comparison[0]<=value&&value<=comparison[1])}else{return!(comparison[1]<=value&&value<=comparison[0])}}},'null':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.empty',i18n.conditions.date.empty)},init:Criteria.initNoValue,inputValue:function(){return},isInputValid:function(){return!0},search:function(value){return value===null||value===undefined||value.length===0}},'!null':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.notEmpty',i18n.conditions.date.notEmpty)},init:Criteria.initNoValue,inputValue:function(){return},isInputValid:function(){return!0},search:function(value){return!(value===null||value===undefined||value.length===0)}}};Criteria.momentDateConditions={'=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.equals',i18n.conditions.date.equals)},init:Criteria.initDate,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,that){return moment()(value,that.s.dateFormat).valueOf()===moment()(comparison[0],that.s.dateFormat).valueOf()}},'!=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.not',i18n.conditions.date.not)},init:Criteria.initDate,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,that){return moment()(value,that.s.dateFormat).valueOf()!==moment()(comparison[0],that.s.dateFormat).valueOf()}},'<':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.before',i18n.conditions.date.before)},init:Criteria.initDate,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,that){return moment()(value,that.s.dateFormat).valueOf()<moment()(comparison[0],that.s.dateFormat).valueOf()}},'>':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.after',i18n.conditions.date.after)},init:Criteria.initDate,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,that){return moment()(value,that.s.dateFormat).valueOf()>moment()(comparison[0],that.s.dateFormat).valueOf()}},'between':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.between',i18n.conditions.date.between)},init:Criteria.init2Date,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,that){var val=moment()(value,that.s.dateFormat).valueOf();var comp0=moment()(comparison[0],that.s.dateFormat).valueOf();var comp1=moment()(comparison[1],that.s.dateFormat).valueOf();if(comp0<comp1){return comp0<=val&&val<=comp1}else{return comp1<=val&&val<=comp0}}},'!between':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.notBetween',i18n.conditions.date.notBetween)},init:Criteria.init2Date,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,that){var val=moment()(value,that.s.dateFormat).valueOf();var comp0=moment()(comparison[0],that.s.dateFormat).valueOf();var comp1=moment()(comparison[1],that.s.dateFormat).valueOf();if(comp0<comp1){return!(+comp0<=+val&&+val<=+comp1)}else{return!(+comp1<=+val&&+val<=+comp0)}}},'null':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.empty',i18n.conditions.date.empty)},init:Criteria.initNoValue,inputValue:function(){return},isInputValid:function(){return!0},search:function(value){return value===null||value===undefined||value.length===0}},'!null':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.notEmpty',i18n.conditions.date.notEmpty)},init:Criteria.initNoValue,inputValue:function(){return},isInputValid:function(){return!0},search:function(value){return!(value===null||value===undefined||value.length===0)}}};Criteria.luxonDateConditions={'=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.equals',i18n.conditions.date.equals)},init:Criteria.initDate,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,that){return luxon().DateTime.fromFormat(value,that.s.dateFormat).ts===luxon().DateTime.fromFormat(comparison[0],that.s.dateFormat).ts}},'!=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.not',i18n.conditions.date.not)},init:Criteria.initDate,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,that){return luxon().DateTime.fromFormat(value,that.s.dateFormat).ts!==luxon().DateTime.fromFormat(comparison[0],that.s.dateFormat).ts}},'<':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.before',i18n.conditions.date.before)},init:Criteria.initDate,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,that){return luxon().DateTime.fromFormat(value,that.s.dateFormat).ts<luxon().DateTime.fromFormat(comparison[0],that.s.dateFormat).ts}},'>':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.after',i18n.conditions.date.after)},init:Criteria.initDate,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,that){return luxon().DateTime.fromFormat(value,that.s.dateFormat).ts>luxon().DateTime.fromFormat(comparison[0],that.s.dateFormat).ts}},'between':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.between',i18n.conditions.date.between)},init:Criteria.init2Date,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,that){var val=luxon().DateTime.fromFormat(value,that.s.dateFormat).ts;var comp0=luxon().DateTime.fromFormat(comparison[0],that.s.dateFormat).ts;var comp1=luxon().DateTime.fromFormat(comparison[1],that.s.dateFormat).ts;if(comp0<comp1){return comp0<=val&&val<=comp1}else{return comp1<=val&&val<=comp0}}},'!between':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.notBetween',i18n.conditions.date.notBetween)},init:Criteria.init2Date,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,that){var val=luxon().DateTime.fromFormat(value,that.s.dateFormat).ts;var comp0=luxon().DateTime.fromFormat(comparison[0],that.s.dateFormat).ts;var comp1=luxon().DateTime.fromFormat(comparison[1],that.s.dateFormat).ts;if(comp0<comp1){return!(+comp0<=+val&&+val<=+comp1)}else{return!(+comp1<=+val&&+val<=+comp0)}}},'null':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.empty',i18n.conditions.date.empty)},init:Criteria.initNoValue,inputValue:function(){return},isInputValid:function(){return!0},search:function(value){return value===null||value===undefined||value.length===0}},'!null':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.date.notEmpty',i18n.conditions.date.notEmpty)},init:Criteria.initNoValue,inputValue:function(){return},isInputValid:function(){return!0},search:function(value){return!(value===null||value===undefined||value.length===0)}}};Criteria.numConditions={'=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.equals',i18n.conditions.number.equals)},init:Criteria.initSelect,inputValue:Criteria.inputValueSelect,isInputValid:Criteria.isInputValidSelect,search:function(value,comparison){return+value===+comparison[0]}},'!=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.not',i18n.conditions.number.not)},init:Criteria.initSelect,inputValue:Criteria.inputValueSelect,isInputValid:Criteria.isInputValidSelect,search:function(value,comparison){return+value!==+comparison[0]}},'<':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.lt',i18n.conditions.number.lt)},init:Criteria.initInput,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){return+value<+comparison[0]}},'<=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.lte',i18n.conditions.number.lte)},init:Criteria.initInput,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){return+value<=+comparison[0]}},'>=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.gte',i18n.conditions.number.gte)},init:Criteria.initInput,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){return+value>=+comparison[0]}},'>':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.gt',i18n.conditions.number.gt)},init:Criteria.initInput,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){return+value>+comparison[0]}},'between':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.between',i18n.conditions.number.between)},init:Criteria.init2Input,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){if(+comparison[0]<+comparison[1]){return+comparison[0]<=+value&&+value<=+comparison[1]}else{return+comparison[1]<=+value&&+value<=+comparison[0]}}},'!between':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.notBetween',i18n.conditions.number.notBetween)},init:Criteria.init2Input,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){if(+comparison[0]<+comparison[1]){return!(+comparison[0]<=+value&&+value<=+comparison[1])}else{return!(+comparison[1]<=+value&&+value<=+comparison[0])}}},'null':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.empty',i18n.conditions.number.empty)},init:Criteria.initNoValue,inputValue:function(){return},isInputValid:function(){return!0},search:function(value){return value===null||value===undefined||value.length===0}},'!null':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.notEmpty',i18n.conditions.number.notEmpty)},init:Criteria.initNoValue,inputValue:function(){return},isInputValid:function(){return!0},search:function(value){return!(value===null||value===undefined||value.length===0)}}};Criteria.numFmtConditions={'=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.equals',i18n.conditions.number.equals)},init:Criteria.initSelect,inputValue:Criteria.inputValueSelect,isInputValid:Criteria.isInputValidSelect,search:function(value,comparison,criteria){return criteria.parseNumber(value)===criteria.parseNumber(comparison[0])}},'!=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.not',i18n.conditions.number.not)},init:Criteria.initSelect,inputValue:Criteria.inputValueSelect,isInputValid:Criteria.isInputValidSelect,search:function(value,comparison,criteria){return criteria.parseNumber(value)!==criteria.parseNumber(comparison[0])}},'<':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.lt',i18n.conditions.number.lt)},init:Criteria.initInput,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,criteria){return criteria.parseNumber(value)<criteria.parseNumber(comparison[0])}},'<=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.lte',i18n.conditions.number.lte)},init:Criteria.initInput,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,criteria){return criteria.parseNumber(value)<=criteria.parseNumber(comparison[0])}},'>=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.gte',i18n.conditions.number.gte)},init:Criteria.initInput,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,criteria){return criteria.parseNumber(value)>=criteria.parseNumber(comparison[0])}},'>':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.gt',i18n.conditions.number.gt)},init:Criteria.initInput,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,criteria){return criteria.parseNumber(value)>criteria.parseNumber(comparison[0])}},'between':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.between',i18n.conditions.number.between)},init:Criteria.init2Input,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,criteria){var val=criteria.parseNumber(value);var comp0=criteria.parseNumber(comparison[0]);var comp1=criteria.parseNumber(comparison[1]);if(+comp0<+comp1){return+comp0<=+val&&+val<=+comp1}else{return+comp1<=+val&&+val<=+comp0}}},'!between':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.notBetween',i18n.conditions.number.notBetween)},init:Criteria.init2Input,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison,criteria){var val=criteria.parseNumber(value);var comp0=criteria.parseNumber(comparison[0]);var comp1=criteria.parseNumber(comparison[1]);if(+comp0<+comp1){return!(+comp0<=+val&&+val<=+comp1)}else{return!(+comp1<=+val&&+val<=+comp0)}}},'null':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.empty',i18n.conditions.number.empty)},init:Criteria.initNoValue,inputValue:function(){return},isInputValid:function(){return!0},search:function(value){return value===null||value===undefined||value.length===0}},'!null':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.number.notEmpty',i18n.conditions.number.notEmpty)},init:Criteria.initNoValue,inputValue:function(){return},isInputValid:function(){return!0},search:function(value){return!(value===null||value===undefined||value.length===0)}}};Criteria.stringConditions={'=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.string.equals',i18n.conditions.string.equals)},init:Criteria.initSelect,inputValue:Criteria.inputValueSelect,isInputValid:Criteria.isInputValidSelect,search:function(value,comparison){return value===comparison[0]}},'!=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.string.not',i18n.conditions.string.not)},init:Criteria.initSelect,inputValue:Criteria.inputValueSelect,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){return value!==comparison[0]}},'starts':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.string.startsWith',i18n.conditions.string.startsWith)},init:Criteria.initInput,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){return value.toLowerCase().indexOf(comparison[0].toLowerCase())===0}},'!starts':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.string.notStartsWith',i18n.conditions.string.notStartsWith)},init:Criteria.initInput,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){return value.toLowerCase().indexOf(comparison[0].toLowerCase())!==0}},'contains':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.string.contains',i18n.conditions.string.contains)},init:Criteria.initInput,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){return value.toLowerCase().includes(comparison[0].toLowerCase())}},'!contains':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.string.notContains',i18n.conditions.string.notContains)},init:Criteria.initInput,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){return!value.toLowerCase().includes(comparison[0].toLowerCase())}},'ends':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.string.endsWith',i18n.conditions.string.endsWith)},init:Criteria.initInput,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){return value.toLowerCase().endsWith(comparison[0].toLowerCase())}},'!ends':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.string.notEndsWith',i18n.conditions.string.notEndsWith)},init:Criteria.initInput,inputValue:Criteria.inputValueInput,isInputValid:Criteria.isInputValidInput,search:function(value,comparison){return!value.toLowerCase().endsWith(comparison[0].toLowerCase())}},'null':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.string.empty',i18n.conditions.string.empty)},init:Criteria.initNoValue,inputValue:function(){return},isInputValid:function(){return!0},search:function(value){return value===null||value===undefined||value.length===0}},'!null':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.string.notEmpty',i18n.conditions.string.notEmpty)},init:Criteria.initNoValue,inputValue:function(){return},isInputValid:function(){return!0},search:function(value){return!(value===null||value===undefined||value.length===0)}}};Criteria.arrayConditions={'contains':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.array.contains',i18n.conditions.array.contains)},init:Criteria.initSelectArray,inputValue:Criteria.inputValueSelect,isInputValid:Criteria.isInputValidSelect,search:function(value,comparison){return value.includes(comparison[0])}},'without':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.array.without',i18n.conditions.array.without)},init:Criteria.initSelectArray,inputValue:Criteria.inputValueSelect,isInputValid:Criteria.isInputValidSelect,search:function(value,comparison){return value.indexOf(comparison[0])===-1}},'=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.array.equals',i18n.conditions.array.equals)},init:Criteria.initSelect,inputValue:Criteria.inputValueSelect,isInputValid:Criteria.isInputValidSelect,search:function(value,comparison){if(value.length===comparison[0].length){for(var i=0;i<value.length;i++){if(value[i]!==comparison[0][i]){return!1}}
return!0}
return!1}},'!=':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.array.not',i18n.conditions.array.not)},init:Criteria.initSelect,inputValue:Criteria.inputValueSelect,isInputValid:Criteria.isInputValidSelect,search:function(value,comparison){if(value.length===comparison[0].length){for(var i=0;i<value.length;i++){if(value[i]!==comparison[0][i]){return!0}}
return!1}
return!0}},'null':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.array.empty',i18n.conditions.array.empty)},init:Criteria.initNoValue,inputValue:function(){return},isInputValid:function(){return!0},search:function(value){return value===null||value===undefined||value.length===0}},'!null':{conditionName:function(dt,i18n){return dt.i18n('searchBuilder.conditions.array.notEmpty',i18n.conditions.array.notEmpty)},init:Criteria.initNoValue,inputValue:function(){return},isInputValid:function(){return!0},search:function(value){return value!==null&&value!==undefined&&value.length!==0}}};Criteria.defaults={columns:!0,conditions:{'array':Criteria.arrayConditions,'date':Criteria.dateConditions,'html':Criteria.stringConditions,'html-num':Criteria.numConditions,'html-num-fmt':Criteria.numFmtConditions,'luxon':Criteria.luxonDateConditions,'moment':Criteria.momentDateConditions,'num':Criteria.numConditions,'num-fmt':Criteria.numFmtConditions,'string':Criteria.stringConditions},depthLimit:!1,enterSearch:!1,filterChanged:undefined,greyscale:!1,i18n:{add:'Add Condition',button:{0:'Search Builder',_:'Search Builder (%d)'},clearAll:'Clear All',condition:'Condition',data:'Data',"delete":'&times',deleteTitle:'Delete filtering rule',left:'<',leftTitle:'Outdent criteria',logicAnd:'And',logicOr:'Or',right:'>',rightTitle:'Indent criteria',search:'Search',title:{0:'Custom Search Builder',_:'Custom Search Builder (%d)'},value:'Value',valueJoiner:'and'},liveSearch:!0,logic:'AND',orthogonal:{display:'display',search:'filter'},preDefined:!1};return Criteria}());var $$2;var dataTable$2;function setJQuery$1(jq){$$2=jq;dataTable$2=jq.fn.dataTable}
var Group=(function(){function Group(table,opts,topGroup,index,isChild,depth,serverData){if(index===void 0){index=0}
if(isChild===void 0){isChild=!1}
if(depth===void 0){depth=1}
if(serverData===void 0){serverData=undefined}
if(!dataTable$2||!dataTable$2.versionCheck||!dataTable$2.versionCheck('1.10.0')){throw new Error('SearchBuilder requires DataTables 1.10 or newer')}
this.classes=$$2.extend(!0,{},Group.classes);this.c=$$2.extend(!0,{},Group.defaults,opts);this.s={criteria:[],depth:depth,dt:table,index:index,isChild:isChild,logic:undefined,opts:opts,preventRedraw:!1,serverData:serverData,toDrop:undefined,topGroup:topGroup};this.dom={add:$$2('<button/>').addClass(this.classes.add).addClass(this.classes.button).attr('type','button'),clear:$$2('<button>&times</button>').addClass(this.classes.button).addClass(this.classes.clearGroup).attr('type','button'),container:$$2('<div/>').addClass(this.classes.group),logic:$$2('<button><div/></button>').addClass(this.classes.logic).addClass(this.classes.button).attr('type','button'),logicContainer:$$2('<div/>').addClass(this.classes.logicContainer),search:$$2('<button/>').addClass(this.classes.search).addClass(this.classes.button).attr('type','button').css('display','none')};if(this.s.topGroup===undefined){this.s.topGroup=this.dom.container}
this._setup();return this}
Group.prototype.destroy=function(){this.dom.add.off('.dtsb');this.dom.logic.off('.dtsb');this.dom.search.off('.dtsb');this.dom.container.trigger('dtsb-destroy').remove();this.s.criteria=[]};Group.prototype.getDetails=function(deFormatDates){if(deFormatDates===void 0){deFormatDates=!1}
if(this.s.criteria.length===0){return{}}
var details={criteria:[],logic:this.s.logic};for(var _i=0,_a=this.s.criteria;_i<_a.length;_i++){var crit=_a[_i];details.criteria.push(crit.criteria.getDetails(deFormatDates))}
return details};Group.prototype.getNode=function(){return this.dom.container};Group.prototype.rebuild=function(loadedDetails){var crit;if(loadedDetails.criteria===undefined||loadedDetails.criteria===null||Array.isArray(loadedDetails.criteria)&&loadedDetails.criteria.length===0){return}
this.s.logic=loadedDetails.logic;this.dom.logic.children().first().html(this.s.logic==='OR'?this.s.dt.i18n('searchBuilder.logicOr',this.c.i18n.logicOr):this.s.dt.i18n('searchBuilder.logicAnd',this.c.i18n.logicAnd));if(Array.isArray(loadedDetails.criteria)){for(var _i=0,_a=loadedDetails.criteria;_i<_a.length;_i++){crit=_a[_i];if(crit.logic!==undefined){this._addPrevGroup(crit)}else if(crit.logic===undefined){this._addPrevCriteria(crit)}}}
for(var _b=0,_c=this.s.criteria;_b<_c.length;_b++){crit=_c[_b];if(crit.criteria instanceof Criteria){crit.criteria.updateArrows(this.s.criteria.length>1);this._setCriteriaListeners(crit.criteria)}}};Group.prototype.redrawContents=function(){if(this.s.preventRedraw){return}
this.dom.container.children().detach();this.dom.container.append(this.dom.logicContainer).append(this.dom.add);if(!this.c.liveSearch){this.dom.container.append(this.dom.search)}
this.s.criteria.sort(function(a,b){if(a.criteria.s.index<b.criteria.s.index){return-1}else if(a.criteria.s.index>b.criteria.s.index){return 1}
return 0});this.setListeners();for(var i=0;i<this.s.criteria.length;i++){var crit=this.s.criteria[i].criteria;if(crit instanceof Criteria){this.s.criteria[i].index=i;this.s.criteria[i].criteria.s.index=i;this.s.criteria[i].criteria.dom.container.insertBefore(this.dom.add);this._setCriteriaListeners(crit);this.s.criteria[i].criteria.s.preventRedraw=this.s.preventRedraw;this.s.criteria[i].criteria.rebuild(this.s.criteria[i].criteria.getDetails());this.s.criteria[i].criteria.s.preventRedraw=!1}else if(crit instanceof Group&&crit.s.criteria.length>0){this.s.criteria[i].index=i;this.s.criteria[i].criteria.s.index=i;this.s.criteria[i].criteria.dom.container.insertBefore(this.dom.add);crit.s.preventRedraw=this.s.preventRedraw;crit.redrawContents();crit.s.preventRedraw=!1;this._setGroupListeners(crit)}else{this.s.criteria.splice(i,1);i--}}
this.setupLogic()};Group.prototype.redrawLogic=function(){for(var _i=0,_a=this.s.criteria;_i<_a.length;_i++){var crit=_a[_i];if(crit.criteria instanceof Group){crit.criteria.redrawLogic()}}
this.setupLogic()};Group.prototype.search=function(rowData,rowIdx){if(this.s.logic==='AND'){return this._andSearch(rowData,rowIdx)}else if(this.s.logic==='OR'){return this._orSearch(rowData,rowIdx)}
return!0};Group.prototype.setupLogic=function(){this.dom.logicContainer.remove();this.dom.clear.remove();if(this.s.criteria.length<1){if(!this.s.isChild){this.dom.container.trigger('dtsb-destroy');this.dom.container.css('margin-left',0)}
this.dom.search.css('display','none');return}
this.dom.clear.height('0px');this.dom.logicContainer.append(this.dom.clear);if(!this.s.isChild){this.dom.search.css('display','inline-block')}
this.dom.container.prepend(this.dom.logicContainer);for(var _i=0,_a=this.s.criteria;_i<_a.length;_i++){var crit=_a[_i];if(crit.criteria instanceof Criteria){crit.criteria.setupButtons()}}
var height=this.dom.container.outerHeight()-1;this.dom.logicContainer.width(height);this._setLogicListener();this.dom.container.css('margin-left',this.dom.logicContainer.outerHeight(!0));var logicOffset=this.dom.logicContainer.offset();var currentLeft=logicOffset.left;var groupLeft=this.dom.container.offset().left;var shuffleLeft=currentLeft-groupLeft;var newPos=currentLeft-shuffleLeft-this.dom.logicContainer.outerHeight(!0);this.dom.logicContainer.offset({left:newPos});var firstCrit=this.dom.logicContainer.next();var currentTop=logicOffset.top;var firstTop=$$2(firstCrit).offset().top;var shuffleTop=currentTop-firstTop;var newTop=currentTop-shuffleTop;this.dom.logicContainer.offset({top:newTop});this.dom.clear.outerHeight(this.dom.logicContainer.height());this._setClearListener()};Group.prototype.setListeners=function(){var _this=this;this.dom.add.unbind('click');this.dom.add.on('click.dtsb',function(){if(!_this.s.isChild){_this.dom.container.prepend(_this.dom.logicContainer)}
_this.addCriteria();_this.dom.container.trigger('dtsb-add');_this.s.dt.state.save();return!1});this.dom.search.off('click.dtsb').on('click.dtsb',function(){_this.s.dt.draw()});for(var _i=0,_a=this.s.criteria;_i<_a.length;_i++){var crit=_a[_i];crit.criteria.setListeners()}
this._setClearListener();this._setLogicListener()};Group.prototype.addCriteria=function(crit){if(crit===void 0){crit=null}
var index=crit===null?this.s.criteria.length:crit.s.index;var criteria=new Criteria(this.s.dt,this.s.opts,this.s.topGroup,index,this.s.depth,this.s.serverData,this.c.liveSearch);if(crit!==null){criteria.c=crit.c;criteria.s=crit.s;criteria.s.depth=this.s.depth;criteria.classes=crit.classes}
criteria.populate();var inserted=!1;for(var i=0;i<this.s.criteria.length;i++){if(i===0&&this.s.criteria[i].criteria.s.index>criteria.s.index){criteria.getNode().insertBefore(this.s.criteria[i].criteria.dom.container);inserted=!0}else if(i<this.s.criteria.length-1&&this.s.criteria[i].criteria.s.index<criteria.s.index&&this.s.criteria[i+1].criteria.s.index>criteria.s.index){criteria.getNode().insertAfter(this.s.criteria[i].criteria.dom.container);inserted=!0}}
if(!inserted){criteria.getNode().insertBefore(this.dom.add)}
this.s.criteria.push({criteria:criteria,index:index});this.s.criteria=this.s.criteria.sort(function(a,b){return a.criteria.s.index-b.criteria.s.index});for(var _i=0,_a=this.s.criteria;_i<_a.length;_i++){var opt=_a[_i];if(opt.criteria instanceof Criteria){opt.criteria.updateArrows(this.s.criteria.length>1)}}
this._setCriteriaListeners(criteria);criteria.setListeners();this.setupLogic()};Group.prototype.checkFilled=function(){for(var _i=0,_a=this.s.criteria;_i<_a.length;_i++){var crit=_a[_i];if(crit.criteria instanceof Criteria&&crit.criteria.s.filled||crit.criteria instanceof Group&&crit.criteria.checkFilled()){return!0}}
return!1};Group.prototype.count=function(){var count=0;for(var _i=0,_a=this.s.criteria;_i<_a.length;_i++){var crit=_a[_i];if(crit.criteria instanceof Group){count+=crit.criteria.count()}else{count++}}
return count};Group.prototype._addPrevGroup=function(loadedGroup){var idx=this.s.criteria.length;var group=new Group(this.s.dt,this.c,this.s.topGroup,idx,!0,this.s.depth+1,this.s.serverData);this.s.criteria.push({criteria:group,index:idx,logic:group.s.logic});group.rebuild(loadedGroup);this.s.criteria[idx].criteria=group;this.s.topGroup.trigger('dtsb-redrawContents');this._setGroupListeners(group)};Group.prototype._addPrevCriteria=function(loadedCriteria){var idx=this.s.criteria.length;var criteria=new Criteria(this.s.dt,this.s.opts,this.s.topGroup,idx,this.s.depth,this.s.serverData);criteria.populate();this.s.criteria.push({criteria:criteria,index:idx});criteria.s.preventRedraw=this.s.preventRedraw;criteria.rebuild(loadedCriteria);criteria.s.preventRedraw=!1;this.s.criteria[idx].criteria=criteria;if(!this.s.preventRedraw){this.s.topGroup.trigger('dtsb-redrawContents')}};Group.prototype._andSearch=function(rowData,rowIdx){if(this.s.criteria.length===0){return!0}
for(var _i=0,_a=this.s.criteria;_i<_a.length;_i++){var crit=_a[_i];if(crit.criteria instanceof Criteria&&!crit.criteria.s.filled){continue}else if(!crit.criteria.search(rowData,rowIdx)){return!1}}
return!0};Group.prototype._orSearch=function(rowData,rowIdx){if(this.s.criteria.length===0){return!0}
var filledfound=!1;for(var _i=0,_a=this.s.criteria;_i<_a.length;_i++){var crit=_a[_i];if(crit.criteria instanceof Criteria&&crit.criteria.s.filled){filledfound=!0;if(crit.criteria.search(rowData,rowIdx)){return!0}}else if(crit.criteria instanceof Group&&crit.criteria.checkFilled()){filledfound=!0;if(crit.criteria.search(rowData,rowIdx)){return!0}}}
return!filledfound};Group.prototype._removeCriteria=function(criteria,group){if(group===void 0){group=!1}
var i;if(this.s.criteria.length<=1&&this.s.isChild){this.destroy()}else{var last=void 0;for(i=0;i<this.s.criteria.length;i++){if(this.s.criteria[i].index===criteria.s.index&&(!group||this.s.criteria[i].criteria instanceof Group)){last=i}}
if(last!==undefined){this.s.criteria.splice(last,1)}
for(i=0;i<this.s.criteria.length;i++){this.s.criteria[i].index=i;this.s.criteria[i].criteria.s.index=i}}};Group.prototype._setCriteriaListeners=function(criteria){var _this=this;criteria.dom["delete"].unbind('click').on('click.dtsb',function(){_this._removeCriteria(criteria);criteria.dom.container.remove();for(var _i=0,_a=_this.s.criteria;_i<_a.length;_i++){var crit=_a[_i];if(crit.criteria instanceof Criteria){crit.criteria.updateArrows(_this.s.criteria.length>1)}}
criteria.destroy();_this.s.dt.draw();_this.s.topGroup.trigger('dtsb-redrawContents');return!1});criteria.dom.right.unbind('click').on('click.dtsb',function(){var idx=criteria.s.index;var group=new Group(_this.s.dt,_this.s.opts,_this.s.topGroup,criteria.s.index,!0,_this.s.depth+1,_this.s.serverData);group.addCriteria(criteria);_this.s.criteria[idx].criteria=group;_this.s.criteria[idx].logic='AND';_this.s.topGroup.trigger('dtsb-redrawContents');_this._setGroupListeners(group);return!1});criteria.dom.left.unbind('click').on('click.dtsb',function(){_this.s.toDrop=new Criteria(_this.s.dt,_this.s.opts,_this.s.topGroup,criteria.s.index,undefined,_this.s.serverData);_this.s.toDrop.s=criteria.s;_this.s.toDrop.c=criteria.c;_this.s.toDrop.classes=criteria.classes;_this.s.toDrop.populate();var index=_this.s.toDrop.s.index;_this.dom.container.trigger('dtsb-dropCriteria');criteria.s.index=index;_this._removeCriteria(criteria);_this.s.topGroup.trigger('dtsb-redrawContents');_this.s.dt.draw();return!1})};Group.prototype._setClearListener=function(){var _this=this;this.dom.clear.unbind('click').on('click.dtsb',function(){if(!_this.s.isChild){_this.dom.container.trigger('dtsb-clearContents');return!1}
_this.destroy();_this.s.topGroup.trigger('dtsb-redrawContents');return!1})};Group.prototype._setGroupListeners=function(group){var _this=this;group.dom.add.unbind('click').on('click.dtsb',function(){_this.setupLogic();_this.dom.container.trigger('dtsb-add');return!1});group.dom.container.unbind('dtsb-add').on('dtsb-add.dtsb',function(){_this.setupLogic();_this.dom.container.trigger('dtsb-add');return!1});group.dom.container.unbind('dtsb-destroy').on('dtsb-destroy.dtsb',function(){_this._removeCriteria(group,!0);group.dom.container.remove();_this.setupLogic();return!1});group.dom.container.unbind('dtsb-dropCriteria').on('dtsb-dropCriteria.dtsb',function(){var toDrop=group.s.toDrop;toDrop.s.index=group.s.index;toDrop.updateArrows(_this.s.criteria.length>1);_this.addCriteria(toDrop);return!1});group.setListeners()};Group.prototype._setup=function(){this.setListeners();this.dom.add.html(this.s.dt.i18n('searchBuilder.add',this.c.i18n.add));this.dom.search.html(this.s.dt.i18n('searchBuilder.search',this.c.i18n.search));this.dom.logic.children().first().html(this.c.logic==='OR'?this.s.dt.i18n('searchBuilder.logicOr',this.c.i18n.logicOr):this.s.dt.i18n('searchBuilder.logicAnd',this.c.i18n.logicAnd));this.s.logic=this.c.logic==='OR'?'OR':'AND';if(this.c.greyscale){this.dom.logic.addClass(this.classes.greyscale)}
this.dom.logicContainer.append(this.dom.logic).append(this.dom.clear);if(this.s.isChild){this.dom.container.append(this.dom.logicContainer)}
this.dom.container.append(this.dom.add);if(!this.c.liveSearch){this.dom.container.append(this.dom.search)}};Group.prototype._setLogicListener=function(){var _this=this;this.dom.logic.unbind('click').on('click.dtsb',function(){_this._toggleLogic();_this.s.dt.draw();for(var _i=0,_a=_this.s.criteria;_i<_a.length;_i++){var crit=_a[_i];crit.criteria.setListeners()}})};Group.prototype._toggleLogic=function(){if(this.s.logic==='OR'){this.s.logic='AND';this.dom.logic.children().first().html(this.s.dt.i18n('searchBuilder.logicAnd',this.c.i18n.logicAnd))}else if(this.s.logic==='AND'){this.s.logic='OR';this.dom.logic.children().first().html(this.s.dt.i18n('searchBuilder.logicOr',this.c.i18n.logicOr))}};Group.version='1.1.0';Group.classes={add:'dtsb-add',button:'dtsb-button',clearGroup:'dtsb-clearGroup',greyscale:'dtsb-greyscale',group:'dtsb-group',inputButton:'dtsb-iptbtn',logic:'dtsb-logic',logicContainer:'dtsb-logicContainer',search:'dtsb-search'};Group.defaults={columns:!0,conditions:{'date':Criteria.dateConditions,'html':Criteria.stringConditions,'html-num':Criteria.numConditions,'html-num-fmt':Criteria.numFmtConditions,'luxon':Criteria.luxonDateConditions,'moment':Criteria.momentDateConditions,'num':Criteria.numConditions,'num-fmt':Criteria.numFmtConditions,'string':Criteria.stringConditions},depthLimit:!1,enterSearch:!1,filterChanged:undefined,greyscale:!1,liveSearch:!0,i18n:{add:'Add Condition',button:{0:'Search Builder',_:'Search Builder (%d)'},clearAll:'Clear All',condition:'Condition',data:'Data',"delete":'&times',deleteTitle:'Delete filtering rule',left:'<',leftTitle:'Outdent criteria',logicAnd:'And',logicOr:'Or',right:'>',rightTitle:'Indent criteria',search:'Search',title:{0:'Custom Search Builder',_:'Custom Search Builder (%d)'},value:'Value',valueJoiner:'and'},logic:'AND',orthogonal:{display:'display',search:'filter'},preDefined:!1};return Group}());var $$1;var dataTable$1;function setJQuery(jq){$$1=jq;dataTable$1=jq.fn.DataTable}
var SearchBuilder=(function(){function SearchBuilder(builderSettings,opts){var _this=this;if(!dataTable$1||!dataTable$1.versionCheck||!dataTable$1.versionCheck('1.10.0')){throw new Error('SearchBuilder requires DataTables 1.10 or newer')}
var table=new dataTable$1.Api(builderSettings);this.classes=$$1.extend(!0,{},SearchBuilder.classes);this.c=$$1.extend(!0,{},SearchBuilder.defaults,opts);this.dom={clearAll:$$1('<button type="button">'+table.i18n('searchBuilder.clearAll',this.c.i18n.clearAll)+'</button>').addClass(this.classes.clearAll).addClass(this.classes.button).attr('type','button'),container:$$1('<div/>').addClass(this.classes.container),title:$$1('<div/>').addClass(this.classes.title),titleRow:$$1('<div/>').addClass(this.classes.titleRow),topGroup:undefined};this.s={dt:table,opts:opts,search:undefined,serverData:undefined,topGroup:undefined};if(table.settings()[0]._searchBuilder!==undefined){return}
table.settings()[0]._searchBuilder=this;if(this.s.dt.page.info().serverSide){this.s.dt.on('preXhr.dtsb',function(e,settings,data){var loadedState=_this.s.dt.state.loaded();if(loadedState&&loadedState.searchBuilder){data.searchBuilder=_this._collapseArray(loadedState.searchBuilder)}});this.s.dt.on('xhr.dtsb',function(e,settings,json){if(json&&json.searchBuilder&&json.searchBuilder.options){_this.s.serverData=json.searchBuilder.options}})}
if(this.s.dt.settings()[0]._bInitComplete){this._setUp()}else{table.one('init.dt',function(){_this._setUp()})}
return this}
SearchBuilder.prototype.getDetails=function(deFormatDates){if(deFormatDates===void 0){deFormatDates=!1}
return this.s.topGroup.getDetails(deFormatDates)};SearchBuilder.prototype.getNode=function(){return this.dom.container};SearchBuilder.prototype.rebuild=function(details){this.dom.clearAll.click();if(details===undefined||details===null){return this}
this.s.topGroup.s.preventRedraw=!0;this.s.topGroup.rebuild(details);this.s.topGroup.s.preventRedraw=!1;this._checkClear();this._updateTitle(this.s.topGroup.count());this.s.topGroup.redrawContents();this.s.dt.draw(!1);this.s.topGroup.setListeners();return this};SearchBuilder.prototype._applyPreDefDefaults=function(preDef){var _this=this;if(preDef.criteria!==undefined&&preDef.logic===undefined){preDef.logic='AND'}
var _loop_1=function(crit){if(crit.criteria!==undefined){crit=this_1._applyPreDefDefaults(crit)}else{this_1.s.dt.columns().every(function(index){if(_this.s.dt.settings()[0].aoColumns[index].sTitle===crit.data){crit.dataIdx=index}})}};var this_1=this;for(var _i=0,_a=preDef.criteria;_i<_a.length;_i++){var crit=_a[_i];_loop_1(crit)}
return preDef};SearchBuilder.prototype._setUp=function(loadState){var _this=this;if(loadState===void 0){loadState=!0}
if(typeof this.s.dt.column().type!=='function'){DataTable.Api.registerPlural('columns().types()','column().type()',function(){return this.iterator('column',function(settings,column){return settings.aoColumns[column].sType},1)})}
if(!dataTable$1.DateTime){var types=this.s.dt.columns().types().toArray();if(types===undefined||types.includes(undefined)||types.includes(null)){types=[];for(var _i=0,_a=this.s.dt.settings()[0].aoColumns;_i<_a.length;_i++){var colInit=_a[_i];types.push(colInit.searchBuilderType!==undefined?colInit.searchBuilderType:colInit.sType)}}
var columnIdxs=this.s.dt.columns().toArray();if(types===undefined||types.includes(undefined)||types.includes(null)){if($$1.fn.dataTable.ext.oApi){$$1.fn.dataTable.ext.oApi._fnColumnTypes(this.s.dt.settings()[0])}
types=this.s.dt.columns().types().toArray()}
for(var i=0;i<columnIdxs[0].length;i++){var column=columnIdxs[0][i];var type=types[column];if((this.c.columns===!0||Array.isArray(this.c.columns)&&this.c.columns.includes(i))&&(type.includes('date')||type.includes('moment')||type.includes('luxon'))){alert('SearchBuilder Requires DateTime when used with dates.');throw new Error('SearchBuilder requires DateTime')}}}
this.s.topGroup=new Group(this.s.dt,this.c,undefined,undefined,undefined,undefined,this.s.serverData);this._setClearListener();this.s.dt.on('stateSaveParams.dtsb',function(e,settings,data){data.searchBuilder=_this.getDetails();if(!data.scroller){data.page=_this.s.dt.page()}else{data.start=_this.s.dt.state().start}});this.s.dt.on('stateLoadParams.dtsb',function(e,settings,data){_this.rebuild(data.searchBuilder)});this._build();this.s.dt.on('preXhr.dtsb',function(e,settings,data){if(_this.s.dt.page.info().serverSide){data.searchBuilder=_this._collapseArray(_this.getDetails(!0))}});this.s.dt.on(dataTable$1.versionCheck('2')?'columns-reordered':'column-reorder',function(){_this.rebuild(_this.getDetails())});if(loadState){var loadedState=this.s.dt.state.loaded();if(loadedState!==null&&loadedState.searchBuilder!==undefined){this.s.topGroup.rebuild(loadedState.searchBuilder);this.s.topGroup.dom.container.trigger('dtsb-redrawContents');if(!this.s.dt.page.info().serverSide){if(loadedState.page){this.s.dt.page(loadedState.page).draw('page')}else if(this.s.dt.scroller&&loadedState.scroller){this.s.dt.scroller().scrollToRow(loadedState.scroller.topRow)}}
this.s.topGroup.setListeners()}else if(this.c.preDefined!==!1){this.c.preDefined=this._applyPreDefDefaults(this.c.preDefined);this.rebuild(this.c.preDefined)}}
this._setEmptyListener();this.s.dt.state.save()};SearchBuilder.prototype._collapseArray=function(criteria){if(criteria.logic===undefined){if(criteria.value!==undefined){criteria.value.sort(function(a,b){if(!isNaN(+a)){a=+a;b=+b}
if(a<b){return-1}else if(b<a){return 1}else{return 0}});criteria.value1=criteria.value[0];criteria.value2=criteria.value[1]}}else{for(var i=0;i<criteria.criteria.length;i++){criteria.criteria[i]=this._collapseArray(criteria.criteria[i])}}
return criteria};SearchBuilder.prototype._updateTitle=function(count){this.dom.title.html(this.s.dt.i18n('searchBuilder.title',this.c.i18n.title,count))};SearchBuilder.prototype._build=function(){var _this=this;this.dom.clearAll.remove();this.dom.container.empty();var count=this.s.topGroup.count();this._updateTitle(count);this.dom.titleRow.append(this.dom.title);this.dom.container.append(this.dom.titleRow);this.dom.topGroup=this.s.topGroup.getNode();this.dom.container.append(this.dom.topGroup);this._setRedrawListener();var tableNode=this.s.dt.table(0).node();if(!$$1.fn.dataTable.ext.search.includes(this.s.search)){this.s.search=function(settings,searchData,dataIndex){if(settings.nTable!==tableNode){return!0}
return _this.s.topGroup.search(searchData,dataIndex)};$$1.fn.dataTable.ext.search.push(this.s.search)}
this.s.dt.on('destroy.dtsb',function(){_this.dom.container.remove();_this.dom.clearAll.remove();var searchIdx=$$1.fn.dataTable.ext.search.indexOf(_this.s.search);while(searchIdx!==-1){$$1.fn.dataTable.ext.search.splice(searchIdx,1);searchIdx=$$1.fn.dataTable.ext.search.indexOf(_this.s.search)}
_this.s.dt.off('.dtsb');$$1(_this.s.dt.table().node()).off('.dtsb')})};SearchBuilder.prototype._checkClear=function(){if(this.s.topGroup.s.criteria.length>0){this.dom.clearAll.insertAfter(this.dom.title);this._setClearListener()}else{this.dom.clearAll.remove()}};SearchBuilder.prototype._filterChanged=function(count){var fn=this.c.filterChanged;if(typeof fn==='function'){fn(count,this.s.dt.i18n('searchBuilder.button',this.c.i18n.button,count))}};SearchBuilder.prototype._setClearListener=function(){var _this=this;this.dom.clearAll.unbind('click');this.dom.clearAll.on('click.dtsb',function(){_this.s.topGroup=new Group(_this.s.dt,_this.c,undefined,undefined,undefined,undefined,_this.s.serverData);_this._build();_this.s.dt.draw();_this.s.topGroup.setListeners();_this.dom.clearAll.remove();_this._setEmptyListener();_this._filterChanged(0);return!1})};SearchBuilder.prototype._setRedrawListener=function(){var _this=this;this.s.topGroup.dom.container.unbind('dtsb-redrawContents');this.s.topGroup.dom.container.on('dtsb-redrawContents.dtsb',function(){_this._checkClear();_this.s.topGroup.redrawContents();_this.s.topGroup.setupLogic();_this._setEmptyListener();var count=_this.s.topGroup.count();_this._updateTitle(count);_this._filterChanged(count);if(!_this.s.dt.page.info().serverSide){_this.s.dt.draw()}
_this.s.dt.state.save()});this.s.topGroup.dom.container.unbind('dtsb-redrawContents-noDraw');this.s.topGroup.dom.container.on('dtsb-redrawContents-noDraw.dtsb',function(){_this._checkClear();_this.s.topGroup.s.preventRedraw=!0;_this.s.topGroup.redrawContents();_this.s.topGroup.s.preventRedraw=!1;_this.s.topGroup.setupLogic();_this._setEmptyListener();var count=_this.s.topGroup.count();_this._updateTitle(count);_this._filterChanged(count)});this.s.topGroup.dom.container.unbind('dtsb-redrawLogic');this.s.topGroup.dom.container.on('dtsb-redrawLogic.dtsb',function(){_this.s.topGroup.redrawLogic();var count=_this.s.topGroup.count();_this._updateTitle(count);_this._filterChanged(count)});this.s.topGroup.dom.container.unbind('dtsb-add');this.s.topGroup.dom.container.on('dtsb-add.dtsb',function(){var count=_this.s.topGroup.count();_this._updateTitle(count);_this._filterChanged(count);_this._checkClear()});this.s.dt.on('postEdit.dtsb postCreate.dtsb postRemove.dtsb',function(){_this.s.topGroup.redrawContents()});this.s.topGroup.dom.container.unbind('dtsb-clearContents');this.s.topGroup.dom.container.on('dtsb-clearContents.dtsb',function(){_this._setUp(!1);_this._filterChanged(0);_this.s.dt.draw()})};SearchBuilder.prototype._setEmptyListener=function(){var _this=this;this.s.topGroup.dom.add.on('click.dtsb',function(){_this._checkClear()});this.s.topGroup.dom.container.on('dtsb-destroy.dtsb',function(){_this.dom.clearAll.remove()})};SearchBuilder.version='1.7.1';SearchBuilder.classes={button:'dtsb-button',clearAll:'dtsb-clearAll',container:'dtsb-searchBuilder',inputButton:'dtsb-iptbtn',title:'dtsb-title',titleRow:'dtsb-titleRow'};SearchBuilder.defaults={columns:!0,conditions:{'date':Criteria.dateConditions,'html':Criteria.stringConditions,'html-num':Criteria.numConditions,'html-num-fmt':Criteria.numFmtConditions,'luxon':Criteria.luxonDateConditions,'moment':Criteria.momentDateConditions,'num':Criteria.numConditions,'num-fmt':Criteria.numFmtConditions,'string':Criteria.stringConditions},depthLimit:!1,enterSearch:!1,filterChanged:undefined,greyscale:!1,liveSearch:!0,i18n:{add:'Add Condition',button:{0:'Search Builder',_:'Search Builder (%d)'},clearAll:'Clear All',condition:'Condition',conditions:{array:{contains:'Contains',empty:'Empty',equals:'Equals',not:'Not',notEmpty:'Not Empty',without:'Without'},date:{after:'After',before:'Before',between:'Between',empty:'Empty',equals:'Equals',not:'Not',notBetween:'Not Between',notEmpty:'Not Empty'},number:{between:'Between',empty:'Empty',equals:'Equals',gt:'Greater Than',gte:'Greater Than Equal To',lt:'Less Than',lte:'Less Than Equal To',not:'Not',notBetween:'Not Between',notEmpty:'Not Empty'},string:{contains:'Contains',empty:'Empty',endsWith:'Ends With',equals:'Equals',not:'Not',notContains:'Does Not Contain',notEmpty:'Not Empty',notEndsWith:'Does Not End With',notStartsWith:'Does Not Start With',startsWith:'Starts With'}},data:'Data',"delete":'&times',deleteTitle:'Delete filtering rule',left:'<',leftTitle:'Outdent criteria',logicAnd:'And',logicOr:'Or',right:'>',rightTitle:'Indent criteria',search:'Search',title:{0:'Custom Search Builder',_:'Custom Search Builder (%d)'},value:'Value',valueJoiner:'and'},logic:'AND',orthogonal:{display:'display',search:'filter'},preDefined:!1};return SearchBuilder}());/*! SearchBuilder 1.7.1
     * ©SpryMedia Ltd - datatables.net/license/mit
     */
setJQuery($);setJQuery$1($);setJQuery$2($);var dataTable=$.fn.dataTable;DataTable.SearchBuilder=SearchBuilder;dataTable.SearchBuilder=SearchBuilder;DataTable.Group=Group;dataTable.Group=Group;DataTable.Criteria=Criteria;dataTable.Criteria=Criteria;var apiRegister=DataTable.Api.register;DataTable.ext.searchBuilder={conditions:{}};DataTable.ext.buttons.searchBuilder={action:function(e,dt,node,config){this.popover(config._searchBuilder.getNode(),{align:'container',span:'container'});var topGroup=config._searchBuilder.s.topGroup;if(topGroup!==undefined){topGroup.dom.container.trigger('dtsb-redrawContents-noDraw')}
if(topGroup.s.criteria.length===0){$('.'+$.fn.dataTable.Group.classes.add.replace(/ /g,'.')).click()}},config:{},init:function(dt,node,config){var sb=new DataTable.SearchBuilder(dt,$.extend({filterChanged:function(count,text){dt.button(node).text(text)}},config.config));dt.button(node).text(config.text||dt.i18n('searchBuilder.button',sb.c.i18n.button,0));config._searchBuilder=sb},text:null};apiRegister('searchBuilder.getDetails()',function(deFormatDates){if(deFormatDates===void 0){deFormatDates=!1}
var ctx=this.context[0];return ctx._searchBuilder?ctx._searchBuilder.getDetails(deFormatDates):null});apiRegister('searchBuilder.rebuild()',function(details){var ctx=this.context[0];if(ctx._searchBuilder===undefined){return null}
ctx._searchBuilder.rebuild(details);return this});apiRegister('searchBuilder.container()',function(){var ctx=this.context[0];return ctx._searchBuilder?ctx._searchBuilder.getNode():null});function _init(settings,options){var api=new DataTable.Api(settings);var opts=options?options:api.init().searchBuilder||DataTable.defaults.searchBuilder;var searchBuilder=new SearchBuilder(api,opts);var node=searchBuilder.getNode();return node}
$(document).on('preInit.dt.dtsp',function(e,settings){if(e.namespace!=='dt'){return}
if(settings.oInit.searchBuilder||DataTable.defaults.searchBuilder){if(!settings._searchBuilder){_init(settings)}}});DataTable.ext.feature.push({cFeature:'Q',fnInit:_init});if(DataTable.feature){DataTable.feature.register('searchBuilder',_init)}})();return DataTable}));
/*! DataTables integration for DataTables' SearchBuilder
 * © SpryMedia Ltd - datatables.net/license
 */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','datatables.net-dt','datatables.net-searchbuilder'],function($){return factory($,window,document)})}else if(typeof exports==='object'){var jq=require('jquery');var cjsRequires=function(root,$){if(!$.fn.dataTable){require('datatables.net-dt')(root,$)}
if(!$.fn.dataTable.SearchBuilder){require('datatables.net-searchbuilder')(root,$)}};if(typeof window==='undefined'){module.exports=function(root,$){if(!root){root=window}
if(!$){$=jq(root)}
cjsRequires(root,$);return factory($,root,root.document)}}else{cjsRequires(window,jq);module.exports=factory(jq,window,window.document)}}else{factory(jQuery,window,document)}}(function($,window,document){'use strict';var DataTable=$.fn.dataTable;return DataTable}));
/*! SearchPanes 2.3.1
 * © SpryMedia Ltd - datatables.net/license
 */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','datatables.net'],function($){return factory($,window,document)})}else if(typeof exports==='object'){var jq=require('jquery');var cjsRequires=function(root,$){if(!$.fn.dataTable){require('datatables.net')(root,$)}};if(typeof window==='undefined'){module.exports=function(root,$){if(!root){root=window}
if(!$){$=jq(root)}
cjsRequires(root,$);return factory($,root,root.document)}}else{cjsRequires(window,jq);module.exports=factory(jq,window,window.document)}}else{factory(jQuery,window,document)}}(function($,window,document){'use strict';var DataTable=$.fn.dataTable;(function(){'use strict';var $$5;var dataTable$2;function setJQuery$4(jq){$$5=jq;dataTable$2=jq.fn.dataTable}
var SearchPane=(function(){function SearchPane(paneSettings,opts,index,panesContainer,panes){var _this=this;if(panes===void 0){panes=null}
if(!dataTable$2||!dataTable$2.versionCheck||!dataTable$2.versionCheck('1.10.0')){throw new Error('SearchPane requires DataTables 1.10 or newer')}
if(!dataTable$2.select){throw new Error('SearchPane requires Select')}
var table=new dataTable$2.Api(paneSettings);this.classes=$$5.extend(!0,{},SearchPane.classes);this.c=$$5.extend(!0,{},SearchPane.defaults,opts,panes);if(opts&&opts.hideCount&&opts.viewCount===undefined){this.c.viewCount=!this.c.hideCount}
var rowLength=table.columns().eq(0).toArray().length;this.s={colExists:index<rowLength,colOpts:undefined,customPaneSettings:panes,displayed:!1,dt:table,dtPane:undefined,firstSet:!0,index:index,indexes:[],listSet:!1,name:undefined,rowData:{arrayFilter:[],arrayOriginal:[],bins:{},binsOriginal:{},filterMap:new Map(),totalOptions:0},scrollTop:0,searchFunction:undefined,selections:[],serverSelect:[],serverSelecting:!1,tableLength:null,updating:!1};this.s.colOpts=this.s.colExists?this._getOptions():this._getBonusOptions();this.dom={buttonGroup:$$5('<div/>').addClass(this.classes.buttonGroup),clear:$$5('<button type="button">&#215;</button>').attr('disabled','true').addClass(this.classes.disabledButton).addClass(this.classes.paneButton).addClass(this.classes.clearButton).html(this.s.dt.i18n('searchPanes.clearPane',this.c.i18n.clearPane)),collapseButton:$$5('<button type="button"><span class="'+this.classes.caret+'">&#x5e;</span></button>').addClass(this.classes.paneButton).addClass(this.classes.collapseButton),container:$$5('<div/>').addClass(this.classes.container).addClass(this.s.colOpts.className).addClass(this.classes.layout+(parseInt(this.c.layout.split('-')[1],10)<10?this.c.layout:this.c.layout.split('-')[0]+'-9')).addClass(this.s.customPaneSettings&&this.s.customPaneSettings.className?this.s.customPaneSettings.className:''),countButton:$$5('<button type="button"><span></span></button>').addClass(this.classes.paneButton).addClass(this.classes.countButton),dtP:$$5('<table width="100%"><thead><tr><th></th><th></th></tr></thead></table>'),lower:$$5('<div/>').addClass(this.classes.subRow2).addClass(this.classes.narrowButton),nameButton:$$5('<button type="button"><span></span></button>').addClass(this.classes.paneButton).addClass(this.classes.nameButton),panesContainer:$$5(panesContainer),searchBox:$$5('<input/>').addClass(this.classes.paneInputButton).addClass(this.classes.search),searchButton:$$5('<button type="button"><span></span></button>').addClass(this.classes.searchIcon).addClass(this.classes.paneButton),searchCont:$$5('<div/>').addClass(this.classes.searchCont),searchLabelCont:$$5('<div/>').addClass(this.classes.searchLabelCont),topRow:$$5('<div/>').addClass(this.classes.topRow),upper:$$5('<div/>').addClass(this.classes.subRow1).addClass(this.classes.narrowSearch)};var title='';if(this.s.colExists){title=$$5(this.s.dt.column(this.s.index).header()).text();this.dom.dtP.find('th').eq(0).text(title)}else{title=this.s.customPaneSettings.header||'Custom Pane';this.dom.dtP.find('th').eq(0).html(title)}
if(this.s.colOpts.name){this.s.name=this.s.colOpts.name}else if(this.s.customPaneSettings&&this.s.customPaneSettings.name){this.s.name=this.s.customPaneSettings.name}else{this.s.name=title}
var tableNode=this.s.dt.table(0).node();this.s.searchFunction=function(settings,searchData,dataIndex){if(_this.s.selections.length===0){return!0}
if(settings.nTable!==tableNode){return!0}
var filter=null;if(_this.s.colExists){filter=searchData[_this.s.index];if(_this.s.colOpts.orthogonal.filter!=='filter'){filter=_this.s.rowData.filterMap.get(dataIndex);if(filter instanceof $$5.fn.dataTable.Api){filter=filter.toArray()}}}
return _this._search(filter,dataIndex)};$$5.fn.dataTable.ext.search.push(this.s.searchFunction);if(this.c.clear){this.dom.clear.on('click.dtsp',function(){var searches=_this.dom.container.find('.'+_this.classes.search.replace(/\s+/g,'.'));searches.each(function(){$$5(this).val('').trigger('input')});_this.clearPane()})}
this.s.dt.on('draw.dtsp',function(){return _this.adjustTopRow()});this.s.dt.on('buttons-action.dtsp',function(){return _this.adjustTopRow()});this.s.dt.on('column-reorder.dtsp',function(e,settings,details){_this.s.index=details.mapping[_this.s.index]});return this}
SearchPane.prototype.addRow=function(display,filter,sort,type,className,total,shown){if(!total){total=this.s.rowData.bins[filter]?this.s.rowData.bins[filter]:0}
if(!shown){shown=this._getShown(filter)}
var index;for(var _i=0,_a=this.s.indexes;_i<_a.length;_i++){var entry=_a[_i];if(entry.filter===filter){index=entry.index}}
if(index===undefined){index=this.s.indexes.length;this.s.indexes.push({filter:filter,index:index})}
return this.s.dtPane.row.add({className:className,display:display!==''?display:this.emptyMessage(),filter:filter,index:index,shown:shown,sort:sort,total:total,type:type})};SearchPane.prototype.adjustTopRow=function(){var subContainers=this.dom.container.find('.'+this.classes.subRowsContainer.replace(/\s+/g,'.'));var subRow1=this.dom.container.find('.'+this.classes.subRow1.replace(/\s+/g,'.'));var subRow2=this.dom.container.find('.'+this.classes.subRow2.replace(/\s+/g,'.'));var topRow=this.dom.container.find('.'+this.classes.topRow.replace(/\s+/g,'.'));if(($$5(subContainers[0]).width()<252||$$5(topRow[0]).width()<252)&&$$5(subContainers[0]).width()!==0){$$5(subContainers[0]).addClass(this.classes.narrow);$$5(subRow1[0]).addClass(this.classes.narrowSub).removeClass(this.classes.narrowSearch);$$5(subRow2[0]).addClass(this.classes.narrowSub).removeClass(this.classes.narrowButton)}else{$$5(subContainers[0]).removeClass(this.classes.narrow);$$5(subRow1[0]).removeClass(this.classes.narrowSub).addClass(this.classes.narrowSearch);$$5(subRow2[0]).removeClass(this.classes.narrowSub).addClass(this.classes.narrowButton)}};SearchPane.prototype.clearData=function(){this.s.rowData={arrayFilter:[],arrayOriginal:[],bins:{},binsOriginal:{},filterMap:new Map(),totalOptions:0}};SearchPane.prototype.clearPane=function(){this.s.dtPane.rows({selected:!0}).deselect();this.updateTable();return this};SearchPane.prototype.collapse=function(){var _this=this;if(!this.s.displayed||(!this.c.collapse&&this.s.colOpts.collapse!==!0||this.s.colOpts.collapse===!1)){return}
$$5(this.s.dtPane.table().container()).addClass(this.classes.hidden);this.dom.topRow.addClass(this.classes.bordered);this.dom.nameButton.addClass(this.classes.disabledButton);this.dom.countButton.addClass(this.classes.disabledButton);this.dom.searchButton.addClass(this.classes.disabledButton);this.dom.collapseButton.addClass(this.classes.rotated);this.dom.topRow.one('click.dtsp',function(){return _this.show()});this.dom.topRow.trigger('collapse.dtsps')};SearchPane.prototype.destroy=function(){if(this.s.dtPane){this.s.dtPane.off('.dtsp')}
this.s.dt.off('.dtsp');this.dom.clear.off('.dtsp');this.dom.nameButton.off('.dtsp');this.dom.countButton.off('.dtsp');this.dom.searchButton.off('.dtsp');this.dom.collapseButton.off('.dtsp');$$5(this.s.dt.table().node()).off('.dtsp');this.dom.container.detach();var searchIdx=$$5.fn.dataTable.ext.search.indexOf(this.s.searchFunction);while(searchIdx!==-1){$$5.fn.dataTable.ext.search.splice(searchIdx,1);searchIdx=$$5.fn.dataTable.ext.search.indexOf(this.s.searchFunction)}
if(this.s.dtPane){this.s.dtPane.destroy()}
this.s.listSet=!1};SearchPane.prototype.emptyMessage=function(){var def=this.c.i18n.emptyMessage;if(this.c.emptyMessage){def=this.c.emptyMessage}
if(this.s.colOpts.emptyMessage!==!1&&this.s.colOpts.emptyMessage!==null){def=this.s.colOpts.emptyMessage}
return this.s.dt.i18n('searchPanes.emptyMessage',def)};SearchPane.prototype.getPaneCount=function(){return this.s.dtPane?this.s.dtPane.rows({selected:!0}).data().toArray().length:0};SearchPane.prototype.rebuildPane=function(dataIn,maintainSelection){if(dataIn===void 0){dataIn=null}
if(maintainSelection===void 0){maintainSelection=!1}
this.clearData();var selectedRows=[];this.s.serverSelect=[];var prevEl=null;if(this.s.dtPane){if(maintainSelection){if(!this.s.dt.page.info().serverSide){selectedRows=this.s.dtPane.rows({selected:!0}).data().toArray()}else{this.s.serverSelect=this.s.dtPane.rows({selected:!0}).data().toArray()}}
this.s.dtPane.clear().destroy();prevEl=this.dom.container.prev();this.destroy();this.s.dtPane=undefined;$$5.fn.dataTable.ext.search.push(this.s.searchFunction)}
this.dom.container.removeClass(this.classes.hidden);this.s.displayed=!1;this._buildPane(!this.s.dt.page.info().serverSide?selectedRows:this.s.serverSelect,dataIn,prevEl);return this};SearchPane.prototype.resize=function(layout){this.c.layout=layout;this.dom.container.removeClass().addClass(this.classes.show).addClass(this.classes.container).addClass(this.s.colOpts.className).addClass(this.classes.layout+(parseInt(layout.split('-')[1],10)<10?layout:layout.split('-')[0]+'-9')).addClass(this.s.customPaneSettings!==null&&this.s.customPaneSettings.className?this.s.customPaneSettings.className:'');this.adjustTopRow()};SearchPane.prototype.setListeners=function(){var _this=this;if(!this.s.dtPane){return}
this.s.dtPane.off('select.dtsp').on('select.dtsp',function(){clearTimeout(_this.s.deselectTimeout);_this._updateSelection(!_this.s.updating);_this.dom.clear.removeClass(_this.classes.disabledButton).removeAttr('disabled')});this.s.dtPane.off('deselect.dtsp').on('deselect.dtsp',function(){_this.s.deselectTimeout=setTimeout(function(){_this._updateSelection(!0);if(_this.s.dtPane.rows({selected:!0}).data().toArray().length===0){_this.dom.clear.addClass(_this.classes.disabledButton).attr('disabled','true')}},50)});if(this.s.firstSet){this.s.firstSet=!1;this.s.dt.on('stateSaveParams.dtsp',function(e,settings,data){if($$5.isEmptyObject(data)){_this.s.dtPane.state.clear();return}
var bins;var order;var selected=[];var collapsed;var searchTerm;var arrayFilter;if(_this.s.dtPane){selected=_this.s.dtPane.rows({selected:!0}).data().map(function(item){return item.filter!==null?item.filter.toString():null}).toArray();searchTerm=_this.dom.searchBox.val();order=_this.s.dtPane.order();bins=_this.s.rowData.binsOriginal;arrayFilter=_this.s.rowData.arrayOriginal;collapsed=_this.dom.collapseButton.hasClass(_this.classes.rotated)}
if(data.searchPanes===undefined){data.searchPanes={}}
if(data.searchPanes.panes===undefined){data.searchPanes.panes=[]}
for(var i=0;i<data.searchPanes.panes.length;i++){if(data.searchPanes.panes[i].id===_this.s.index){data.searchPanes.panes.splice(i,1);i--}}
data.searchPanes.panes.push({arrayFilter:arrayFilter,bins:bins,collapsed:collapsed,id:_this.s.index,order:order,searchTerm:searchTerm,selected:selected})})}
this.s.dtPane.off('user-select.dtsp').on('user-select.dtsp',function(e,_dt,type,cell,originalEvent){originalEvent.stopPropagation()});this.s.dtPane.off('draw.dtsp').on('draw.dtsp',function(){return _this.adjustTopRow()});this.dom.nameButton.off('click.dtsp').on('click.dtsp',function(){var currentOrder=_this.s.dtPane.order()[0][1];_this.s.dtPane.order([0,currentOrder==='asc'?'desc':'asc']).draw();_this.s.dt.state.save()});this.dom.countButton.off('click.dtsp').on('click.dtsp',function(){var currentOrder=_this.s.dtPane.order()[0][1];_this.s.dtPane.order([1,currentOrder==='asc'?'desc':'asc']).draw();_this.s.dt.state.save()});this.dom.collapseButton.off('click.dtsp').on('click.dtsp',function(e){e.stopPropagation();var container=$$5(_this.s.dtPane.table().container());container.toggleClass(_this.classes.hidden);_this.dom.topRow.toggleClass(_this.classes.bordered);_this.dom.nameButton.toggleClass(_this.classes.disabledButton);_this.dom.countButton.toggleClass(_this.classes.disabledButton);_this.dom.searchButton.toggleClass(_this.classes.disabledButton);_this.dom.collapseButton.toggleClass(_this.classes.rotated);if(container.hasClass(_this.classes.hidden)){_this.dom.topRow.on('click.dtsp',function(){return _this.dom.collapseButton.click()})}else{_this.dom.topRow.off('click.dtsp')}
_this.s.dt.state.save();_this.dom.topRow.trigger('collapse.dtsps')});this.dom.clear.off('click.dtsp').on('click.dtsp',function(){var searches=_this.dom.container.find('.'+_this.classes.search.replace(/ /g,'.'));searches.each(function(){$$5(this).val('').trigger('input')});_this.clearPane()});this.dom.searchButton.off('click.dtsp').on('click.dtsp',function(){return _this.dom.searchBox.focus()});this.dom.searchBox.off('click.dtsp').on('input.dtsp',function(){var searchval=_this.dom.searchBox.val();_this.s.dtPane.search(searchval).draw();if(typeof searchval==='string'&&(searchval.length>0||searchval.length===0&&_this.s.dtPane.rows({selected:!0}).data().toArray().length>0)){_this.dom.clear.removeClass(_this.classes.disabledButton).removeAttr('disabled')}else{_this.dom.clear.addClass(_this.classes.disabledButton).attr('disabled','true')}
_this.s.dt.state.save()});this.s.dtPane.select.style(this.s.colOpts.dtOpts&&this.s.colOpts.dtOpts.select&&this.s.colOpts.dtOpts.select.style?this.s.colOpts.dtOpts.select.style:this.c.dtOpts&&this.c.dtOpts.select&&this.c.dtOpts.select.style?this.c.dtOpts.select.style:'os')};SearchPane.prototype._serverPopulate=function(dataIn){if(dataIn.tableLength){this.s.tableLength=dataIn.tableLength;this.s.rowData.totalOptions=this.s.tableLength}else if(this.s.tableLength===null||this.s.dt.rows()[0].length>this.s.tableLength){this.s.tableLength=this.s.dt.rows()[0].length;this.s.rowData.totalOptions=this.s.tableLength}
var colTitle=this.s.dt.column(this.s.index).dataSrc();if(dataIn.searchPanes.options[colTitle]){for(var _i=0,_a=dataIn.searchPanes.options[colTitle];_i<_a.length;_i++){var dataPoint=_a[_i];this.s.rowData.arrayFilter.push({display:dataPoint.label,filter:dataPoint.value,sort:dataPoint.label,type:dataPoint.label});this.s.rowData.bins[dataPoint.value]=dataPoint.total}}
var binLength=Object.keys(this.s.rowData.bins).length;var uniqueRatio=this._uniqueRatio(binLength,this.s.tableLength);if(this.s.displayed===!1&&((this.s.colOpts.show===undefined&&this.s.colOpts.threshold===null?uniqueRatio>this.c.threshold:uniqueRatio>this.s.colOpts.threshold)||this.s.colOpts.show!==!0&&binLength<=1)){this.dom.container.addClass(this.classes.hidden);this.s.displayed=!1;return}
this.s.rowData.arrayOriginal=this.s.rowData.arrayFilter;this.s.rowData.binsOriginal=this.s.rowData.bins;this.s.displayed=!0};SearchPane.prototype.show=function(){if(!this.s.displayed){return}
this.dom.topRow.removeClass(this.classes.bordered);this.dom.nameButton.removeClass(this.classes.disabledButton);this.dom.countButton.removeClass(this.classes.disabledButton);this.dom.searchButton.removeClass(this.classes.disabledButton);this.dom.collapseButton.removeClass(this.classes.rotated);$$5(this.s.dtPane.table().container()).removeClass(this.classes.hidden);this.dom.topRow.trigger('collapse.dtsps')};SearchPane.prototype._uniqueRatio=function(bins,rowCount){if(rowCount>0&&(this.s.rowData.totalOptions>0&&!this.s.dt.page.info().serverSide||this.s.dt.page.info().serverSide&&this.s.tableLength>0)){return bins/this.s.rowData.totalOptions}
return 1};SearchPane.prototype.updateTable=function(){var selectedRows=this.s.dtPane.rows({selected:!0}).data().toArray().map(function(el){return el.filter});this.s.selections=selectedRows;this._searchExtras()};SearchPane.prototype._getComparisonRows=function(){var options=this.s.colOpts.options?this.s.colOpts.options:this.s.customPaneSettings&&this.s.customPaneSettings.options?this.s.customPaneSettings.options:undefined;if(options===undefined){return}
var allRows=this.s.dt.rows();var tableValsTotal=allRows.data().toArray();var rows=[];this.s.dtPane.clear();this.s.indexes=[];for(var _i=0,options_1=options;_i<options_1.length;_i++){var comp=options_1[_i];var insert=comp.label!==''?comp.label:this.emptyMessage();var comparisonObj={className:comp.className,display:insert,filter:typeof comp.value==='function'?comp.value:[],sort:comp.order!==undefined?comp.order:insert,total:0,type:insert};if(typeof comp.value==='function'){for(var i=0;i<tableValsTotal.length;i++){if(comp.value.call(this.s.dt,tableValsTotal[i],allRows[0][i])){comparisonObj.total++}}
if(typeof comparisonObj.filter!=='function'){comparisonObj.filter.push(comp.filter)}}
rows.push(this.addRow(comparisonObj.display,comparisonObj.filter,comparisonObj.sort,comparisonObj.type,comparisonObj.className,comparisonObj.total))}
return rows};SearchPane.prototype._getMessage=function(row){return this.s.dt.i18n('searchPanes.count',this.c.i18n.count).replace(/{total}/g,row.total)};SearchPane.prototype._getShown=function(filter){return undefined};SearchPane.prototype._getPaneConfig=function(){var _this=this;var haveScroller=dataTable$2.Scroller;var langOpts=this.s.dt.settings()[0].oLanguage;langOpts.url=undefined;langOpts.sUrl=undefined;return{columnDefs:[{className:'dtsp-nameColumn',data:'display',render:function(data,type,row){if(type==='sort'){return row.sort}else if(type==='type'){return row.type}
var message=_this._getMessage(row);var pill='<span class="'+_this.classes.pill+'">'+message+'</span>';if(!_this.c.viewCount||!_this.s.colOpts.viewCount){pill=''}
if(type==='filter'){return typeof data==='string'&&data.match(/<[^>]*>/)!==null?data.replace(/<[^>]*>/g,''):data}
return'<div class="'+_this.classes.nameCont+'"><span title="'+(typeof data==='string'&&data.match(/<[^>]*>/)!==null?data.replace(/<[^>]*>/g,''):data)+'" class="'+_this.classes.name+'">'+data+'</span>'+pill+'</div>'},targets:0,type:this.s.dt.settings()[0].aoColumns[this.s.index]?this.s.dt.settings()[0].aoColumns[this.s.index]._sManualType:null},{className:'dtsp-countColumn '+this.classes.badgePill,data:'total',searchable:!1,targets:1,visible:!1}],deferRender:!0,info:!1,language:langOpts,paging:haveScroller?!0:!1,scrollX:!1,scrollY:'200px',scroller:haveScroller?!0:!1,select:!0,stateSave:this.s.dt.settings()[0].oFeatures.bStateSave?!0:!1}};SearchPane.prototype._makeSelection=function(){this.updateTable();this.s.updating=!0;this.s.dt.draw();this.s.updating=!1};SearchPane.prototype._populatePaneArray=function(rowIdx,arrayFilter,settings,bins){if(bins===void 0){bins=this.s.rowData.bins}
var fastData=settings.fastData?settings.fastData:function(row,col,orth){return settings.oApi._fnGetCellData(settings,row,col,orth)};if(typeof this.s.colOpts.orthogonal==='string'){var rendered=fastData(rowIdx,this.s.index,this.s.colOpts.orthogonal);this.s.rowData.filterMap.set(rowIdx,rendered);this._addOption(rendered,rendered,rendered,rendered,arrayFilter,bins);this.s.rowData.totalOptions++}else{var filter=fastData(rowIdx,this.s.index,this.s.colOpts.orthogonal.search);if(filter===null){filter=''}
if(typeof filter==='string'){filter=filter.replace(/<[^>]*>/g,'')}
this.s.rowData.filterMap.set(rowIdx,filter);if(!bins[filter]){bins[filter]=1;this._addOption(filter,fastData(rowIdx,this.s.index,this.s.colOpts.orthogonal.display),fastData(rowIdx,this.s.index,this.s.colOpts.orthogonal.sort),fastData(rowIdx,this.s.index,this.s.colOpts.orthogonal.type),arrayFilter,bins);this.s.rowData.totalOptions++}else{bins[filter]++;this.s.rowData.totalOptions++}}};SearchPane.prototype._reloadSelect=function(loadedFilter){if(loadedFilter===undefined){return}
var idx;for(var i=0;i<loadedFilter.searchPanes.panes.length;i++){if(loadedFilter.searchPanes.panes[i].id===this.s.index){idx=i;break}}
if(idx){var table=this.s.dtPane;var rows=table.rows({order:'index'}).data().map(function(item){return item.filter!==null?item.filter.toString():null}).toArray();for(var _i=0,_a=loadedFilter.searchPanes.panes[idx].selected;_i<_a.length;_i++){var filter=_a[_i];var id=-1;if(filter!==null){id=rows.indexOf(filter.toString())}
if(id>-1){this.s.serverSelecting=!0;table.row(id).select();this.s.serverSelecting=!1}}}};SearchPane.prototype._updateSelection=function(notUpdating){var _this=this;var processing=function(state){if(DataTable.versionCheck('2')){_this.s.dt.processing(state)}else{var settings=_this.s.dt.settings()[0];var oApi=settings.oApi;oApi._fnProcessingDisplay(settings,!1)}};var run=function(){_this.s.scrollTop=$$5(_this.s.dtPane.table().node()).parent()[0].scrollTop;if(_this.s.dt.page.info().serverSide&&!_this.s.updating){if(!_this.s.serverSelecting){_this.s.serverSelect=_this.s.dtPane.rows({selected:!0}).data().toArray();_this.s.dt.draw(!1)}}else if(notUpdating){_this._makeSelection()}
processing(!1)};processing(!0);setTimeout(run,1)};SearchPane.prototype._addOption=function(filter,display,sort,type,arrayFilter,bins){if(Array.isArray(filter)||filter instanceof dataTable$2.Api){if(filter instanceof dataTable$2.Api){filter=filter.toArray();display=display.toArray()}
if(filter.length===display.length){for(var i=0;i<filter.length;i++){if(!bins[filter[i]]){bins[filter[i]]=1;arrayFilter.push({display:display[i],filter:filter[i],sort:sort[i],type:type[i]})}else{bins[filter[i]]++}
this.s.rowData.totalOptions++}
return}
throw new Error('display and filter not the same length')}else if(typeof this.s.colOpts.orthogonal==='string'){if(!bins[filter]){bins[filter]=1;arrayFilter.push({display:display,filter:filter,sort:sort,type:type});this.s.rowData.totalOptions++}else{bins[filter]++;this.s.rowData.totalOptions++}}else{arrayFilter.push({display:display,filter:filter,sort:sort,type:type})}};SearchPane.prototype._buildPane=function(selectedRows,dataIn,prevEl){var _this=this;if(selectedRows===void 0){selectedRows=[]}
if(dataIn===void 0){dataIn=null}
if(prevEl===void 0){prevEl=null}
this.s.selections=[];var loadedFilter=this.s.dt.state.loaded();var row;if(this.s.listSet){loadedFilter=this.s.dt.state()}
if(this.s.colExists){var idx=-1;if(loadedFilter&&loadedFilter.searchPanes&&loadedFilter.searchPanes.panes){for(var i=0;i<loadedFilter.searchPanes.panes.length;i++){if(loadedFilter.searchPanes.panes[i].id===this.s.index){idx=i;break}}}
if((this.s.colOpts.show===!1||this.s.colOpts.show!==undefined&&this.s.colOpts.show!==!0)&&idx===-1){this.dom.container.addClass(this.classes.hidden);this.s.displayed=!1;return!1}else if(this.s.colOpts.show===!0||idx!==-1){this.s.displayed=!0}
if(!this.s.dt.page.info().serverSide&&(!dataIn||!dataIn.searchPanes||!dataIn.searchPanes.options)){if(this.s.rowData.arrayFilter.length===0){this.s.rowData.totalOptions=0;this._populatePane();this.s.rowData.arrayOriginal=this.s.rowData.arrayFilter;this.s.rowData.binsOriginal=this.s.rowData.bins}
var binLength=Object.keys(this.s.rowData.binsOriginal).length;var uniqueRatio=this._uniqueRatio(binLength,this.s.dt.rows()[0].length);if(this.s.displayed===!1&&((this.s.colOpts.show===undefined&&this.s.colOpts.threshold===null?uniqueRatio>this.c.threshold:uniqueRatio>this.s.colOpts.threshold)||this.s.colOpts.show!==!0&&binLength<=1)){this.dom.container.addClass(this.classes.hidden);this.s.displayed=!1;return}
this.dom.container.addClass(this.classes.show);this.s.displayed=!0}else if(dataIn&&dataIn.searchPanes&&dataIn.searchPanes.options){this._serverPopulate(dataIn)}}else{this.s.displayed=!0}
this._displayPane();if(!this.s.listSet){this.dom.dtP.on('stateLoadParams.dtsp',function(e,settings,data){if($$5.isEmptyObject(_this.s.dt.state.loaded())){$$5.each(data,function(index){delete data[index]})}})}
if(prevEl!==null&&this.dom.panesContainer.has(prevEl).length>0){this.dom.container.insertAfter(prevEl)}else{this.dom.panesContainer.prepend(this.dom.container)}
var errMode=$$5.fn.dataTable.ext.errMode;$$5.fn.dataTable.ext.errMode='none';this.dom.dtP.on('init.dt',function(e,s){var dt=_this.dom.dtP.DataTable();var style=dt.select.style();dt.select.style(style)});this.s.dtPane=this.dom.dtP.DataTable($$5.extend(!0,this._getPaneConfig(),this.c.dtOpts,this.s.colOpts?this.s.colOpts.dtOpts:{},this.s.colOpts.options||!this.s.colExists?{createdRow:function(row,data){$$5(row).addClass(data.className)}}:undefined,this.s.customPaneSettings!==null&&this.s.customPaneSettings.dtOpts?this.s.customPaneSettings.dtOpts:{},$$5.fn.dataTable.versionCheck('2')?{layout:{bottomStart:null,bottomEnd:null,topStart:null,topEnd:null}}:{dom:'t'}));this.dom.dtP.addClass(this.classes.table);var headerText='Custom Pane';if(this.s.customPaneSettings&&this.s.customPaneSettings.header){headerText=this.s.customPaneSettings.header}else if(this.s.colOpts.header){headerText=this.s.colOpts.header}else if(this.s.colExists){headerText=$$5.fn.dataTable.versionCheck('2')?this.s.dt.column(this.s.index).title():this.s.dt.settings()[0].aoColumns[this.s.index].sTitle}
headerText=this._escapeHTML(headerText);this.dom.searchBox.attr('placeholder',headerText);$$5.fn.dataTable.ext.errMode=errMode;if(this.s.colExists){for(var j=0,jen=this.s.rowData.arrayFilter.length;j<jen;j++){if(this.s.dt.page.info().serverSide){row=this.addRow(this.s.rowData.arrayFilter[j].display,this.s.rowData.arrayFilter[j].filter,this.s.rowData.arrayFilter[j].sort,this.s.rowData.arrayFilter[j].type);for(var _i=0,_a=this.s.serverSelect;_i<_a.length;_i++){var option=_a[_i];if(option.filter===this.s.rowData.arrayFilter[j].filter){this.s.serverSelecting=!0;row.select();this.s.serverSelecting=!1}}}else if(!this.s.dt.page.info().serverSide&&this.s.rowData.arrayFilter[j]){this.addRow(this.s.rowData.arrayFilter[j].display,this.s.rowData.arrayFilter[j].filter,this.s.rowData.arrayFilter[j].sort,this.s.rowData.arrayFilter[j].type)}else if(!this.s.dt.page.info().serverSide){this.addRow('','','','')}}}
if(this.s.colOpts.options||this.s.customPaneSettings&&this.s.customPaneSettings.options){this._getComparisonRows()}
this.s.dtPane.draw();this.s.dtPane.table().node().parentNode.scrollTop=this.s.scrollTop;this.adjustTopRow();this.setListeners();this.s.listSet=!0;for(var _b=0,selectedRows_1=selectedRows;_b<selectedRows_1.length;_b++){var selection=selectedRows_1[_b];if(selection){for(var _c=0,_d=this.s.dtPane.rows().indexes().toArray();_c<_d.length;_c++){row=_d[_c];if(this.s.dtPane.row(row).data()&&selection.filter===this.s.dtPane.row(row).data().filter){if(this.s.dt.page.info().serverSide){this.s.serverSelecting=!0;this.s.dtPane.row(row).select();this.s.serverSelecting=!1}else{this.s.dtPane.row(row).select()}}}}}
if(this.s.dt.page.info().serverSide){this.s.dtPane.search(this.dom.searchBox.val()).draw()}
if((this.c.initCollapsed&&this.s.colOpts.initCollapsed!==!1||this.s.colOpts.initCollapsed)&&(this.c.collapse&&this.s.colOpts.collapse!==!1||this.s.colOpts.collapse)){if(this.s.dtPane.settings()[0]._bInitComplete){this.collapse()}else{this.s.dtPane.one('init',function(){return _this.collapse()})}}
if(loadedFilter&&loadedFilter.searchPanes&&loadedFilter.searchPanes.panes&&(!dataIn||dataIn.draw===1)){this._reloadSelect(loadedFilter);for(var _e=0,_f=loadedFilter.searchPanes.panes;_e<_f.length;_e++){var pane=_f[_e];if(pane.id===this.s.index){if(pane.searchTerm&&pane.searchTerm.length>0){this.dom.searchBox.val(pane.searchTerm).trigger('input')}
if(pane.order){this.s.dtPane.order(pane.order).draw()}
if(pane.collapsed){this.collapse()}else{this.show()}}}}
return!0};SearchPane.prototype._displayPane=function(){this.dom.dtP.empty();this.dom.topRow.empty().addClass(this.classes.topRow);if(parseInt(this.c.layout.split('-')[1],10)>3){this.dom.container.addClass(this.classes.smallGap)}
this.dom.topRow.addClass(this.classes.subRowsContainer).append(this.dom.upper.append(this.dom.searchCont)).append(this.dom.lower.append(this.dom.buttonGroup));if(this.c.dtOpts.searching===!1||this.s.colOpts.dtOpts&&this.s.colOpts.dtOpts.searching===!1||(!this.c.controls||!this.s.colOpts.controls)||this.s.customPaneSettings&&this.s.customPaneSettings.dtOpts&&this.s.customPaneSettings.dtOpts.searching!==undefined&&!this.s.customPaneSettings.dtOpts.searching){this.dom.searchBox.removeClass(this.classes.paneInputButton).addClass(this.classes.disabledButton).attr('disabled','true')}
this.dom.searchBox.appendTo(this.dom.searchCont);this._searchContSetup();if(this.c.clear&&this.c.controls&&this.s.colOpts.controls){this.dom.clear.appendTo(this.dom.buttonGroup)}
if(this.c.orderable&&this.s.colOpts.orderable&&this.c.controls&&this.s.colOpts.controls){this.dom.nameButton.appendTo(this.dom.buttonGroup)}
if(this.c.viewCount&&this.s.colOpts.viewCount&&this.c.orderable&&this.s.colOpts.orderable&&this.c.controls&&this.s.colOpts.controls){this.dom.countButton.appendTo(this.dom.buttonGroup)}
if((this.c.collapse&&this.s.colOpts.collapse!==!1||this.s.colOpts.collapse)&&this.c.controls&&this.s.colOpts.controls){this.dom.collapseButton.appendTo(this.dom.buttonGroup)}
this.dom.container.prepend(this.dom.topRow).append(this.dom.dtP).show()};SearchPane.prototype._escapeHTML=function(txt){return txt.toString().replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&quot;/g,'"').replace(/&amp;/g,'&')};SearchPane.prototype._getBonusOptions=function(){var defaultMutator={threshold:null};return $$5.extend(!0,{},SearchPane.defaults,defaultMutator,this.c?this.c:{})};SearchPane.prototype._getOptions=function(){var table=this.s.dt;var defaultMutator={collapse:null,emptyMessage:!1,initCollapsed:null,threshold:null};var columnOptions=table.settings()[0].aoColumns[this.s.index].searchPanes;var colOpts=$$5.extend(!0,{},SearchPane.defaults,defaultMutator,columnOptions);if(columnOptions&&columnOptions.hideCount&&columnOptions.viewCount===undefined){colOpts.viewCount=!columnOptions.hideCount}
return colOpts};SearchPane.prototype._populatePane=function(){this.s.rowData.arrayFilter=[];this.s.rowData.bins={};var settings=this.s.dt.context[0];if(!this.s.dt.page.info().serverSide){for(var _i=0,_a=this.s.dt.rows().indexes().toArray();_i<_a.length;_i++){var index=_a[_i];this._populatePaneArray(index,this.s.rowData.arrayFilter,settings)}}};SearchPane.prototype._search=function(filter,dataIndex){var colOpts=this.s.colOpts;var table=this.s.dt;for(var _i=0,_a=this.s.selections;_i<_a.length;_i++){var colSelect=_a[_i];if(typeof colSelect==='string'&&typeof filter==='string'){colSelect=this._escapeHTML(colSelect)}
if(Array.isArray(filter)){if(colOpts.combiner==='and'){if(!filter.includes(colSelect)){return!1}}else if(filter.includes(colSelect)){return!0}}else if(typeof colSelect==='function'){if(colSelect.call(table,table.row(dataIndex).data(),dataIndex)){if(colOpts.combiner==='or'){return!0}}else if(colOpts.combiner==='and'){return!1}}else if(filter===colSelect||!(typeof filter==='string'&&filter.length===0)&&filter==colSelect||colSelect===null&&typeof filter==='string'&&filter===''){return!0}}
if(colOpts.combiner==='and'){return!0}
return!1};SearchPane.prototype._searchContSetup=function(){if(this.c.controls&&this.s.colOpts.controls){this.dom.searchButton.appendTo(this.dom.searchLabelCont)}
if(!(this.c.dtOpts.searching===!1||this.s.colOpts.dtOpts.searching===!1||this.s.customPaneSettings&&this.s.customPaneSettings.dtOpts&&this.s.customPaneSettings.dtOpts.searching!==undefined&&!this.s.customPaneSettings.dtOpts.searching)){this.dom.searchLabelCont.appendTo(this.dom.searchCont)}};SearchPane.prototype._searchExtras=function(){var updating=this.s.updating;this.s.updating=!0;var filters=this.s.dtPane.rows({selected:!0}).data().pluck('filter').toArray();var nullIndex=filters.indexOf(this.emptyMessage());var container=$$5(this.s.dtPane.table().container());if(nullIndex>-1){filters[nullIndex]=''}
if(filters.length>0){container.addClass(this.classes.selected)}else if(filters.length===0){container.removeClass(this.classes.selected)}
this.s.updating=updating};SearchPane.version='2.1.2';SearchPane.classes={bordered:'dtsp-bordered',buttonGroup:'dtsp-buttonGroup',buttonSub:'dtsp-buttonSub',caret:'dtsp-caret',clear:'dtsp-clear',clearAll:'dtsp-clearAll',clearButton:'clearButton',collapseAll:'dtsp-collapseAll',collapseButton:'dtsp-collapseButton',container:'dtsp-searchPane',countButton:'dtsp-countButton',disabledButton:'dtsp-disabledButton',hidden:'dtsp-hidden',hide:'dtsp-hide',layout:'dtsp-',name:'dtsp-name',nameButton:'dtsp-nameButton',nameCont:'dtsp-nameCont',narrow:'dtsp-narrow',paneButton:'dtsp-paneButton',paneInputButton:'dtsp-paneInputButton',pill:'dtsp-pill',rotated:'dtsp-rotated',search:'dtsp-search',searchCont:'dtsp-searchCont',searchIcon:'dtsp-searchIcon',searchLabelCont:'dtsp-searchButtonCont',selected:'dtsp-selected',smallGap:'dtsp-smallGap',subRow1:'dtsp-subRow1',subRow2:'dtsp-subRow2',subRowsContainer:'dtsp-subRowsContainer',title:'dtsp-title',topRow:'dtsp-topRow'};SearchPane.defaults={clear:!0,collapse:!0,combiner:'or',container:function(dt){return dt.table().container()},controls:!0,dtOpts:{},emptyMessage:null,hideCount:!1,i18n:{clearPane:'&times;',count:'{total}',emptyMessage:'<em>No data</em>'},initCollapsed:!1,layout:'auto',name:undefined,orderable:!0,orthogonal:{display:'display',filter:'filter',hideCount:!1,search:'filter',show:undefined,sort:'sort',threshold:0.6,type:'type',viewCount:!0},preSelect:[],threshold:0.6,viewCount:!0};return SearchPane}());var __extends$4=(window&&window.__extends)||(function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b})||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b);};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}
d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __())}})();var SearchPaneST=(function(_super){__extends$4(SearchPaneST,_super);function SearchPaneST(paneSettings,opts,index,panesContainer,panes){return _super.call(this,paneSettings,opts,index,panesContainer,panes)||this}
SearchPaneST.prototype._emptyPane=function(){var dt=this.s.dtPane;if(DataTable.versionCheck('2')){var last=dt.select.last();var selectedIndex_1;if(last&&dt.row(last.row).any()){selectedIndex_1=dt.row(last.row).data().index}
dt.rows().remove();return function(){if(selectedIndex_1!==undefined){var idx=dt.row(function(i,data){return data.index===selectedIndex_1}).index();dt.select.last({row:idx,column:0})}}}
dt.rows().remove();return function(){}};SearchPaneST.prototype._serverPopulate=function(dataIn){var selection,row,data;this.s.rowData.binsShown={};this.s.rowData.arrayFilter=[];if(dataIn.tableLength!==undefined){this.s.tableLength=dataIn.tableLength;this.s.rowData.totalOptions=this.s.tableLength}else if(this.s.tableLength===null||this.s.dt.rows()[0].length>this.s.tableLength){this.s.tableLength=this.s.dt.rows()[0].length;this.s.rowData.totalOptions=this.s.tableLength}
var colTitle=this.s.dt.column(this.s.index).dataSrc();if(dataIn.searchPanes.options[colTitle]!==undefined){for(var _i=0,_a=dataIn.searchPanes.options[colTitle];_i<_a.length;_i++){var dataPoint=_a[_i];this.s.rowData.arrayFilter.push({display:dataPoint.label,filter:dataPoint.value,shown:+dataPoint.count,sort:dataPoint.label,total:+dataPoint.total,type:dataPoint.label});this.s.rowData.binsShown[dataPoint.value]=+dataPoint.count;this.s.rowData.bins[dataPoint.value]=+dataPoint.total}}
var binLength=Object.keys(this.s.rowData.bins).length;var uniqueRatio=this._uniqueRatio(binLength,this.s.tableLength);if(!this.s.colOpts.show&&this.s.displayed===!1&&((this.s.colOpts.show===undefined&&this.s.colOpts.threshold===null?uniqueRatio>this.c.threshold:uniqueRatio>this.s.colOpts.threshold)||this.s.colOpts.show!==!0&&binLength<=1)){this.dom.container.addClass(this.classes.hidden);this.s.displayed=!1;return}
this.s.rowData.arrayOriginal=this.s.rowData.arrayFilter;this.s.rowData.binsOriginal=this.s.rowData.bins;this.s.displayed=!0;if(this.s.dtPane){var selected=this.s.serverSelect;var reselect=this._emptyPane();for(var _b=0,_c=this.s.rowData.arrayFilter;_b<_c.length;_b++){data=_c[_b];if(this._shouldAddRow(data)){row=this.addRow(data.display,data.filter,data.sort,data.type);for(var i=0;i<selected.length;i++){selection=selected[i];if(selection.filter===data.filter){this.s.serverSelecting=!0;row.select();this.s.serverSelecting=!1;selected.splice(i,1);this.s.selections.push(data.filter);break}}}}
for(var _d=0,selected_1=selected;_d<selected_1.length;_d++){selection=selected_1[_d];for(var _e=0,_f=this.s.rowData.arrayOriginal;_e<_f.length;_e++){data=_f[_e];if(data.filter===selection.filter){row=this.addRow(data.display,data.filter,data.sort,data.type);this.s.serverSelecting=!0;row.select();this.s.serverSelecting=!1;this.s.selections.push(data.filter)}}}
this.s.serverSelect=this.s.dtPane.rows({selected:!0}).data().toArray();this.s.dtPane.draw();reselect()}};SearchPaneST.prototype.updateRows=function(){if(!this.s.dt.page.info().serverSide){this.s.rowData.binsShown={};for(var _i=0,_a=this.s.dt.rows({search:'applied'}).indexes().toArray();_i<_a.length;_i++){var index=_a[_i];this._updateShown(index,this.s.dt.settings()[0],this.s.rowData.binsShown)}}
var _loop_1=function(row){row.shown=typeof this_1.s.rowData.binsShown[row.filter]==='number'?this_1.s.rowData.binsShown[row.filter]:0;this_1.s.dtPane.row(function(idx,data){return data&&(data.index===row.index)}).data(row)};var this_1=this;for(var _b=0,_c=this.s.dtPane.rows().data().toArray();_b<_c.length;_b++){var row=_c[_b];_loop_1(row)}
this.s.dtPane.draw();this.s.dtPane.table().node().parentNode.scrollTop=this.s.scrollTop};SearchPaneST.prototype._makeSelection=function(){return};SearchPaneST.prototype._reloadSelect=function(){return};SearchPaneST.prototype._shouldAddRow=function(data){return!0};SearchPaneST.prototype._updateSelection=function(){if(this.s.dt.page.info().serverSide&&!this.s.updating&&!this.s.serverSelecting){this.s.serverSelect=this.s.dtPane.rows({selected:!0}).data().toArray()}};SearchPaneST.prototype._updateShown=function(rowIdx,settings,bins){if(bins===void 0){bins=this.s.rowData.binsShown}
var orth=typeof this.s.colOpts.orthogonal==='string'?this.s.colOpts.orthogonal:this.s.colOpts.orthogonal.search;var fastData=settings.fastData?settings.fastData:function(row,col,orth){return settings.oApi._fnGetCellData(settings,row,col,orth)};var filter=fastData(rowIdx,this.s.index,orth);var add=function(f){if(!bins[f]){bins[f]=1}else{bins[f]++}};if(Array.isArray(filter)){for(var _i=0,filter_1=filter;_i<filter_1.length;_i++){var f=filter_1[_i];add(f)}}else{add(filter)}};return SearchPaneST}(SearchPane));var __extends$3=(window&&window.__extends)||(function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b})||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b);};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}
d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __())}})();var $$4;function setJQuery$3(jq){$$4=jq}
var SearchPaneViewTotal=(function(_super){__extends$3(SearchPaneViewTotal,_super);function SearchPaneViewTotal(paneSettings,opts,index,panesContainer,panes){var _this=this;var override={i18n:{countFiltered:'{shown} ({total})'}};_this=_super.call(this,paneSettings,$$4.extend(override,opts),index,panesContainer,panes)||this;return _this}
SearchPaneViewTotal.prototype._getMessage=function(row){var countMessage=this.s.dt.i18n('searchPanes.count',this.c.i18n.count);var filteredMessage=this.s.dt.i18n('searchPanes.countFiltered',this.c.i18n.countFiltered);return(this.s.filteringActive?filteredMessage:countMessage).replace(/{total}/g,row.total).replace(/{shown}/g,row.shown)};SearchPaneViewTotal.prototype._getShown=function(filter){return this.s.rowData.binsShown&&this.s.rowData.binsShown[filter]?this.s.rowData.binsShown[filter]:0};return SearchPaneViewTotal}(SearchPaneST));var __extends$2=(window&&window.__extends)||(function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b})||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b);};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}
d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __())}})();var $$3;function setJQuery$2(jq){$$3=jq}
var SearchPaneCascade=(function(_super){__extends$2(SearchPaneCascade,_super);function SearchPaneCascade(paneSettings,opts,index,panesContainer,panes){var _this=this;var override={i18n:{count:'{shown}'}};_this=_super.call(this,paneSettings,$$3.extend(override,opts),index,panesContainer,panes)||this;return _this}
SearchPaneCascade.prototype.updateRows=function(){var selected=this.s.dtPane.rows({selected:!0}).data().toArray();var selection;if(this.s.colOpts.options||this.s.customPaneSettings&&this.s.customPaneSettings.options){this._getComparisonRows();var rows=this.s.dtPane.rows().toArray()[0];for(var i=0;i<rows.length;i++){var row=this.s.dtPane.row(rows[i]);var rowData=row.data();if(rowData===undefined){continue}
if(rowData.shown===0){row.remove();rows=this.s.dtPane.rows().toArray()[0];i--;continue}
for(var _i=0,selected_1=selected;_i<selected_1.length;_i++){selection=selected_1[_i];if(rowData.filter===selection.filter){row.select();selected.splice(i,1);this.s.selections.push(rowData.filter);break}}}}else{if(!this.s.dt.page.info().serverSide){this._activePopulatePane();this.s.rowData.binsShown={};for(var _a=0,_b=this.s.dt.rows({search:'applied'}).indexes().toArray();_a<_b.length;_a++){var index=_b[_a];this._updateShown(index,this.s.dt.settings()[0],this.s.rowData.binsShown)}}
this.s.dtPane.rows().remove();for(var _c=0,_d=this.s.rowData.arrayFilter;_c<_d.length;_c++){var data=_d[_c];if(data.shown===0){continue}
var newRow=this.addRow(data.display,data.filter,data.sort,data.type,undefined);for(var j=0;j<selected.length;j++){var selectedRow=selected[j];if(selectedRow.filter===data.filter){newRow.select();selected.splice(j,1);this.s.selections.push(data.filter);break}}}
for(var _e=0,selected_2=selected;_e<selected_2.length;_e++){selection=selected_2[_e];for(var _f=0,_g=this.s.rowData.arrayOriginal;_f<_g.length;_f++){var origData=_g[_f];if(origData.filter===selection.filter){var addedRow=this.addRow(origData.display,origData.filter,origData.sort,origData.type,undefined);addedRow.select();this.s.selections.push(origData.filter)}}}}
this.s.dtPane.draw();this.s.dtPane.table().node().parentNode.scrollTop=this.s.scrollTop;if(!this.s.dt.page.info().serverSide){this.s.dt.draw(!1)}};SearchPaneCascade.prototype._activePopulatePane=function(){this.s.rowData.arrayFilter=[];this.s.rowData.bins={};var settings=this.s.dt.settings()[0];if(!this.s.dt.page.info().serverSide){for(var _i=0,_a=this.s.dt.rows({search:'applied'}).indexes().toArray();_i<_a.length;_i++){var index=_a[_i];this._populatePaneArray(index,this.s.rowData.arrayFilter,settings)}}};SearchPaneCascade.prototype._getComparisonRows=function(){var options=this.s.colOpts.options?this.s.colOpts.options:this.s.customPaneSettings&&this.s.customPaneSettings.options?this.s.customPaneSettings.options:undefined;if(options===undefined){return}
var allRows=this.s.dt.rows();var shownRows=this.s.dt.rows({search:'applied'});var tableValsTotal=allRows.data().toArray();var tableValsShown=shownRows.data().toArray();var rows=[];this.s.dtPane.clear();this.s.indexes=[];for(var _i=0,options_1=options;_i<options_1.length;_i++){var comp=options_1[_i];var insert=comp.label!==''?comp.label:this.emptyMessage();var comparisonObj={className:comp.className,display:insert,filter:typeof comp.value==='function'?comp.value:[],shown:0,sort:insert,total:0,type:insert};if(typeof comp.value==='function'){for(var i=0;i<tableValsTotal.length;i++){if(comp.value.call(this.s.dt,tableValsTotal[i],allRows[0][i])){comparisonObj.total++}}
for(var j=0;j<tableValsShown.length;j++){if(comp.value.call(this.s.dt,tableValsShown[j],shownRows[0][j])){comparisonObj.shown++}}
if(typeof comparisonObj.filter!=='function'){comparisonObj.filter.push(comp.filter)}}
rows.push(this.addRow(comparisonObj.display,comparisonObj.filter,comparisonObj.sort,comparisonObj.type,comparisonObj.className,comparisonObj.total,comparisonObj.shown))}
return rows};SearchPaneCascade.prototype._getMessage=function(row){return this.s.dt.i18n('searchPanes.count',this.c.i18n.count).replace(/{total}/g,row.total).replace(/{shown}/g,row.shown)};SearchPaneCascade.prototype._getShown=function(filter){return this.s.rowData.binsShown&&this.s.rowData.binsShown[filter]?this.s.rowData.binsShown[filter]:0};SearchPaneCascade.prototype._shouldAddRow=function(data){return data.shown>0};return SearchPaneCascade}(SearchPaneST));var __extends$1=(window&&window.__extends)||(function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b})||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b);};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}
d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __())}})();var $$2;function setJQuery$1(jq){$$2=jq}
var SearchPaneCascadeViewTotal=(function(_super){__extends$1(SearchPaneCascadeViewTotal,_super);function SearchPaneCascadeViewTotal(paneSettings,opts,index,panesContainer,panes){var _this=this;var override={i18n:{count:'{total}',countFiltered:'{shown} ({total})'}};_this=_super.call(this,paneSettings,$$2.extend(override,opts),index,panesContainer,panes)||this;return _this}
SearchPaneCascadeViewTotal.prototype._activePopulatePane=function(){this.s.rowData.arrayFilter=[];this.s.rowData.binsShown={};var settings=this.s.dt.settings()[0];if(!this.s.dt.page.info().serverSide){for(var _i=0,_a=this.s.dt.rows({search:'applied'}).indexes().toArray();_i<_a.length;_i++){var index=_a[_i];this._populatePaneArray(index,this.s.rowData.arrayFilter,settings,this.s.rowData.binsShown)}}};SearchPaneCascadeViewTotal.prototype._getMessage=function(row){var countMessage=this.s.dt.i18n('searchPanes.count',this.c.i18n.count);var filteredMessage=this.s.dt.i18n('searchPanes.countFiltered',this.c.i18n.countFiltered);return(this.s.filteringActive?filteredMessage:countMessage).replace(/{total}/g,row.total).replace(/{shown}/g,row.shown)};return SearchPaneCascadeViewTotal}(SearchPaneCascade));var $$1;var dataTable$1;function setJQuery(jq){$$1=jq;dataTable$1=jq.fn.dataTable}
var SearchPanes=(function(){function SearchPanes(paneSettings,opts,fromPreInit,paneClass){var _this=this;if(fromPreInit===void 0){fromPreInit=!1}
if(paneClass===void 0){paneClass=SearchPane}
if(!dataTable$1||!dataTable$1.versionCheck||!dataTable$1.versionCheck('1.10.0')){throw new Error('SearchPane requires DataTables 1.10 or newer')}
if(!dataTable$1.select){throw new Error('SearchPane requires Select')}
var table=new dataTable$1.Api(paneSettings);this.classes=$$1.extend(!0,{},SearchPanes.classes);this.c=$$1.extend(!0,{},SearchPanes.defaults,opts);this.dom={clearAll:$$1('<button type="button"/>').addClass(this.classes.clearAll).html(table.i18n('searchPanes.clearMessage',this.c.i18n.clearMessage)),collapseAll:$$1('<button type="button"/>').addClass(this.classes.collapseAll).html(table.i18n('searchPanes.collapseMessage',this.c.i18n.collapseMessage)),container:$$1('<div/>').addClass(this.classes.panes).html(table.i18n('searchPanes.loadMessage',this.c.i18n.loadMessage)),emptyMessage:$$1('<div/>').addClass(this.classes.emptyMessage),panes:$$1('<div/>').addClass(this.classes.container),showAll:$$1('<button type="button"/>').addClass(this.classes.showAll).addClass(this.classes.disabledButton).attr('disabled','true').html(table.i18n('searchPanes.showMessage',this.c.i18n.showMessage)),title:$$1('<div/>').addClass(this.classes.title),titleRow:$$1('<div/>').addClass(this.classes.titleRow)};this.s={colOpts:[],dt:table,filterCount:0,minPaneWidth:260.0,page:0,paging:!1,pagingST:!1,paneClass:paneClass,panes:[],selectionList:[],serverData:{},stateRead:!1,updating:!1};if(table.settings()[0]._searchPanes){return}
$$1(document).on('draw.dt',function(e){if(_this.dom.container.find(e.target).length){_this._updateFilterCount()}});this._getState();if(this.s.dt.page.info().serverSide){var hostSettings=this.s.dt.settings()[0];this.s.dt.on('preXhr.dtsps',function(e,settings,data){if(hostSettings!==settings){return}
if(data.searchPanes===undefined){data.searchPanes={}}
if(data.searchPanes_null===undefined){data.searchPanes_null={}}
var src;for(var _i=0,_a=_this.s.selectionList;_i<_a.length;_i++){var selection=_a[_i];src=_this.s.dt.column(selection.column).dataSrc();if(data.searchPanes[src]===undefined){data.searchPanes[src]={}}
if(data.searchPanes_null[src]===undefined){data.searchPanes_null[src]={}}
for(var i=0;i<selection.rows.length;i++){data.searchPanes[src][i]=selection.rows[i];if(data.searchPanes[src][i]===null){data.searchPanes_null[src][i]=!0}else{data.searchPanes_null[src][i]=!1}}}
if(_this.s.selectionList.length>0){data.searchPanesLast=src}
data.searchPanes_options={cascade:_this.c.cascadePanes,viewCount:_this.c.viewCount,viewTotal:_this.c.viewTotal}})}
this._setXHR();table.settings()[0]._searchPanes=this;if(this.s.dt.settings()[0]._bInitComplete||fromPreInit){this._paneDeclare(table,paneSettings,opts)}else{table.one('preInit.dtsps',function(){_this._paneDeclare(table,paneSettings,opts)})}
return this}
SearchPanes.prototype.clearSelections=function(){var pane;for(var _i=0,_a=this.s.panes;_i<_a.length;_i++){pane=_a[_i];if(pane.s.dtPane){pane.s.scrollTop=pane.s.dtPane.table().node().parentNode.scrollTop}}
var searches=this.dom.container.find('.'+this.classes.search.replace(/\s+/g,'.'));searches.each(function(){$$1(this).val('').trigger('input')});this.s.selectionList=[];var returnArray=[];for(var _b=0,_c=this.s.panes;_b<_c.length;_b++){pane=_c[_b];if(pane.s.dtPane){returnArray.push(pane.clearPane())}}
return returnArray};SearchPanes.prototype.getNode=function(){return this.dom.container};SearchPanes.prototype.rebuild=function(targetIdx,maintainSelection){if(targetIdx===void 0){targetIdx=!1}
if(maintainSelection===void 0){maintainSelection=!1}
this.dom.emptyMessage.detach();if(targetIdx===!1){this.dom.panes.empty()}
var returnArray=[];for(var _i=0,_a=this.s.panes;_i<_a.length;_i++){var pane=_a[_i];if(targetIdx===!1||pane.s.index===targetIdx){pane.clearData();pane.rebuildPane(this.s.dt.page.info().serverSide?this.s.serverData:undefined,maintainSelection);this.dom.panes.append(pane.dom.container);returnArray.push(pane)}}
this._updateSelection();this._updateFilterCount();this._attachPaneContainer();this._initSelectionListeners(!1);this.s.dt.draw(!maintainSelection);this.resizePanes();return returnArray.length===1?returnArray[0]:returnArray};SearchPanes.prototype.resizePanes=function(){var pane;if(this.c.layout==='auto'){var contWidth=$$1(this.s.dt.searchPanes.container()).width();var target=Math.floor(contWidth/this.s.minPaneWidth);var highest_1=1;var highestmod_1=0;var dispIndex=[];for(var _i=0,_a=this.s.panes;_i<_a.length;_i++){pane=_a[_i];if(pane.s.displayed){dispIndex.push(pane.s.index)}}
var displayCount=dispIndex.length;if(target===displayCount){highest_1=target}else{for(var ppr=target;ppr>1;ppr--){var rem=displayCount%ppr;if(rem===0){highest_1=ppr;highestmod_1=0;break}else if(rem>highestmod_1){highest_1=ppr;highestmod_1=rem}}}
var widerIndexes_1=highestmod_1!==0?dispIndex.slice(dispIndex.length-highestmod_1,dispIndex.length):[];this.s.panes.forEach(function(pane){if(pane.s.displayed){pane.resize('columns-'+(!widerIndexes_1.includes(pane.s.index)?highest_1:highestmod_1))}})}else{for(var _b=0,_c=this.s.panes;_b<_c.length;_b++){pane=_c[_b];pane.adjustTopRow()}}
return this};SearchPanes.prototype._initSelectionListeners=function(isPreselect){return};SearchPanes.prototype._serverTotals=function(){return};SearchPanes.prototype._setXHR=function(){var _this=this;var hostSettings=this.s.dt.settings()[0];var run=function(json){if(json&&json.searchPanes&&json.searchPanes.options){_this.s.serverData=json;_this.s.serverData.tableLength=json.recordsTotal;_this._serverTotals()}};this.s.dt.on('xhr.dtsps',function(e,settings,json){if(hostSettings===settings){run(json)}});run(this.s.dt.ajax.json())};SearchPanes.prototype._stateLoadListener=function(){var _this=this;var hostSettings=this.s.dt.settings()[0];this.s.dt.on('stateLoadParams.dtsps',function(e,settings,data){if(data.searchPanes===undefined||settings!==hostSettings){return}
_this.clearSelections();_this.s.selectionList=data.searchPanes.selectionList?data.searchPanes.selectionList:[];if(data.searchPanes.panes){for(var _i=0,_a=data.searchPanes.panes;_i<_a.length;_i++){var loadedPane=_a[_i];for(var _b=0,_c=_this.s.panes;_b<_c.length;_b++){var pane=_c[_b];if(loadedPane.id===pane.s.index&&pane.s.dtPane){pane.dom.searchBox.val(loadedPane.searchTerm);pane.s.dtPane.order(loadedPane.order)}}}}
_this._makeSelections(_this.s.selectionList)})};SearchPanes.prototype._updateSelection=function(){this.s.selectionList=[];for(var _i=0,_a=this.s.panes;_i<_a.length;_i++){var pane=_a[_i];if(pane.s.dtPane){var rows=pane.s.dtPane.rows({selected:!0}).data().toArray().map(function(el){return el.filter});if(rows.length){this.s.selectionList.push({column:pane.s.index,rows:rows})}}}};SearchPanes.prototype._attach=function(){var _this=this;this.dom.titleRow.removeClass(this.classes.hide).detach().append(this.dom.title);if(this.c.clear){this.dom.clearAll.appendTo(this.dom.titleRow).off('click.dtsps').on('click.dtsps',function(){return _this.clearSelections()})}
if(this.c.collapse){this.dom.showAll.appendTo(this.dom.titleRow);this.dom.collapseAll.appendTo(this.dom.titleRow);this._setCollapseListener()}
for(var _i=0,_a=this.s.panes;_i<_a.length;_i++){var pane=_a[_i];this.dom.panes.append(pane.dom.container)}
this.dom.container.text('').removeClass(this.classes.hide).append(this.dom.titleRow).append(this.dom.panes);this.s.panes.forEach(function(pane){return pane.setListeners()});if($$1('div.'+this.classes.container).length===0){this.dom.container.prependTo(this.s.dt)}};SearchPanes.prototype._attachMessage=function(){var message;try{message=this.s.dt.i18n('searchPanes.emptyPanes',this.c.i18n.emptyPanes)}catch(error){message=null}
if(message===null){this.dom.container.addClass(this.classes.hide);this.dom.titleRow.removeClass(this.classes.hide);return}
this.dom.container.removeClass(this.classes.hide);this.dom.titleRow.addClass(this.classes.hide);this.dom.emptyMessage.html(message).appendTo(this.dom.container)};SearchPanes.prototype._attachPaneContainer=function(){for(var _i=0,_a=this.s.panes;_i<_a.length;_i++){var pane=_a[_i];if(pane.s.displayed===!0){this._attach();return}}
this._attachMessage()};SearchPanes.prototype._checkCollapse=function(){var disableClose=!0;var disableShow=!0;for(var _i=0,_a=this.s.panes;_i<_a.length;_i++){var pane=_a[_i];if(pane.s.displayed){if(!pane.dom.collapseButton.hasClass(pane.classes.rotated)){this.dom.collapseAll.removeClass(this.classes.disabledButton).removeAttr('disabled');disableClose=!1}else{this.dom.showAll.removeClass(this.classes.disabledButton).removeAttr('disabled');disableShow=!1}}}
if(disableClose){this.dom.collapseAll.addClass(this.classes.disabledButton).attr('disabled','true')}
if(disableShow){this.dom.showAll.addClass(this.classes.disabledButton).attr('disabled','true')}};SearchPanes.prototype._checkMessage=function(){for(var _i=0,_a=this.s.panes;_i<_a.length;_i++){var pane=_a[_i];if(pane.s.displayed===!0){this.dom.emptyMessage.detach();this.dom.titleRow.removeClass(this.classes.hide);return}}
this._attachMessage()};SearchPanes.prototype._collapseAll=function(){for(var _i=0,_a=this.s.panes;_i<_a.length;_i++){var pane=_a[_i];pane.collapse()}};SearchPanes.prototype._findPane=function(name){for(var _i=0,_a=this.s.panes;_i<_a.length;_i++){var pane=_a[_i];if(name===pane.s.name){return pane}}};SearchPanes.prototype._getState=function(){var loadedFilter=this.s.dt.state.loaded();if(loadedFilter&&loadedFilter.searchPanes&&loadedFilter.searchPanes.selectionList){this.s.selectionList=loadedFilter.searchPanes.selectionList}};SearchPanes.prototype._makeSelections=function(selectList){for(var _i=0,selectList_1=selectList;_i<selectList_1.length;_i++){var selection=selectList_1[_i];var pane=void 0;for(var _a=0,_b=this.s.panes;_a<_b.length;_a++){var p=_b[_a];if(p.s.index===selection.column){pane=p;break}}
if(pane&&pane.s.dtPane){for(var j=0;j<pane.s.dtPane.rows().data().toArray().length;j++){if(selection.rows.includes(typeof pane.s.dtPane.row(j).data().filter==='function'?pane.s.dtPane.cell(j,0).data():pane.s.dtPane.row(j).data().filter)){pane.s.dtPane.row(j).select()}}
pane.updateTable()}}};SearchPanes.prototype._paneDeclare=function(table,paneSettings,opts){var _this=this;table.columns(this.c.columns.length>0?this.c.columns:undefined).eq(0).each(function(idx){_this.s.panes.push(new _this.s.paneClass(paneSettings,opts,idx,_this.dom.panes))});var colCount=table.columns().eq(0).toArray().length;for(var i=0;i<this.c.panes.length;i++){var id=colCount+i;this.s.panes.push(new this.s.paneClass(paneSettings,opts,id,this.dom.panes,this.c.panes[i]))}
if(this.c.order.length>0){this.s.panes=this.c.order.map(function(name){return _this._findPane(name)})}
if(this.s.dt.settings()[0]._bInitComplete){this._startup(table)}else{if(dataTable$1.versionCheck('2')){this.s.dt.settings()[0].aoInitComplete.push(function(){return _this._startup(table)})}else{this.s.dt.settings()[0].aoInitComplete.push({fn:function(){return _this._startup(table)}})}}};SearchPanes.prototype._setCollapseListener=function(){var _this=this;this.dom.collapseAll.off('click.dtsps').on('click.dtsps',function(){_this._collapseAll();_this.dom.collapseAll.addClass(_this.classes.disabledButton).attr('disabled','true');_this.dom.showAll.removeClass(_this.classes.disabledButton).removeAttr('disabled');_this.s.dt.state.save()});this.dom.showAll.off('click.dtsps').on('click.dtsps',function(){_this._showAll();_this.dom.showAll.addClass(_this.classes.disabledButton).attr('disabled','true');_this.dom.collapseAll.removeClass(_this.classes.disabledButton).removeAttr('disabled');_this.s.dt.state.save()});for(var _i=0,_a=this.s.panes;_i<_a.length;_i++){var pane=_a[_i];pane.dom.topRow.off('collapse.dtsps').on('collapse.dtsps',function(){return _this._checkCollapse()})}
this._checkCollapse()};SearchPanes.prototype._showAll=function(){for(var _i=0,_a=this.s.panes;_i<_a.length;_i++){var pane=_a[_i];pane.show()}};SearchPanes.prototype._startup=function(table){var _this=this;this._attach();this.dom.panes.empty();var hostSettings=this.s.dt.settings()[0];for(var _i=0,_a=this.s.panes;_i<_a.length;_i++){var pane=_a[_i];pane.rebuildPane(Object.keys(this.s.serverData).length>0?this.s.serverData:undefined);this.dom.panes.append(pane.dom.container)}
if(this.c.layout==='auto'){this.resizePanes()}
var loadedFilter=this.s.dt.state.loaded();if(!this.s.stateRead&&loadedFilter){this.s.dt.page(loadedFilter.start/this.s.dt.page.len()).draw('page')}
this.s.stateRead=!0;this._checkMessage();table.on('preDraw.dtsps',function(){if(!_this.s.updating&&!_this.s.paging){_this._updateFilterCount();_this._updateSelection()}
_this.s.paging=!1});$$1(window).on('resize.dtsps',dataTable$1.util.throttle(function(){return _this.resizePanes()}));this.s.dt.on('stateSaveParams.dtsps',function(e,settings,data){if(settings!==hostSettings){return}
if(data.searchPanes===undefined){data.searchPanes={}}
data.searchPanes.selectionList=_this.s.selectionList});this._stateLoadListener();table.off('page.dtsps page-nc.dtsps').on('page.dtsps page-nc.dtsps',function(e,s){_this.s.paging=!0;_this.s.pagingST=!0;_this.s.page=_this.s.dt.page()});if(this.s.dt.page.info().serverSide){table.off('preXhr.dtsps').on('preXhr.dtsps',function(e,settings,data){if(settings!==hostSettings){return}
if(!data.searchPanes){data.searchPanes={}}
if(!data.searchPanes_null){data.searchPanes_null={}}
var filterCount=0;for(var _i=0,_a=_this.s.panes;_i<_a.length;_i++){var pane=_a[_i];var src=_this.s.dt.column(pane.s.index).dataSrc();if(!data.searchPanes[src]){data.searchPanes[src]={}}
if(!data.searchPanes_null[src]){data.searchPanes_null[src]={}}
if(pane.s.dtPane){var rowData=pane.s.dtPane.rows({selected:!0}).data().toArray();for(var i=0;i<rowData.length;i++){data.searchPanes[src][i]=rowData[i].filter;if(!data.searchPanes[src][i]){data.searchPanes_null[src][i]=!0}else{data.searchPanes_null[src][i]=!1}
filterCount++}}}
if(filterCount>0){if(filterCount!==_this.s.filterCount){data.start=0;_this.s.page=0}else{data.start=_this.s.page*_this.s.dt.page.len()}
_this.s.dt.page(_this.s.page);_this.s.filterCount=filterCount}
if(_this.s.selectionList.length>0){data.searchPanesLast=_this.s.dt.column(_this.s.selectionList[_this.s.selectionList.length-1].column).dataSrc()}
data.searchPanes_options={cascade:_this.c.cascadePanes,viewCount:_this.c.viewCount,viewTotal:_this.c.viewTotal}})}else{table.on('preXhr.dtsps',function(){return _this.s.panes.forEach(function(pane){return pane.clearData()})})}
this.s.dt.on('xhr.dtsps',function(e,settings){if(settings.nTable!==_this.s.dt.table().node()){return}
if(!_this.s.dt.page.info().serverSide){var processing_1=!1;_this.s.dt.one('preDraw.dtsps',function(){if(processing_1){return}
var page=_this.s.dt.page();processing_1=!0;_this.s.updating=!0;_this.dom.panes.empty();for(var _i=0,_a=_this.s.panes;_i<_a.length;_i++){var pane=_a[_i];pane.clearData();pane.rebuildPane(undefined,!0);_this.dom.panes.append(pane.dom.container)}
if(!_this.s.dt.page.info().serverSide){_this.s.dt.draw()}
_this.s.updating=!1;_this._updateSelection();_this._checkMessage();_this.s.dt.one('draw.dtsps',function(){_this.s.updating=!0;_this.s.dt.page(page).draw(!1);_this.s.updating=!1})})}});var selectList=this.c.preSelect;if(loadedFilter&&loadedFilter.searchPanes&&loadedFilter.searchPanes.selectionList){selectList=loadedFilter.searchPanes.selectionList}
this._makeSelections(selectList);this._updateFilterCount();table.on('destroy.dtsps',function(e,settings){if(settings!==hostSettings){return}
for(var _i=0,_a=_this.s.panes;_i<_a.length;_i++){var pane=_a[_i];pane.destroy()}
table.off('.dtsps');_this.dom.showAll.off('.dtsps');_this.dom.clearAll.off('.dtsps');_this.dom.collapseAll.off('.dtsps');$$1(table.table().node()).off('.dtsps');_this.dom.container.detach();_this.clearSelections()});if(this.c.collapse){this._setCollapseListener()}
if(this.c.clear){this.dom.clearAll.off('click.dtsps').on('click.dtsps',function(){return _this.clearSelections()})}
hostSettings._searchPanes=this;this.s.dt.state.save()};SearchPanes.prototype._updateFilterCount=function(){var filterCount=0;var tableSearch=0;for(var _i=0,_a=this.s.panes;_i<_a.length;_i++){var pane=_a[_i];if(pane.s.dtPane){filterCount+=pane.getPaneCount();if(pane.s.dtPane.search()){tableSearch++}}}
this.dom.title.html(this.s.dt.i18n('searchPanes.title',this.c.i18n.title,filterCount));if(this.c.filterChanged&&typeof this.c.filterChanged==='function'){this.c.filterChanged.call(this.s.dt,filterCount)}
if(filterCount===0&&tableSearch===0){this.dom.clearAll.addClass(this.classes.disabledButton).attr('disabled','true')}else{this.dom.clearAll.removeClass(this.classes.disabledButton).removeAttr('disabled')}};SearchPanes.version='2.3.1';SearchPanes.classes={clear:'dtsp-clear',clearAll:'dtsp-clearAll',collapseAll:'dtsp-collapseAll',container:'dtsp-searchPanes',disabledButton:'dtsp-disabledButton',emptyMessage:'dtsp-emptyMessage',hide:'dtsp-hidden',panes:'dtsp-panesContainer',search:'dtsp-search',showAll:'dtsp-showAll',title:'dtsp-title',titleRow:'dtsp-titleRow'};SearchPanes.defaults={cascadePanes:!1,clear:!0,collapse:!0,columns:[],container:function(dt){return dt.table().container()},filterChanged:undefined,i18n:{clearMessage:'Clear All',clearPane:'&times;',collapse:{0:'SearchPanes',_:'SearchPanes (%d)'},collapseMessage:'Collapse All',count:'{total}',emptyMessage:'<em>No data</em>',emptyPanes:'No SearchPanes',loadMessage:'Loading Search Panes...',showMessage:'Show All',title:'Filters Active - %d'},layout:'auto',order:[],panes:[],preSelect:[],viewCount:!0,viewTotal:!1};return SearchPanes}());var __extends=(window&&window.__extends)||(function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b})||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return extendStatics(d,b);};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}
d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __())}})();var SearchPanesST=(function(_super){__extends(SearchPanesST,_super);function SearchPanesST(paneSettings,opts,fromPreInit){if(fromPreInit===void 0){fromPreInit=!1}
var _this=this;var paneClass;if(opts.cascadePanes&&opts.viewTotal){paneClass=SearchPaneCascadeViewTotal}else if(opts.cascadePanes){paneClass=SearchPaneCascade}else if(opts.viewTotal){paneClass=SearchPaneViewTotal}
_this=_super.call(this,paneSettings,opts,fromPreInit,paneClass)||this;var dt=_this.s.dt;var loadedFilter=dt.state.loaded();var loadFn=function(){return _this._initSelectionListeners(!0,loadedFilter&&loadedFilter.searchPanes&&loadedFilter.searchPanes.selectionList?loadedFilter.searchPanes.selectionList:_this.c.preSelect)};if(dt.settings()[0]._bInitComplete){loadFn()}else{dt.off('init.dtsps').on('init.dtsps',loadFn)}
return _this}
SearchPanesST.prototype._initSelectionListeners=function(isPreselect,preSelect){if(isPreselect===void 0){isPreselect=!0}
if(preSelect===void 0){preSelect=[]}
if(isPreselect){this.s.selectionList=preSelect}
for(var _i=0,_a=this.s.panes;_i<_a.length;_i++){var pane=_a[_i];if(pane.s.displayed){pane.s.dtPane.off('select.dtsp').on('select.dtsp',this._update(pane)).off('deselect.dtsp').on('deselect.dtsp',this._updateTimeout(pane))}}
this.s.dt.off('draw.dtsps').on('draw.dtsps',this._update());this._updateSelectionList()};SearchPanesST.prototype._serverTotals=function(){for(var _i=0,_a=this.s.panes;_i<_a.length;_i++){var pane=_a[_i];if(pane.s.colOpts.show){var colTitle=this.s.dt.column(pane.s.index).dataSrc();var blockVT=!0;if(this.s.serverData.searchPanes.options[colTitle]){for(var _b=0,_c=this.s.serverData.searchPanes.options[colTitle];_b<_c.length;_b++){var data=_c[_b];if(data.total!==data.count){blockVT=!1;break}}}
pane.s.filteringActive=!blockVT;pane._serverPopulate(this.s.serverData)}}};SearchPanesST.prototype._stateLoadListener=function(){var _this=this;var stateLoadFunction=function(e,settings,data){if(data.searchPanes===undefined){return}
_this.s.selectionList=data.searchPanes.selectionList?data.searchPanes.selectionList:[];if(data.searchPanes.panes){for(var _i=0,_a=data.searchPanes.panes;_i<_a.length;_i++){var loadedPane=_a[_i];for(var _b=0,_c=_this.s.panes;_b<_c.length;_b++){var pane=_c[_b];if(loadedPane.id===pane.s.index&&pane.s.dtPane){pane.dom.searchBox.val(loadedPane.searchTerm);pane.s.dtPane.order(loadedPane.order)}}}}
_this._updateSelectionList()};this.s.dt.off('stateLoadParams.dtsps',stateLoadFunction).on('stateLoadParams.dtsps',stateLoadFunction)};SearchPanesST.prototype._updateSelection=function(){return};SearchPanesST.prototype._update=function(pane){var _this=this;if(pane===void 0){pane=undefined}
return function(){if(pane){clearTimeout(pane.s.deselectTimeout)}
_this._updateSelectionList(pane)}};SearchPanesST.prototype._updateTimeout=function(pane){var _this=this;if(pane===void 0){pane=undefined}
return function(){return pane?pane.s.deselectTimeout=setTimeout(function(){return _this._updateSelectionList(pane)},50):_this._updateSelectionList()}};SearchPanesST.prototype._updateSelectionList=function(paneIn){if(paneIn===void 0){paneIn=undefined}
if(this.s.pagingST){this.s.pagingST=!1;return}else if(this.s.updating||paneIn&&paneIn.s.serverSelecting){return}
if(paneIn!==undefined){if(this.s.dt.page.info().serverSide){paneIn._updateSelection()}
var rows=paneIn.s.dtPane.rows({selected:!0}).data().toArray().map(function(el){return el.filter});this.s.selectionList=this.s.selectionList.filter(function(selection){return selection.column!==paneIn.s.index});if(rows.length>0){this.s.selectionList.push({column:paneIn.s.index,rows:rows});paneIn.dom.clear.removeClass(this.classes.disabledButton).removeAttr('disabled')}else{paneIn.dom.clear.addClass(this.classes.disabledButton).attr('disabled','true')}
if(this.s.dt.page.info().serverSide){this.s.dt.draw(!1)}}
this._remakeSelections();this._updateFilterCount()};SearchPanesST.prototype._remakeSelections=function(){var currPane;var pane;this.s.updating=!0;if(!this.s.dt.page.info().serverSide){var tmpSL=this.s.selectionList;var anotherFilter=!1;this.clearSelections();this.s.dt.draw(!1);if(this.s.dt.rows().toArray()[0].length>this.s.dt.rows({search:'applied'}).toArray()[0].length){anotherFilter=!0}
this.s.selectionList=tmpSL;for(var _i=0,_a=this.s.panes;_i<_a.length;_i++){pane=_a[_i];if(pane.s.displayed){pane.s.filteringActive=anotherFilter;pane.updateRows()}}
for(var _b=0,_c=this.s.selectionList;_b<_c.length;_b++){var selection=_c[_b];pane=null;for(var _d=0,_e=this.s.panes;_d<_e.length;_d++){var paneCheck=_e[_d];if(paneCheck.s.index===selection.column){pane=paneCheck;break}}
if(!pane.s.dtPane){continue}
var ids=pane.s.dtPane.rows().indexes().toArray();for(var i=0;i<selection.rows.length;i++){var rowFound=!1;for(var _f=0,ids_1=ids;_f<ids_1.length;_f++){var id=ids_1[_f];var currRow=pane.s.dtPane.row(id);var data=currRow.data();if(selection.rows[i]===data.filter){currRow.select();rowFound=!0}}
if(!rowFound){selection.rows.splice(i,1);i--}}
pane.s.selections=selection.rows;if(selection.rows.length===0){continue}
this.s.dt.draw();var filteringActive=!1;var filterCount=0;var prevSelectedPanes=0;var selectedPanes=0;for(var _g=0,_h=this.s.panes;_g<_h.length;_g++){currPane=_h[_g];if(currPane.s.dtPane){filterCount+=currPane.getPaneCount();if(filterCount>prevSelectedPanes){selectedPanes++;prevSelectedPanes=filterCount}}}
filteringActive=filterCount>0;for(var _j=0,_k=this.s.panes;_j<_k.length;_j++){currPane=_k[_j];if(currPane.s.displayed){if(anotherFilter||pane.s.index!==currPane.s.index||!filteringActive){currPane.s.filteringActive=filteringActive||anotherFilter}else if(selectedPanes===1){currPane.s.filteringActive=!1}
if(currPane.s.index!==pane.s.index){currPane.updateRows()}}}}
this.s.dt.draw(!1)}else{if(this.s.selectionList.length>0){pane=this.s.panes[this.s.selectionList[this.s.selectionList.length-1].column]}
for(var _l=0,_m=this.s.panes;_l<_m.length;_l++){currPane=_m[_l];if(currPane.s.displayed&&(!pane||currPane.s.index!==pane.s.index)){currPane.updateRows()}}}
this.s.updating=!1};return SearchPanesST}(SearchPanes));/*! SearchPanes 2.3.1
     * © SpryMedia Ltd - datatables.net/license
     */
setJQuery$4($);setJQuery($);setJQuery$3($);setJQuery$2($);setJQuery$1($);var dataTable=$.fn.dataTable;dataTable.SearchPanes=SearchPanes;DataTable.SearchPanes=SearchPanes;dataTable.SearchPanesST=SearchPanesST;DataTable.SearchPanesST=SearchPanesST;dataTable.SearchPane=SearchPane;DataTable.SearchPane=SearchPane;dataTable.SearchPaneViewTotal=SearchPaneViewTotal;DataTable.SearchPaneViewTotal=SearchPaneViewTotal;dataTable.SearchPaneCascade=SearchPaneCascade;DataTable.SearchPaneCascade=SearchPaneCascade;dataTable.SearchPaneCascadeViewTotal=SearchPaneCascadeViewTotal;DataTable.SearchPaneCascadeViewTotal=SearchPaneCascadeViewTotal;var apiRegister=$.fn.dataTable.Api.register;apiRegister('searchPanes()',function(){return this});apiRegister('searchPanes.clearSelections()',function(){return this.iterator('table',function(ctx){if(ctx._searchPanes){ctx._searchPanes.clearSelections()}})});apiRegister('searchPanes.rebuildPane()',function(targetIdx,maintainSelections){return this.iterator('table',function(ctx){if(ctx._searchPanes){ctx._searchPanes.rebuild(targetIdx,maintainSelections)}})});apiRegister('searchPanes.resizePanes()',function(){var ctx=this.context[0];return ctx._searchPanes?ctx._searchPanes.resizePanes():null});apiRegister('searchPanes.container()',function(){var ctx=this.context[0];return ctx._searchPanes?ctx._searchPanes.getNode():null});DataTable.ext.buttons.searchPanesClear={action:function(e,dt){dt.searchPanes.clearSelections()},text:'Clear Panes'};DataTable.ext.buttons.searchPanes={action:function(e,dt,node,config){var _this=this;var that=this;if(!config._panes){this.processing(!0);setTimeout(function(){_buttonSourced(dt,node,config);_this.popover(config._panes.getNode(),{align:'container',span:'container'});config._panes.rebuild(undefined,!0);$('table.dataTable',config._panes.getNode()).DataTable().columns.adjust();that.processing(!1)},10)}else{this.popover(config._panes.getNode(),{align:'container',span:'container'});config._panes.rebuild(undefined,!0)}},init:function(dt,node,config){dt.button(node).text(config.text||dt.i18n('searchPanes.collapse','SearchPanes',0));if(dt.init().stateSave||config.delayInit===!1){_buttonSourced(dt,node,config)}},config:{},text:'',delayInit:!0};function _buttonSourced(dt,node,config){var buttonOpts=$.extend({filterChanged:function(count){dt.button(node).text(dt.i18n('searchPanes.collapse',dt.context[0].oLanguage.searchPanes!==undefined?dt.context[0].oLanguage.searchPanes.collapse:dt.context[0]._searchPanes.c.i18n.collapse,count))}},config.config);var panes=buttonOpts&&(buttonOpts.cascadePanes||buttonOpts.viewTotal)?new DataTable.SearchPanesST(dt,buttonOpts):new DataTable.SearchPanes(dt,buttonOpts);dt.button(node).text(config.text||dt.i18n('searchPanes.collapse',panes.c.i18n.collapse,0));config._panes=panes}
function _init(settings,options,fromPre){if(options===void 0){options=null}
if(fromPre===void 0){fromPre=!1}
var api=new dataTable.Api(settings);var opts=options?options:api.init().searchPanes||dataTable.defaults.searchPanes;var searchPanes=opts&&(opts.cascadePanes||opts.viewTotal)?new SearchPanesST(api,opts,fromPre):new SearchPanes(api,opts,fromPre);var node=searchPanes.getNode();return node}
$(document).on('preInit.dt.dtsp',function(e,settings){if(e.namespace!=='dt'){return}
if(settings.oInit.searchPanes||DataTable.defaults.searchPanes){if(!settings._searchPanes){_init(settings,null,!0)}}});DataTable.ext.feature.push({cFeature:'P',fnInit:_init});if(DataTable.feature){DataTable.feature.register('searchPanes',_init)}})();return DataTable}));
/*! Bootstrap integration for DataTables' SearchPanes
 * © SpryMedia Ltd - datatables.net/license
 */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery','datatables.net-dt','datatables.net-searchpanes'],function($){return factory($,window,document)})}else if(typeof exports==='object'){var jq=require('jquery');var cjsRequires=function(root,$){if(!$.fn.dataTable){require('datatables.net-dt')(root,$)}
if(!$.fn.dataTable.SearchPanes){require('datatables.net-searchpanes')(root,$)}};if(typeof window==='undefined'){module.exports=function(root,$){if(!root){root=window}
if(!$){$=jq(root)}
cjsRequires(root,$);return factory($,root,root.document)}}else{cjsRequires(window,jq);module.exports=factory(jq,window,window.document)}}else{factory(jQuery,window,document)}}(function($,window,document){'use strict';var DataTable=$.fn.dataTable;return DataTable}))
